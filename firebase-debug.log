[debug] [2020-04-23T21:23:44.205Z] ----------------------------------------------------------------------
[debug] [2020-04-23T21:23:44.206Z] Command:       /Users/yoved/.nvm/versions/node/v12.16.1/bin/node /Users/yoved/.nvm/versions/node/v12.16.1/bin/firebase emulators:start --only firestore,functions
[debug] [2020-04-23T21:23:44.206Z] CLI Version:   8.1.0
[debug] [2020-04-23T21:23:44.206Z] Platform:      darwin
[debug] [2020-04-23T21:23:44.206Z] Node Version:  v12.16.1
[debug] [2020-04-23T21:23:44.207Z] Time:          Fri Apr 24 2020 00:23:44 GMT+0300 (Israel Daylight Time)
[debug] [2020-04-23T21:23:44.207Z] ----------------------------------------------------------------------
[debug] [2020-04-23T21:23:44.207Z] 
[debug] [2020-04-23T21:23:44.213Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2020-04-23T21:23:44.214Z] > authorizing via signed-in user
[info] i  emulators: Starting emulators: functions, firestore
[debug] [2020-04-23T21:23:44.253Z] [hub] writing locator at /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/hub-joie-app.json
[info] ✔  hub: emulator hub started at http://localhost:4400
[warn] ⚠  Your requested "node" version "8" doesn't match your global version "12"
[info] ✔  functions: functions emulator started at http://localhost:5001
[debug] [2020-04-23T21:23:44.528Z] Ignoring unsupported arg: projectId
[debug] [2020-04-23T21:23:44.528Z] Ignoring unsupported arg: auto_download
[debug] [2020-04-23T21:23:44.528Z] Starting firestore emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/Users/yoved/.cache/firebase/emulators/cloud-firestore-emulator-v1.11.3.jar","--host","localhost","--port",8080,"--rules","/Users/yoved/Repos/joie/firestore.rules","--functions_emulator","localhost:5001"],"optionalArgs":["port","webchannel_port","host","rules","functions_emulator","seed_from_export"],"joinArgs":false}
[info] i  firestore: firestore emulator logging to firestore-debug.log
[debug] [2020-04-23T21:23:45.902Z] API endpoint: http://localhost
[debug] [2020-04-23T21:23:45.902Z] :8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=localhost:8080

Dev App Server is now running.


[info] ✔  firestore: firestore emulator started at http://localhost:8080
[info] i  firestore: For testing set FIRESTORE_EMULATOR_HOST=localhost:8080
[info] i  functions: Watching "/Users/yoved/Repos/joie/functions" for Cloud Functions...
[debug] [2020-04-23T21:23:46.063Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:23:46.064Z] [worker-pool] Adding worker with key ~diagnostic~, total=1 
[debug] [2020-04-23T21:23:46.064Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:23:46.064Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70147.sock 
[debug] [2020-04-23T21:23:46.065Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: BUSY 
[debug] [2020-04-23T21:23:46.286Z] [runtime-status] [70147] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:23:46.287Z] [runtime-status] [70147] Disabled runtime features: undefined 
[debug] [2020-04-23T21:23:46.291Z] [runtime-status] [70147] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:23:46.292Z] [runtime-status] [70147] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:23:46.294Z] [runtime-status] [70147] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:23:46.353Z] [runtime-status] [70147] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:23:46.354Z] [runtime-status] [70147] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:23:46.354Z] [runtime-status] [70147] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:23:46.355Z] [runtime-status] [70147] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:23:46.355Z] [runtime-status] [70147] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:23:46.358Z] [runtime-status] [70147] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:23:46.777Z] [runtime-status] [70147] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:23:46.842Z] Unsupported trigger: {"eventTrigger":{"resource":"projects/joie-app","eventType":"providers/firebase.auth/eventTypes/user.create","service":"firebaseauth.googleapis.com"},"name":"newUserSetup","entryPoint":"newUserSetup"} 
[debug] [2020-04-23T21:23:46.842Z] Unsupported trigger: {"eventTrigger":{"resource":"projects/joie-app","eventType":"providers/firebase.auth/eventTypes/user.delete","service":"firebaseauth.googleapis.com"},"name":"cleanupUser","entryPoint":"cleanupUser"} 
[debug] [2020-04-23T21:23:46.843Z] addFirestoreTrigger "{\"eventTrigger\":{\"resource\":\"projects/joie-app/databases/(default)/documents/posts/{id}\",\"eventType\":\"providers/cloud.firestore/eventTypes/document.create\",\"service\":\"firestore.googleapis.com\"}}"
[debug] [2020-04-23T21:23:46.843Z] >>> HTTP REQUEST PUT http://localhost:8080/emulator/v1/projects/joie-app/triggers/newPostSetup  
 {"eventTrigger":{"resource":"projects/joie-app/databases/(default)/documents/posts/{id}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[debug] [2020-04-23T21:23:46.845Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: IDLE 
[debug] [2020-04-23T21:23:46.877Z] Apr 24, 2020 12:23:46 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.

[debug] [2020-04-23T21:23:47.104Z] Apr 24, 2020 12:23:47 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[debug] [2020-04-23T21:23:47.767Z] <<< HTTP RESPONSE 200 {"content-type":"application/json","content-length":"4"}
[info] ✔  functions[newPostSetup]: firestore function initialized.
[info] ✔  functions[stripeGetInvoices]: http function initialized (http://localhost:5001/joie-app/us-central1/stripeGetInvoices).
[info] ✔  functions[stripeGetCharges]: http function initialized (http://localhost:5001/joie-app/us-central1/stripeGetCharges).
[info] ✔  functions[stripeGetCustomer]: http function initialized (http://localhost:5001/joie-app/us-central1/stripeGetCustomer).
[info] ✔  functions[stripeAttachSource]: http function initialized (http://localhost:5001/joie-app/us-central1/stripeAttachSource).
[info] i  functions[newUserSetup]: function ignored because the auth emulator does not exist or is not running.
[info] i  functions[cleanupUser]: function ignored because the auth emulator does not exist or is not running.
[info] ✔  emulators: All emulators started, it is now safe to connect.
[debug] [2020-04-23T21:24:45.868Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:24:46.869Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:24:46.869Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: FINISHING 
[debug] [2020-04-23T21:24:46.873Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:24:46.874Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:24:46.874Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:24:46.874Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70276.sock 
[debug] [2020-04-23T21:24:46.874Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: BUSY 
[debug] [2020-04-23T21:24:46.877Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: exited 
[debug] [2020-04-23T21:24:46.877Z] [worker-~diagnostic~-681cef08-0ede-430e-89e7-620c0924e46c]: FINISHED 
[debug] [2020-04-23T21:24:47.355Z] [runtime-status] [70276] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:24:47.357Z] [runtime-status] [70276] Disabled runtime features: undefined 
[debug] [2020-04-23T21:24:47.358Z] [runtime-status] [70276] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:24:47.359Z] [runtime-status] [70276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:24:47.361Z] [runtime-status] [70276] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:24:47.407Z] [runtime-status] [70276] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:24:47.408Z] [runtime-status] [70276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:24:47.409Z] [runtime-status] [70276] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:24:47.409Z] [runtime-status] [70276] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:24:47.409Z] [runtime-status] [70276] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:24:47.413Z] [runtime-status] [70276] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:24:47.729Z] [runtime-status] [70276] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:24:47.780Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: IDLE 
[debug] [2020-04-23T21:25:10.860Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:25:10.861Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:25:10.861Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:25:10.862Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:25:10.865Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:25:10.865Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:25:10.865Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:25:10.866Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70289.sock 
[debug] [2020-04-23T21:25:10.866Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: BUSY 
[debug] [2020-04-23T21:25:11.289Z] [runtime-status] [70289] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:25:11.291Z] [runtime-status] [70289] Disabled runtime features: undefined 
[debug] [2020-04-23T21:25:11.292Z] [runtime-status] [70289] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:11.293Z] [runtime-status] [70289] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:11.295Z] [runtime-status] [70289] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:25:11.346Z] [runtime-status] [70289] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:25:11.347Z] [runtime-status] [70289] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:11.348Z] [runtime-status] [70289] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:11.348Z] [runtime-status] [70289] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:11.348Z] [runtime-status] [70289] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:25:11.352Z] [runtime-status] [70289] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:25:11.710Z] [runtime-status] [70289] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:25:11.759Z] [runtime-status] [70289] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:25:11.760Z] [runtime-status] [70289] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:25:11.760Z] [runtime-status] [70289] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:25:11.763Z] [runtime-status] [70289] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70289.sock 
[debug] [2020-04-23T21:25:11.766Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:25:11.771Z] [runtime-status] [70289] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:25:11.774Z] [runtime-status] [70289] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:25:11.776Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: IDLE 
[debug] [2020-04-23T21:25:11.776Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:25:11.777Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:25:11.777Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:25:11.777Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:25:11.777Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:25:11.778Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:25:11.778Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70289.sock 
[debug] [2020-04-23T21:25:11.778Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: BUSY 
[debug] [2020-04-23T21:25:11.789Z] [runtime-status] [70289] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:25:11.790Z] [runtime-status] [70289] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:25:11.790Z] [runtime-status] [70289] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:25:11.790Z] [runtime-status] [70289] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70289.sock 
[debug] [2020-04-23T21:25:11.792Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:25:11.814Z] [runtime-status] [70289] Ephemeral server handling POST request 
[debug] [2020-04-23T21:25:11.815Z] [runtime-status] [70289] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:25:11.818Z] [runtime-status] [70289] Ephemeral server survived. 
[debug] [2020-04-23T21:25:11.923Z] Apr 24, 2020 12:25:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:25:12.015Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: IDLE 
[debug] [2020-04-23T21:25:12.015Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:25:24.967Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.967Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:25:24.968Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.968Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:25:24.968Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.968Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:25:24.969Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:25:25.972Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:25:25.972Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: FINISHING 
[debug] [2020-04-23T21:25:25.972Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:25:25.973Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: FINISHING 
[debug] [2020-04-23T21:25:25.978Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:25:25.978Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:25:25.978Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:25:25.979Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70296.sock 
[debug] [2020-04-23T21:25:25.979Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: BUSY 
[debug] [2020-04-23T21:25:25.982Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: exited 
[debug] [2020-04-23T21:25:25.982Z] [worker-~diagnostic~-33c8c785-774c-4f61-a636-96a5f1219aa3]: FINISHED 
[debug] [2020-04-23T21:25:25.982Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: exited 
[debug] [2020-04-23T21:25:25.982Z] [worker-stripeAttachSource-2c942e1c-29e8-4407-ab1f-1be7229514cc]: FINISHED 
[debug] [2020-04-23T21:25:26.363Z] [runtime-status] [70296] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:25:26.364Z] [runtime-status] [70296] Disabled runtime features: undefined 
[debug] [2020-04-23T21:25:26.366Z] [runtime-status] [70296] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:26.367Z] [runtime-status] [70296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.368Z] [runtime-status] [70296] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:25:26.413Z] [runtime-status] [70296] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:25:26.414Z] [runtime-status] [70296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.414Z] [runtime-status] [70296] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:26.415Z] [runtime-status] [70296] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.416Z] [runtime-status] [70296] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:25:26.417Z] [runtime-status] [70296] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:25:26.676Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:25:26.676Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:25:26.677Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:25:26.677Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:25:26.677Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T21:25:26.680Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:25:26.680Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:25:26.680Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:25:26.681Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70299.sock 
[debug] [2020-04-23T21:25:26.681Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: BUSY 
[debug] [2020-04-23T21:25:26.758Z] [runtime-status] [70296] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:25:26.801Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: IDLE 
[debug] [2020-04-23T21:25:26.889Z] [runtime-status] [70299] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:25:26.890Z] [runtime-status] [70299] Disabled runtime features: undefined 
[debug] [2020-04-23T21:25:26.892Z] [runtime-status] [70299] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:26.893Z] [runtime-status] [70299] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.894Z] [runtime-status] [70299] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:25:26.920Z] [runtime-status] [70299] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:25:26.921Z] [runtime-status] [70299] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.922Z] [runtime-status] [70299] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:25:26.922Z] [runtime-status] [70299] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:25:26.922Z] [runtime-status] [70299] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:25:26.924Z] [runtime-status] [70299] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:25:27.060Z] [runtime-status] [70299] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:25:27.081Z] [runtime-status] [70299] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:25:27.082Z] [runtime-status] [70299] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:25:27.082Z] [runtime-status] [70299] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:25:27.083Z] [runtime-status] [70299] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70299.sock 
[debug] [2020-04-23T21:25:27.085Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:25:27.090Z] [runtime-status] [70299] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:25:27.093Z] [runtime-status] [70299] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:25:27.094Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: IDLE 
[debug] [2020-04-23T21:25:27.094Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:25:27.095Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:25:27.095Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:25:27.095Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:25:27.095Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:25:27.095Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:25:27.095Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70299.sock 
[debug] [2020-04-23T21:25:27.095Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: BUSY 
[debug] [2020-04-23T21:25:27.106Z] [runtime-status] [70299] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:25:27.107Z] [runtime-status] [70299] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:25:27.107Z] [runtime-status] [70299] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:25:27.107Z] [runtime-status] [70299] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70299.sock 
[debug] [2020-04-23T21:25:27.108Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:25:27.126Z] [runtime-status] [70299] Ephemeral server handling POST request 
[debug] [2020-04-23T21:25:27.128Z] [runtime-status] [70299] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:25:27.207Z] [runtime-status] [70299] Ephemeral server survived. 
[debug] [2020-04-23T21:25:27.228Z] Apr 24, 2020 12:25:27 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:25:27.346Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: IDLE 
[debug] [2020-04-23T21:25:27.346Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:27:08.500Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:27:09.500Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:27:09.500Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: FINISHING 
[debug] [2020-04-23T21:27:09.500Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:27:09.500Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: FINISHING 
[debug] [2020-04-23T21:27:09.504Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:27:09.504Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:27:09.505Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:27:09.505Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70433.sock 
[debug] [2020-04-23T21:27:09.505Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: BUSY 
[debug] [2020-04-23T21:27:09.508Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: exited 
[debug] [2020-04-23T21:27:09.508Z] [worker-~diagnostic~-a657a06b-7196-4842-a11d-af87dd5e51b9]: FINISHED 
[debug] [2020-04-23T21:27:09.509Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: exited 
[debug] [2020-04-23T21:27:09.509Z] [worker-stripeAttachSource-b7decd2b-d3c1-416a-b78e-ab02c31fcf30]: FINISHED 
[debug] [2020-04-23T21:27:09.892Z] [runtime-status] [70433] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:27:09.893Z] [runtime-status] [70433] Disabled runtime features: undefined 
[debug] [2020-04-23T21:27:09.895Z] [runtime-status] [70433] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:09.899Z] [runtime-status] [70433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:09.901Z] [runtime-status] [70433] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:27:09.949Z] [runtime-status] [70433] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:27:09.949Z] [runtime-status] [70433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:09.950Z] [runtime-status] [70433] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:09.950Z] [runtime-status] [70433] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:09.951Z] [runtime-status] [70433] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:27:09.954Z] [runtime-status] [70433] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:27:10.320Z] [runtime-status] [70433] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:27:10.373Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: IDLE 
[debug] [2020-04-23T21:27:14.719Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.719Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.720Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:27:14.721Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:27:14.721Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:27:15.724Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:27:15.724Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: FINISHING 
[debug] [2020-04-23T21:27:15.724Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:27:15.724Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T21:27:15.731Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:27:15.731Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:27:15.731Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:27:15.732Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70447.sock 
[debug] [2020-04-23T21:27:15.732Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: BUSY 
[debug] [2020-04-23T21:27:15.733Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: exited 
[debug] [2020-04-23T21:27:15.733Z] [worker-~diagnostic~-350d5048-343e-40ea-85d7-8db15c367855]: FINISHED 
[debug] [2020-04-23T21:27:15.945Z] [runtime-status] [70447] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:27:15.946Z] [runtime-status] [70447] Disabled runtime features: undefined 
[debug] [2020-04-23T21:27:15.948Z] [runtime-status] [70447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:15.949Z] [runtime-status] [70447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:15.950Z] [runtime-status] [70447] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:27:15.972Z] [runtime-status] [70447] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:27:15.973Z] [runtime-status] [70447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:15.973Z] [runtime-status] [70447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:15.973Z] [runtime-status] [70447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:15.974Z] [runtime-status] [70447] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:27:15.976Z] [runtime-status] [70447] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:27:16.111Z] [runtime-status] [70447] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:27:16.129Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: IDLE 
[debug] [2020-04-23T21:27:21.777Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:27:21.778Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:27:21.778Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:27:21.778Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:27:21.781Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:27:21.781Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:27:21.781Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:27:21.782Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70456.sock 
[debug] [2020-04-23T21:27:21.782Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: BUSY 
[debug] [2020-04-23T21:27:21.989Z] [runtime-status] [70456] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:27:21.990Z] [runtime-status] [70456] Disabled runtime features: undefined 
[debug] [2020-04-23T21:27:21.991Z] [runtime-status] [70456] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:21.992Z] [runtime-status] [70456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:21.994Z] [runtime-status] [70456] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:27:22.015Z] [runtime-status] [70456] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:27:22.015Z] [runtime-status] [70456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:22.016Z] [runtime-status] [70456] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:27:22.016Z] [runtime-status] [70456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:27:22.016Z] [runtime-status] [70456] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:27:22.017Z] [runtime-status] [70456] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:27:22.144Z] [runtime-status] [70456] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:27:22.164Z] [runtime-status] [70456] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:27:22.164Z] [runtime-status] [70456] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:27:22.164Z] [runtime-status] [70456] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:27:22.167Z] [runtime-status] [70456] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70456.sock 
[debug] [2020-04-23T21:27:22.170Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:27:22.175Z] [runtime-status] [70456] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:27:22.178Z] [runtime-status] [70456] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:27:22.179Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: IDLE 
[debug] [2020-04-23T21:27:22.180Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:27:22.180Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:27:22.180Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:27:22.180Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:27:22.180Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:27:22.180Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:27:22.180Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70456.sock 
[debug] [2020-04-23T21:27:22.181Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: BUSY 
[debug] [2020-04-23T21:27:22.190Z] [runtime-status] [70456] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:27:22.190Z] [runtime-status] [70456] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:27:22.190Z] [runtime-status] [70456] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:27:22.191Z] [runtime-status] [70456] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70456.sock 
[debug] [2020-04-23T21:27:22.192Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:27:22.209Z] [runtime-status] [70456] Ephemeral server handling POST request 
[debug] [2020-04-23T21:27:22.210Z] [runtime-status] [70456] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:27:22.289Z] [runtime-status] [70456] Ephemeral server survived. 
[debug] [2020-04-23T21:27:22.312Z] Apr 24, 2020 12:27:22 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:27:22.357Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: IDLE 
[debug] [2020-04-23T21:27:22.357Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:28:49.562Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:28:50.567Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:28:50.567Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: FINISHING 
[debug] [2020-04-23T21:28:50.567Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:28:50.567Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: FINISHING 
[debug] [2020-04-23T21:28:50.572Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:28:50.572Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:28:50.572Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:28:50.572Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70515.sock 
[debug] [2020-04-23T21:28:50.572Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: BUSY 
[debug] [2020-04-23T21:28:50.574Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: exited 
[debug] [2020-04-23T21:28:50.574Z] [worker-stripeAttachSource-66beecfc-6188-4b32-91b6-193fdc9563c8]: FINISHED 
[debug] [2020-04-23T21:28:50.574Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: exited 
[debug] [2020-04-23T21:28:50.574Z] [worker-~diagnostic~-a66af607-d3f2-4ff9-97b4-f23c893d193b]: FINISHED 
[debug] [2020-04-23T21:28:50.959Z] [runtime-status] [70515] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:28:50.961Z] [runtime-status] [70515] Disabled runtime features: undefined 
[debug] [2020-04-23T21:28:50.963Z] [runtime-status] [70515] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:50.964Z] [runtime-status] [70515] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:50.966Z] [runtime-status] [70515] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:28:51.018Z] [runtime-status] [70515] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:28:51.019Z] [runtime-status] [70515] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:51.020Z] [runtime-status] [70515] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:51.020Z] [runtime-status] [70515] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:51.020Z] [runtime-status] [70515] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:28:51.023Z] [runtime-status] [70515] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:28:51.383Z] [runtime-status] [70515] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:28:51.434Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: IDLE 
[debug] [2020-04-23T21:28:54.899Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.899Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:28:54.899Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.899Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:28:54.899Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:28:54.900Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:28:55.904Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:28:55.904Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: FINISHING 
[debug] [2020-04-23T21:28:55.904Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:28:55.904Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T21:28:55.908Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:28:55.908Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:28:55.909Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:28:55.909Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70530.sock 
[debug] [2020-04-23T21:28:55.909Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: BUSY 
[debug] [2020-04-23T21:28:55.910Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: exited 
[debug] [2020-04-23T21:28:55.910Z] [worker-~diagnostic~-148e775e-7f84-4471-8188-7c36d62157c6]: FINISHED 
[debug] [2020-04-23T21:28:56.154Z] [runtime-status] [70530] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:28:56.156Z] [runtime-status] [70530] Disabled runtime features: undefined 
[debug] [2020-04-23T21:28:56.158Z] [runtime-status] [70530] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:56.159Z] [runtime-status] [70530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:56.161Z] [runtime-status] [70530] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:28:56.186Z] [runtime-status] [70530] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:28:56.187Z] [runtime-status] [70530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:56.187Z] [runtime-status] [70530] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:56.188Z] [runtime-status] [70530] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:56.188Z] [runtime-status] [70530] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:28:56.189Z] [runtime-status] [70530] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:28:56.335Z] [runtime-status] [70530] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:28:56.356Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: IDLE 
[debug] [2020-04-23T21:28:59.673Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:28:59.673Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:28:59.673Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:28:59.674Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:28:59.677Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:28:59.677Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:28:59.677Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:28:59.677Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70541.sock 
[debug] [2020-04-23T21:28:59.677Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: BUSY 
[debug] [2020-04-23T21:28:59.902Z] [runtime-status] [70541] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:28:59.903Z] [runtime-status] [70541] Disabled runtime features: undefined 
[debug] [2020-04-23T21:28:59.904Z] [runtime-status] [70541] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:59.905Z] [runtime-status] [70541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:59.906Z] [runtime-status] [70541] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:28:59.928Z] [runtime-status] [70541] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:28:59.928Z] [runtime-status] [70541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:59.929Z] [runtime-status] [70541] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:28:59.929Z] [runtime-status] [70541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:28:59.929Z] [runtime-status] [70541] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:28:59.931Z] [runtime-status] [70541] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:00.063Z] [runtime-status] [70541] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:00.089Z] [runtime-status] [70541] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:29:00.089Z] [runtime-status] [70541] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:29:00.089Z] [runtime-status] [70541] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:29:00.092Z] [runtime-status] [70541] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70541.sock 
[debug] [2020-04-23T21:29:00.096Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:29:00.100Z] [runtime-status] [70541] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:29:00.104Z] [runtime-status] [70541] Ephemeral server survived. 
[debug] [2020-04-23T21:29:00.106Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T21:29:00.106Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T21:29:00.106Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:29:00.106Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:29:00.109Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:29:00.109Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T21:29:00.109Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:29:00.110Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70542.sock 
[debug] [2020-04-23T21:29:00.110Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: BUSY 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:29:00.110Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: IDLE 
[debug] [2020-04-23T21:29:00.110Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:29:00.311Z] [runtime-status] [70542] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:29:00.313Z] [runtime-status] [70542] Disabled runtime features: undefined 
[debug] [2020-04-23T21:29:00.315Z] [runtime-status] [70542] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:00.315Z] [runtime-status] [70542] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:00.317Z] [runtime-status] [70542] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:29:00.339Z] [runtime-status] [70542] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:29:00.339Z] [runtime-status] [70542] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:00.340Z] [runtime-status] [70542] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:00.340Z] [runtime-status] [70542] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:00.340Z] [runtime-status] [70542] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:29:00.342Z] [runtime-status] [70542] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:00.477Z] [runtime-status] [70542] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:00.497Z] [runtime-status] [70542] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:29:00.497Z] [runtime-status] [70542] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:29:00.497Z] [runtime-status] [70542] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:29:00.499Z] [runtime-status] [70542] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70542.sock 
[debug] [2020-04-23T21:29:00.502Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:29:00.519Z] [runtime-status] [70542] Ephemeral server handling POST request 
[debug] [2020-04-23T21:29:00.520Z] [runtime-status] [70542] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:29:00.596Z] [runtime-status] [70542] Ephemeral server survived. 
[debug] [2020-04-23T21:29:00.618Z] Apr 24, 2020 12:29:00 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:29:00.649Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: IDLE 
[debug] [2020-04-23T21:29:00.650Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:29:29.067Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:29:30.069Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:29:30.069Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: FINISHING 
[debug] [2020-04-23T21:29:30.070Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:29:30.070Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: FINISHING 
[debug] [2020-04-23T21:29:30.070Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:29:30.070Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: FINISHING 
[debug] [2020-04-23T21:29:30.073Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:29:30.074Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:29:30.074Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:29:30.074Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70581.sock 
[debug] [2020-04-23T21:29:30.074Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: BUSY 
[debug] [2020-04-23T21:29:30.077Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: exited 
[debug] [2020-04-23T21:29:30.077Z] [worker-~diagnostic~-861292a6-ef26-455d-a075-98c6cdd5ffb6]: FINISHED 
[debug] [2020-04-23T21:29:30.077Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: exited 
[debug] [2020-04-23T21:29:30.077Z] [worker-stripeAttachSource-f9ccb81d-695b-44d9-8702-af3efa11c0b2]: FINISHED 
[debug] [2020-04-23T21:29:30.077Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: exited 
[debug] [2020-04-23T21:29:30.077Z] [worker-stripeAttachSource-10f6c1d2-061a-4d23-bac4-73d1c5154725]: FINISHED 
[debug] [2020-04-23T21:29:30.298Z] [runtime-status] [70581] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:29:30.299Z] [runtime-status] [70581] Disabled runtime features: undefined 
[debug] [2020-04-23T21:29:30.301Z] [runtime-status] [70581] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:30.301Z] [runtime-status] [70581] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:30.303Z] [runtime-status] [70581] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:29:30.327Z] [runtime-status] [70581] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:29:30.327Z] [runtime-status] [70581] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:30.328Z] [runtime-status] [70581] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:30.328Z] [runtime-status] [70581] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:30.329Z] [runtime-status] [70581] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:29:30.330Z] [runtime-status] [70581] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:30.477Z] [runtime-status] [70581] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:30.506Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: IDLE 
[debug] [2020-04-23T21:29:35.628Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.628Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:29:35.629Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.630Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:29:35.630Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:29:35.630Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:29:36.631Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:29:36.631Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: FINISHING 
[debug] [2020-04-23T21:29:36.631Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:29:36.631Z] [worker-pool] Cleaned up workers for stripeAttachSource: 2 --> 0 
[debug] [2020-04-23T21:29:36.634Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:29:36.634Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:29:36.635Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:29:36.635Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70595.sock 
[debug] [2020-04-23T21:29:36.635Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: BUSY 
[debug] [2020-04-23T21:29:36.636Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: exited 
[debug] [2020-04-23T21:29:36.638Z] [worker-~diagnostic~-efddd2fc-829d-433b-989d-3db87c77f489]: FINISHED 
[debug] [2020-04-23T21:29:36.839Z] [runtime-status] [70595] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:29:36.841Z] [runtime-status] [70595] Disabled runtime features: undefined 
[debug] [2020-04-23T21:29:36.842Z] [runtime-status] [70595] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:36.843Z] [runtime-status] [70595] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:36.844Z] [runtime-status] [70595] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:29:36.869Z] [runtime-status] [70595] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:29:36.869Z] [runtime-status] [70595] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:36.870Z] [runtime-status] [70595] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:36.870Z] [runtime-status] [70595] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:36.871Z] [runtime-status] [70595] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:29:36.872Z] [runtime-status] [70595] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:37.005Z] [runtime-status] [70595] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:37.028Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: IDLE 
[debug] [2020-04-23T21:29:44.726Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:29:44.726Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:29:44.726Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:29:44.726Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:29:44.730Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:29:44.730Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:29:44.730Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:29:44.731Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70596.sock 
[debug] [2020-04-23T21:29:44.731Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: BUSY 
[debug] [2020-04-23T21:29:44.934Z] [runtime-status] [70596] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:29:44.936Z] [runtime-status] [70596] Disabled runtime features: undefined 
[debug] [2020-04-23T21:29:44.937Z] [runtime-status] [70596] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:44.938Z] [runtime-status] [70596] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:44.939Z] [runtime-status] [70596] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:29:44.962Z] [runtime-status] [70596] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:29:44.962Z] [runtime-status] [70596] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:44.963Z] [runtime-status] [70596] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:44.963Z] [runtime-status] [70596] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:44.963Z] [runtime-status] [70596] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:29:44.964Z] [runtime-status] [70596] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:45.092Z] [runtime-status] [70596] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:45.110Z] [runtime-status] [70596] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:29:45.110Z] [runtime-status] [70596] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:29:45.110Z] [runtime-status] [70596] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:29:45.113Z] [runtime-status] [70596] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70596.sock 
[debug] [2020-04-23T21:29:45.116Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:29:45.120Z] [runtime-status] [70596] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:29:45.123Z] [runtime-status] [70596] Ephemeral server survived. 
[debug] [2020-04-23T21:29:45.125Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T21:29:45.125Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T21:29:45.125Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:29:45.125Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:29:45.128Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:29:45.128Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T21:29:45.128Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:29:45.128Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70597.sock 
[debug] [2020-04-23T21:29:45.128Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: BUSY 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:29:45.129Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: IDLE 
[debug] [2020-04-23T21:29:45.129Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:29:45.325Z] [runtime-status] [70597] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:29:45.326Z] [runtime-status] [70597] Disabled runtime features: undefined 
[debug] [2020-04-23T21:29:45.327Z] [runtime-status] [70597] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:45.328Z] [runtime-status] [70597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:45.330Z] [runtime-status] [70597] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:29:45.352Z] [runtime-status] [70597] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:29:45.353Z] [runtime-status] [70597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:45.353Z] [runtime-status] [70597] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:29:45.354Z] [runtime-status] [70597] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:29:45.354Z] [runtime-status] [70597] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:29:45.355Z] [runtime-status] [70597] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:29:45.482Z] [runtime-status] [70597] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:29:45.500Z] [runtime-status] [70597] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:29:45.501Z] [runtime-status] [70597] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:29:45.501Z] [runtime-status] [70597] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:29:45.503Z] [runtime-status] [70597] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70597.sock 
[debug] [2020-04-23T21:29:45.506Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:29:45.517Z] [runtime-status] [70597] Ephemeral server handling POST request 
[debug] [2020-04-23T21:29:45.519Z] [runtime-status] [70597] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:29:45.587Z] [runtime-status] [70597] Ephemeral server survived. 
[debug] [2020-04-23T21:29:45.609Z] Apr 24, 2020 12:29:45 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:29:45.639Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: IDLE 
[debug] [2020-04-23T21:29:45.639Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:30:35.615Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:30:36.620Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:30:36.620Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: FINISHING 
[debug] [2020-04-23T21:30:36.620Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:30:36.620Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: FINISHING 
[debug] [2020-04-23T21:30:36.621Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:30:36.621Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: FINISHING 
[debug] [2020-04-23T21:30:36.627Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:30:36.627Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:30:36.627Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:30:36.627Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70635.sock 
[debug] [2020-04-23T21:30:36.627Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: BUSY 
[debug] [2020-04-23T21:30:36.628Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: exited 
[debug] [2020-04-23T21:30:36.628Z] [worker-stripeAttachSource-67a91fe9-0f93-4e3d-8730-e30ca8f03ebe]: FINISHED 
[debug] [2020-04-23T21:30:36.629Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: exited 
[debug] [2020-04-23T21:30:36.629Z] [worker-~diagnostic~-845fb077-7e98-4999-a57b-bde45891475e]: FINISHED 
[debug] [2020-04-23T21:30:36.629Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: exited 
[debug] [2020-04-23T21:30:36.630Z] [worker-stripeAttachSource-421b9597-08c3-4fde-a8de-a79d012f8b97]: FINISHED 
[debug] [2020-04-23T21:30:36.844Z] [runtime-status] [70635] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:30:36.845Z] [runtime-status] [70635] Disabled runtime features: undefined 
[debug] [2020-04-23T21:30:36.847Z] [runtime-status] [70635] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:36.847Z] [runtime-status] [70635] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:36.849Z] [runtime-status] [70635] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:30:36.871Z] [runtime-status] [70635] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:30:36.871Z] [runtime-status] [70635] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:36.872Z] [runtime-status] [70635] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:36.872Z] [runtime-status] [70635] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:36.872Z] [runtime-status] [70635] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:30:36.874Z] [runtime-status] [70635] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:30:37.010Z] [runtime-status] [70635] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:30:37.031Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: IDLE 
[debug] [2020-04-23T21:30:40.383Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.384Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:30:40.385Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.385Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:30:40.385Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:30:40.385Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:30:41.386Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:30:41.387Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: FINISHING 
[debug] [2020-04-23T21:30:41.387Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:30:41.387Z] [worker-pool] Cleaned up workers for stripeAttachSource: 2 --> 0 
[debug] [2020-04-23T21:30:41.391Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:30:41.391Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:30:41.391Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:30:41.391Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70649.sock 
[debug] [2020-04-23T21:30:41.392Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: BUSY 
[debug] [2020-04-23T21:30:41.393Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: exited 
[debug] [2020-04-23T21:30:41.393Z] [worker-~diagnostic~-e54500b2-aa94-496d-b53d-16a7e500c3d2]: FINISHED 
[debug] [2020-04-23T21:30:41.433Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:30:41.433Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:30:41.433Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:30:41.433Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:30:41.437Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:30:41.437Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:30:41.438Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:30:41.438Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70650.sock 
[debug] [2020-04-23T21:30:41.438Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: BUSY 
[debug] [2020-04-23T21:30:41.616Z] [runtime-status] [70649] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:30:41.618Z] [runtime-status] [70649] Disabled runtime features: undefined 
[debug] [2020-04-23T21:30:41.619Z] [runtime-status] [70649] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:41.620Z] [runtime-status] [70649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.622Z] [runtime-status] [70649] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:30:41.647Z] [runtime-status] [70649] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:30:41.648Z] [runtime-status] [70649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.648Z] [runtime-status] [70649] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:41.649Z] [runtime-status] [70649] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.649Z] [runtime-status] [70649] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:30:41.650Z] [runtime-status] [70649] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:30:41.655Z] [runtime-status] [70650] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:30:41.657Z] [runtime-status] [70650] Disabled runtime features: undefined 
[debug] [2020-04-23T21:30:41.658Z] [runtime-status] [70650] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:41.659Z] [runtime-status] [70650] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.661Z] [runtime-status] [70650] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:30:41.684Z] [runtime-status] [70650] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:30:41.685Z] [runtime-status] [70650] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.685Z] [runtime-status] [70650] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:30:41.685Z] [runtime-status] [70650] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:30:41.685Z] [runtime-status] [70650] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:30:41.687Z] [runtime-status] [70650] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:30:41.783Z] [runtime-status] [70649] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:30:41.802Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: IDLE 
[debug] [2020-04-23T21:30:41.816Z] [runtime-status] [70650] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:30:41.834Z] [runtime-status] [70650] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:30:41.834Z] [runtime-status] [70650] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:30:41.835Z] [runtime-status] [70650] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:30:41.837Z] [runtime-status] [70650] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70650.sock 
[debug] [2020-04-23T21:30:41.840Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:30:41.844Z] [runtime-status] [70650] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:30:41.847Z] [runtime-status] [70650] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:30:41.849Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: IDLE 
[debug] [2020-04-23T21:30:41.849Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:30:41.849Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:30:41.849Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:30:41.849Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:30:41.849Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:30:41.850Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:30:41.850Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70650.sock 
[debug] [2020-04-23T21:30:41.850Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: BUSY 
[debug] [2020-04-23T21:30:41.860Z] [runtime-status] [70650] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:30:41.861Z] [runtime-status] [70650] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:30:41.861Z] [runtime-status] [70650] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:30:41.861Z] [runtime-status] [70650] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70650.sock 
[debug] [2020-04-23T21:30:41.862Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:30:41.872Z] [runtime-status] [70650] Ephemeral server handling POST request 
[debug] [2020-04-23T21:30:41.873Z] [runtime-status] [70650] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:30:41.943Z] [runtime-status] [70650] Ephemeral server survived. 
[debug] [2020-04-23T21:30:41.965Z] Apr 24, 2020 12:30:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:30:42.000Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: IDLE 
[debug] [2020-04-23T21:30:42.000Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:39:52.607Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T21:39:53.608Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:39:53.608Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: FINISHING 
[debug] [2020-04-23T21:39:53.608Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T21:39:53.608Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: FINISHING 
[debug] [2020-04-23T21:39:53.612Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:39:53.612Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:39:53.612Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:39:53.612Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70875.sock 
[debug] [2020-04-23T21:39:53.612Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: BUSY 
[debug] [2020-04-23T21:39:53.615Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: exited 
[debug] [2020-04-23T21:39:53.615Z] [worker-~diagnostic~-e94aefc7-d616-4033-9790-d94c5e47f526]: FINISHED 
[debug] [2020-04-23T21:39:53.615Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: exited 
[debug] [2020-04-23T21:39:53.615Z] [worker-stripeAttachSource-2258648a-9243-4e05-9cec-e190de401551]: FINISHED 
[debug] [2020-04-23T21:39:54.077Z] [runtime-status] [70875] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:39:54.078Z] [runtime-status] [70875] Disabled runtime features: undefined 
[debug] [2020-04-23T21:39:54.080Z] [runtime-status] [70875] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:39:54.081Z] [runtime-status] [70875] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:54.083Z] [runtime-status] [70875] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:39:54.140Z] [runtime-status] [70875] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:39:54.140Z] [runtime-status] [70875] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:54.141Z] [runtime-status] [70875] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:39:54.142Z] [runtime-status] [70875] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:54.142Z] [runtime-status] [70875] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:39:54.145Z] [runtime-status] [70875] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:39:54.515Z] [runtime-status] [70875] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:39:54.577Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: IDLE 
[debug] [2020-04-23T21:39:57.868Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.868Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T21:39:57.868Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.868Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.969Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T21:39:57.970Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T21:39:57.970Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T21:39:58.974Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T21:39:58.974Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: FINISHING 
[debug] [2020-04-23T21:39:58.974Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:39:58.974Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T21:39:58.978Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T21:39:58.978Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T21:39:58.978Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T21:39:58.979Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70889.sock 
[debug] [2020-04-23T21:39:58.979Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: BUSY 
[debug] [2020-04-23T21:39:58.980Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: exited 
[debug] [2020-04-23T21:39:58.980Z] [worker-~diagnostic~-a365411a-3120-4934-a296-3813209abc5f]: FINISHED 
[debug] [2020-04-23T21:39:59.201Z] [runtime-status] [70889] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:39:59.202Z] [runtime-status] [70889] Disabled runtime features: undefined 
[debug] [2020-04-23T21:39:59.204Z] [runtime-status] [70889] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:39:59.205Z] [runtime-status] [70889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:59.208Z] [runtime-status] [70889] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:39:59.234Z] [runtime-status] [70889] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:39:59.234Z] [runtime-status] [70889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:59.235Z] [runtime-status] [70889] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:39:59.235Z] [runtime-status] [70889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:39:59.235Z] [runtime-status] [70889] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:39:59.237Z] [runtime-status] [70889] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:39:59.399Z] [runtime-status] [70889] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:39:59.423Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: IDLE 
[debug] [2020-04-23T21:40:03.832Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:40:03.832Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:40:03.832Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:40:03.832Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T21:40:03.835Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T21:40:03.835Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T21:40:03.835Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:40:03.836Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70894.sock 
[debug] [2020-04-23T21:40:03.836Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: BUSY 
[debug] [2020-04-23T21:40:04.044Z] [runtime-status] [70894] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T21:40:04.046Z] [runtime-status] [70894] Disabled runtime features: undefined 
[debug] [2020-04-23T21:40:04.047Z] [runtime-status] [70894] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:40:04.048Z] [runtime-status] [70894] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:40:04.050Z] [runtime-status] [70894] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T21:40:04.072Z] [runtime-status] [70894] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T21:40:04.073Z] [runtime-status] [70894] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:40:04.073Z] [runtime-status] [70894] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T21:40:04.074Z] [runtime-status] [70894] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T21:40:04.074Z] [runtime-status] [70894] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T21:40:04.075Z] [runtime-status] [70894] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T21:40:04.219Z] [runtime-status] [70894] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T21:40:04.241Z] [runtime-status] [70894] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:40:04.241Z] [runtime-status] [70894] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:40:04.241Z] [runtime-status] [70894] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:40:04.244Z] [runtime-status] [70894] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70894.sock 
[debug] [2020-04-23T21:40:04.248Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:40:04.253Z] [runtime-status] [70894] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T21:40:04.256Z] [runtime-status] [70894] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:40:04.258Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: IDLE 
[debug] [2020-04-23T21:40:04.258Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T21:40:04.258Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T21:40:04.259Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T21:40:04.259Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T21:40:04.259Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzQ3NzgsImV4cCI6MTU4NzY3ODM3OCwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.YS_WoGHrFgUoA0n0HD_LjNIE-M1PRIjY_vPek1fdSw_-a0BX2fqcpDaaxBCBBpq5FcoRo125dtNTumsYw8hM6bNZfZ1mUoGPWaOktb7ADBPcl78ORHq3gDXewVV-z4KF51pRSN7Vxqd2i3On9JbiVsyCe9TBEArwc1cCd3Qt3lcUvxKNRSZQyofyQUfW4jszjFzhh0EeopDa2ISLTFaPidR2fBqzhVjD1MQ04UQIEvC-K15lgs3w-x5Eu_Y2ZDEkZekWe1G2x0zAbcK9U8jY-qaGM1145EbtMftH80hNbWm6TLSSln6mxDoJubqDMAj_AjHW1n0hjphulGZz7C0gmQ
[debug] [2020-04-23T21:40:04.259Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T21:40:04.259Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70894.sock 
[debug] [2020-04-23T21:40:04.259Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: BUSY 
[debug] [2020-04-23T21:40:04.269Z] [runtime-status] [70894] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T21:40:04.269Z] [runtime-status] [70894] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T21:40:04.269Z] [runtime-status] [70894] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T21:40:04.270Z] [runtime-status] [70894] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_70894.sock 
[debug] [2020-04-23T21:40:04.271Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T21:40:04.287Z] [runtime-status] [70894] Ephemeral server handling POST request 
[debug] [2020-04-23T21:40:04.288Z] [runtime-status] [70894] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587674778,\"exp\":1587678378,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T21:40:04.290Z] [runtime-status] [70894] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T21:40:04.291Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: IDLE 
[debug] [2020-04-23T21:40:04.291Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:19:01.907Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:19:02.912Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:19:02.912Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: FINISHING 
[debug] [2020-04-23T22:19:02.912Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:19:02.912Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: FINISHING 
[debug] [2020-04-23T22:19:02.918Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:19:02.918Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:19:02.918Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:19:02.919Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_71981.sock 
[debug] [2020-04-23T22:19:02.919Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: BUSY 
[debug] [2020-04-23T22:19:02.920Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: exited 
[debug] [2020-04-23T22:19:02.920Z] [worker-~diagnostic~-7e4a7a73-8429-44e6-960c-21c8f7332def]: FINISHED 
[debug] [2020-04-23T22:19:02.921Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: exited 
[debug] [2020-04-23T22:19:02.921Z] [worker-stripeAttachSource-8a596531-860b-400b-be13-03d3b187d188]: FINISHED 
[debug] [2020-04-23T22:19:03.404Z] [runtime-status] [71981] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:19:03.405Z] [runtime-status] [71981] Disabled runtime features: undefined 
[debug] [2020-04-23T22:19:03.407Z] [runtime-status] [71981] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:03.408Z] [runtime-status] [71981] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:03.410Z] [runtime-status] [71981] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:19:03.466Z] [runtime-status] [71981] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:19:03.466Z] [runtime-status] [71981] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:03.467Z] [runtime-status] [71981] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:03.467Z] [runtime-status] [71981] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:03.468Z] [runtime-status] [71981] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:19:03.472Z] [runtime-status] [71981] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:19:03.851Z] [runtime-status] [71981] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:19:03.915Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: IDLE 
[debug] [2020-04-23T22:19:07.538Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.538Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:19:07.538Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:19:07.539Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:19:08.539Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:19:08.539Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: FINISHING 
[debug] [2020-04-23T22:19:08.540Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:19:08.540Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:19:08.544Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:19:08.544Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:19:08.544Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:19:08.545Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_71999.sock 
[debug] [2020-04-23T22:19:08.545Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: BUSY 
[debug] [2020-04-23T22:19:08.546Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: exited 
[debug] [2020-04-23T22:19:08.546Z] [worker-~diagnostic~-ccbb81f2-22bb-470f-baf2-d6adea475a3f]: FINISHED 
[debug] [2020-04-23T22:19:08.763Z] [runtime-status] [71999] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:19:08.764Z] [runtime-status] [71999] Disabled runtime features: undefined 
[debug] [2020-04-23T22:19:08.766Z] [runtime-status] [71999] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:08.766Z] [runtime-status] [71999] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:08.768Z] [runtime-status] [71999] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:19:08.793Z] [runtime-status] [71999] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:19:08.793Z] [runtime-status] [71999] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:08.794Z] [runtime-status] [71999] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:08.794Z] [runtime-status] [71999] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:08.794Z] [runtime-status] [71999] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:19:08.796Z] [runtime-status] [71999] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:19:08.922Z] [runtime-status] [71999] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:19:08.950Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: IDLE 
[debug] [2020-04-23T22:19:30.152Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:19:30.152Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:19:30.152Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:19:30.152Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:19:30.156Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:19:30.156Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:19:30.156Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:19:30.156Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72014.sock 
[debug] [2020-04-23T22:19:30.156Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: BUSY 
[debug] [2020-04-23T22:19:30.357Z] [runtime-status] [72014] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:19:30.358Z] [runtime-status] [72014] Disabled runtime features: undefined 
[debug] [2020-04-23T22:19:30.360Z] [runtime-status] [72014] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:30.361Z] [runtime-status] [72014] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:30.362Z] [runtime-status] [72014] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:19:30.384Z] [runtime-status] [72014] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:19:30.385Z] [runtime-status] [72014] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:30.385Z] [runtime-status] [72014] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:19:30.385Z] [runtime-status] [72014] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:19:30.386Z] [runtime-status] [72014] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:19:30.387Z] [runtime-status] [72014] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:19:30.515Z] [runtime-status] [72014] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:19:30.533Z] [runtime-status] [72014] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:19:30.533Z] [runtime-status] [72014] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:19:30.533Z] [runtime-status] [72014] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:19:30.536Z] [runtime-status] [72014] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72014.sock 
[debug] [2020-04-23T22:19:30.540Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:19:30.545Z] [runtime-status] [72014] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:19:30.548Z] [runtime-status] [72014] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:19:30.549Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: IDLE 
[debug] [2020-04-23T22:19:30.549Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:19:30.550Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:19:30.550Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:19:30.550Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:19:30.550Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzgxNTUsImV4cCI6MTU4NzY4MTc1NSwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.ej_39nRHNTUbusORKHReZWa66Bk2ugjOrH3Cs2dYDHluOoNa_eaqDLlHGG3fZ8I9L_NGHUAH4cFa62XrKiuwJ5MxrKtlClU7Fm6Ry0jogn_VKDM3GUQ_CiNe52_lf2Aum0fmsegI--jdTltLHHCC14JpRw-5lJnm39cRWAlCZvI2wv3ma4vi1WLYIHx_fJvbOYCgxt6zTFqqw2Mvlnj0mdJx6dwdsvrDThI8KXB5AWV0oXBeDr0FMICUiba58JXK-004X5ruApBgp-ToRz-967IVcdlLDbhtcQs9Zzq1zyJyitl6paSn-4h1aR-_QwvMNSR7pRcFSKXUZFe9D0i0Xw
[debug] [2020-04-23T22:19:30.551Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:19:30.551Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72014.sock 
[debug] [2020-04-23T22:19:30.551Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: BUSY 
[debug] [2020-04-23T22:19:30.561Z] [runtime-status] [72014] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:19:30.561Z] [runtime-status] [72014] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:19:30.561Z] [runtime-status] [72014] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:19:30.561Z] [runtime-status] [72014] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72014.sock 
[debug] [2020-04-23T22:19:30.564Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:19:30.582Z] [runtime-status] [72014] Ephemeral server handling POST request 
[debug] [2020-04-23T22:19:30.583Z] [runtime-status] [72014] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587678155,\"exp\":1587681755,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:19:30.664Z] [runtime-status] [72014] Ephemeral server survived. 
[debug] [2020-04-23T22:19:30.689Z] Apr 24, 2020 1:19:30 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:19:30.721Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: IDLE 
[debug] [2020-04-23T22:19:30.721Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:21:41.713Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:21:42.716Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:21:42.716Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: FINISHING 
[debug] [2020-04-23T22:21:42.717Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:21:42.717Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: FINISHING 
[debug] [2020-04-23T22:21:42.721Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:21:42.722Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:21:42.722Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:21:42.722Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72107.sock 
[debug] [2020-04-23T22:21:42.722Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: BUSY 
[debug] [2020-04-23T22:21:42.724Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: exited 
[debug] [2020-04-23T22:21:42.724Z] [worker-~diagnostic~-bfec6fce-1361-49ea-a3c9-4fff1c87cc38]: FINISHED 
[debug] [2020-04-23T22:21:42.724Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: exited 
[debug] [2020-04-23T22:21:42.724Z] [worker-stripeAttachSource-e4d52a5b-a885-49f4-9e50-d2997af4be67]: FINISHED 
[debug] [2020-04-23T22:21:42.936Z] [runtime-status] [72107] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:21:42.937Z] [runtime-status] [72107] Disabled runtime features: undefined 
[debug] [2020-04-23T22:21:42.939Z] [runtime-status] [72107] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:42.940Z] [runtime-status] [72107] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:42.941Z] [runtime-status] [72107] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:21:42.963Z] [runtime-status] [72107] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:21:42.963Z] [runtime-status] [72107] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:42.964Z] [runtime-status] [72107] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:42.964Z] [runtime-status] [72107] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:42.964Z] [runtime-status] [72107] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:21:42.965Z] [runtime-status] [72107] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:21:43.091Z] [runtime-status] [72107] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:21:43.110Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: IDLE 
[debug] [2020-04-23T22:21:45.901Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:45.902Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:21:45.902Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:45.902Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:21:46.001Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:21:46.002Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:21:47.006Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:21:47.007Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: FINISHING 
[debug] [2020-04-23T22:21:47.007Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:21:47.007Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:21:47.011Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:21:47.011Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:21:47.012Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:21:47.012Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72121.sock 
[debug] [2020-04-23T22:21:47.012Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: BUSY 
[debug] [2020-04-23T22:21:47.013Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: exited 
[debug] [2020-04-23T22:21:47.013Z] [worker-~diagnostic~-ffa886eb-2a60-460a-a889-335ee1845a5e]: FINISHED 
[debug] [2020-04-23T22:21:47.213Z] [runtime-status] [72121] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:21:47.214Z] [runtime-status] [72121] Disabled runtime features: undefined 
[debug] [2020-04-23T22:21:47.215Z] [runtime-status] [72121] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:47.216Z] [runtime-status] [72121] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:47.217Z] [runtime-status] [72121] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:21:47.238Z] [runtime-status] [72121] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:21:47.239Z] [runtime-status] [72121] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:47.239Z] [runtime-status] [72121] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:47.240Z] [runtime-status] [72121] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:47.240Z] [runtime-status] [72121] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:21:47.241Z] [runtime-status] [72121] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:21:47.365Z] [runtime-status] [72121] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:21:47.389Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: IDLE 
[debug] [2020-04-23T22:21:56.767Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:21:56.767Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:21:56.767Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:21:56.768Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:21:56.771Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:21:56.771Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:21:56.771Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:21:56.771Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72131.sock 
[debug] [2020-04-23T22:21:56.771Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: BUSY 
[debug] [2020-04-23T22:21:56.974Z] [runtime-status] [72131] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:21:56.976Z] [runtime-status] [72131] Disabled runtime features: undefined 
[debug] [2020-04-23T22:21:56.977Z] [runtime-status] [72131] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:56.978Z] [runtime-status] [72131] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:56.980Z] [runtime-status] [72131] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:21:57.001Z] [runtime-status] [72131] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:21:57.002Z] [runtime-status] [72131] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:57.004Z] [runtime-status] [72131] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:21:57.004Z] [runtime-status] [72131] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:21:57.004Z] [runtime-status] [72131] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:21:57.004Z] [runtime-status] [72131] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:21:57.131Z] [runtime-status] [72131] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:21:57.150Z] [runtime-status] [72131] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:21:57.151Z] [runtime-status] [72131] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:21:57.151Z] [runtime-status] [72131] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:21:57.153Z] [runtime-status] [72131] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72131.sock 
[debug] [2020-04-23T22:21:57.156Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:21:57.162Z] [runtime-status] [72131] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:21:57.165Z] [runtime-status] [72131] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:21:57.166Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: IDLE 
[debug] [2020-04-23T22:21:57.166Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:21:57.167Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:21:57.167Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:21:57.168Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:21:57.168Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzgxNTUsImV4cCI6MTU4NzY4MTc1NSwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.ej_39nRHNTUbusORKHReZWa66Bk2ugjOrH3Cs2dYDHluOoNa_eaqDLlHGG3fZ8I9L_NGHUAH4cFa62XrKiuwJ5MxrKtlClU7Fm6Ry0jogn_VKDM3GUQ_CiNe52_lf2Aum0fmsegI--jdTltLHHCC14JpRw-5lJnm39cRWAlCZvI2wv3ma4vi1WLYIHx_fJvbOYCgxt6zTFqqw2Mvlnj0mdJx6dwdsvrDThI8KXB5AWV0oXBeDr0FMICUiba58JXK-004X5ruApBgp-ToRz-967IVcdlLDbhtcQs9Zzq1zyJyitl6paSn-4h1aR-_QwvMNSR7pRcFSKXUZFe9D0i0Xw
[debug] [2020-04-23T22:21:57.168Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:21:57.168Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72131.sock 
[debug] [2020-04-23T22:21:57.168Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: BUSY 
[debug] [2020-04-23T22:21:57.178Z] [runtime-status] [72131] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:21:57.179Z] [runtime-status] [72131] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:21:57.179Z] [runtime-status] [72131] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:21:57.179Z] [runtime-status] [72131] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72131.sock 
[debug] [2020-04-23T22:21:57.180Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:21:57.190Z] [runtime-status] [72131] Ephemeral server handling POST request 
[debug] [2020-04-23T22:21:57.191Z] [runtime-status] [72131] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587678155,\"exp\":1587681755,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:21:57.263Z] [runtime-status] [72131] Ephemeral server survived. 
[debug] [2020-04-23T22:21:57.284Z] Apr 24, 2020 1:21:57 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:21:57.313Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: IDLE 
[debug] [2020-04-23T22:21:57.313Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:25:39.624Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:25:40.625Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:25:40.625Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: FINISHING 
[debug] [2020-04-23T22:25:40.625Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:25:40.625Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: FINISHING 
[debug] [2020-04-23T22:25:40.629Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:25:40.629Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:25:40.629Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:25:40.631Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72341.sock 
[debug] [2020-04-23T22:25:40.631Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: BUSY 
[debug] [2020-04-23T22:25:40.633Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: exited 
[debug] [2020-04-23T22:25:40.633Z] [worker-~diagnostic~-757d0cbc-e9f9-4ca5-b617-640ea86dd870]: FINISHED 
[debug] [2020-04-23T22:25:40.633Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: exited 
[debug] [2020-04-23T22:25:40.633Z] [worker-stripeAttachSource-a1db436c-8c0a-4d37-8a37-f8890f497ba2]: FINISHED 
[debug] [2020-04-23T22:25:40.991Z] [runtime-status] [72341] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:25:40.992Z] [runtime-status] [72341] Disabled runtime features: undefined 
[debug] [2020-04-23T22:25:40.994Z] [runtime-status] [72341] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:40.995Z] [runtime-status] [72341] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:40.996Z] [runtime-status] [72341] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:25:41.037Z] [runtime-status] [72341] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:25:41.038Z] [runtime-status] [72341] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:41.038Z] [runtime-status] [72341] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:41.039Z] [runtime-status] [72341] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:41.040Z] [runtime-status] [72341] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:25:41.041Z] [runtime-status] [72341] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:25:41.319Z] [runtime-status] [72341] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:25:41.370Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: IDLE 
[debug] [2020-04-23T22:25:45.791Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:25:45.891Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:25:46.892Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:25:46.892Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: FINISHING 
[debug] [2020-04-23T22:25:46.892Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:25:46.892Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:25:46.895Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:25:46.895Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:25:46.896Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:25:46.897Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72375.sock 
[debug] [2020-04-23T22:25:46.897Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: BUSY 
[debug] [2020-04-23T22:25:46.898Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: exited 
[debug] [2020-04-23T22:25:46.898Z] [worker-~diagnostic~-66d294e9-8016-420e-b453-9d95d1190fcf]: FINISHED 
[debug] [2020-04-23T22:25:47.118Z] [runtime-status] [72375] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:25:47.119Z] [runtime-status] [72375] Disabled runtime features: undefined 
[debug] [2020-04-23T22:25:47.120Z] [runtime-status] [72375] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:47.121Z] [runtime-status] [72375] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:47.123Z] [runtime-status] [72375] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:25:47.148Z] [runtime-status] [72375] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:25:47.148Z] [runtime-status] [72375] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:47.148Z] [runtime-status] [72375] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:47.153Z] [runtime-status] [72375] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:47.153Z] [runtime-status] [72375] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:25:47.153Z] [runtime-status] [72375] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:25:47.281Z] [runtime-status] [72375] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:25:47.302Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: IDLE 
[debug] [2020-04-23T22:25:51.298Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:25:51.299Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.300Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:25:51.300Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.300Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:25:51.300Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:25:51.300Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:25:52.300Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:25:52.301Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: FINISHING 
[debug] [2020-04-23T22:25:52.301Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:25:52.305Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:25:52.305Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:25:52.305Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:25:52.305Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72389.sock 
[debug] [2020-04-23T22:25:52.305Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: BUSY 
[debug] [2020-04-23T22:25:52.307Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: exited 
[debug] [2020-04-23T22:25:52.307Z] [worker-~diagnostic~-75f759f1-d66e-48bc-9fd4-3bdb960d1f5d]: FINISHED 
[debug] [2020-04-23T22:25:52.515Z] [runtime-status] [72389] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:25:52.517Z] [runtime-status] [72389] Disabled runtime features: undefined 
[debug] [2020-04-23T22:25:52.518Z] [runtime-status] [72389] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:52.519Z] [runtime-status] [72389] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:52.520Z] [runtime-status] [72389] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:25:52.542Z] [runtime-status] [72389] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:25:52.543Z] [runtime-status] [72389] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:52.543Z] [runtime-status] [72389] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:52.544Z] [runtime-status] [72389] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:52.549Z] [runtime-status] [72389] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:25:52.549Z] [runtime-status] [72389] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:25:52.672Z] [runtime-status] [72389] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:25:52.690Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: IDLE 
[debug] [2020-04-23T22:25:58.691Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:25:58.691Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:25:58.691Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:25:58.691Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:25:58.694Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:25:58.695Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:25:58.695Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:25:58.695Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72399.sock 
[debug] [2020-04-23T22:25:58.695Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: BUSY 
[debug] [2020-04-23T22:25:58.897Z] [runtime-status] [72399] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:25:58.899Z] [runtime-status] [72399] Disabled runtime features: undefined 
[debug] [2020-04-23T22:25:58.900Z] [runtime-status] [72399] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:58.901Z] [runtime-status] [72399] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:58.903Z] [runtime-status] [72399] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:25:58.924Z] [runtime-status] [72399] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:25:58.925Z] [runtime-status] [72399] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:58.925Z] [runtime-status] [72399] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:25:58.925Z] [runtime-status] [72399] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:25:58.926Z] [runtime-status] [72399] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:25:58.927Z] [runtime-status] [72399] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:25:59.051Z] [runtime-status] [72399] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:25:59.069Z] [runtime-status] [72399] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:25:59.069Z] [runtime-status] [72399] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:25:59.069Z] [runtime-status] [72399] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:25:59.071Z] [runtime-status] [72399] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72399.sock 
[debug] [2020-04-23T22:25:59.074Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:25:59.078Z] [runtime-status] [72399] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:25:59.081Z] [runtime-status] [72399] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:25:59.083Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: IDLE 
[debug] [2020-04-23T22:25:59.083Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:25:59.084Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:25:59.084Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:25:59.084Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:25:59.084Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzgxNTUsImV4cCI6MTU4NzY4MTc1NSwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.ej_39nRHNTUbusORKHReZWa66Bk2ugjOrH3Cs2dYDHluOoNa_eaqDLlHGG3fZ8I9L_NGHUAH4cFa62XrKiuwJ5MxrKtlClU7Fm6Ry0jogn_VKDM3GUQ_CiNe52_lf2Aum0fmsegI--jdTltLHHCC14JpRw-5lJnm39cRWAlCZvI2wv3ma4vi1WLYIHx_fJvbOYCgxt6zTFqqw2Mvlnj0mdJx6dwdsvrDThI8KXB5AWV0oXBeDr0FMICUiba58JXK-004X5ruApBgp-ToRz-967IVcdlLDbhtcQs9Zzq1zyJyitl6paSn-4h1aR-_QwvMNSR7pRcFSKXUZFe9D0i0Xw
[debug] [2020-04-23T22:25:59.084Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:25:59.084Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72399.sock 
[debug] [2020-04-23T22:25:59.084Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: BUSY 
[debug] [2020-04-23T22:25:59.093Z] [runtime-status] [72399] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:25:59.094Z] [runtime-status] [72399] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:25:59.094Z] [runtime-status] [72399] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:25:59.094Z] [runtime-status] [72399] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72399.sock 
[debug] [2020-04-23T22:25:59.095Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:25:59.111Z] [runtime-status] [72399] Ephemeral server handling POST request 
[debug] [2020-04-23T22:25:59.112Z] [runtime-status] [72399] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587678155,\"exp\":1587681755,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:25:59.186Z] [runtime-status] [72399] Ephemeral server survived. 
[debug] [2020-04-23T22:25:59.209Z] Apr 24, 2020 1:25:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:25:59.238Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: IDLE 
[debug] [2020-04-23T22:25:59.238Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:26:58.569Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:26:59.571Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:26:59.571Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: FINISHING 
[debug] [2020-04-23T22:26:59.571Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:26:59.572Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: FINISHING 
[debug] [2020-04-23T22:26:59.576Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:26:59.577Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:26:59.577Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:26:59.577Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72485.sock 
[debug] [2020-04-23T22:26:59.578Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: BUSY 
[debug] [2020-04-23T22:26:59.579Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: exited 
[debug] [2020-04-23T22:26:59.580Z] [worker-~diagnostic~-e8fc55e3-365f-43e0-ac3f-1fa34fd1a189]: FINISHED 
[debug] [2020-04-23T22:26:59.580Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: exited 
[debug] [2020-04-23T22:26:59.580Z] [worker-stripeAttachSource-00448af5-cffe-4ae7-91fc-eef4b20c4b2e]: FINISHED 
[debug] [2020-04-23T22:26:59.795Z] [runtime-status] [72485] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:26:59.796Z] [runtime-status] [72485] Disabled runtime features: undefined 
[debug] [2020-04-23T22:26:59.798Z] [runtime-status] [72485] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:26:59.799Z] [runtime-status] [72485] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:26:59.801Z] [runtime-status] [72485] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:26:59.824Z] [runtime-status] [72485] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:26:59.825Z] [runtime-status] [72485] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:26:59.825Z] [runtime-status] [72485] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:26:59.825Z] [runtime-status] [72485] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:26:59.826Z] [runtime-status] [72485] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:26:59.827Z] [runtime-status] [72485] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:26:59.976Z] [runtime-status] [72485] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:26:59.999Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: IDLE 
[debug] [2020-04-23T22:28:07.986Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:28:08.989Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:28:08.989Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: FINISHING 
[debug] [2020-04-23T22:28:08.989Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:28:08.989Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:28:08.992Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:28:08.992Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:28:08.992Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:28:08.993Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72561.sock 
[debug] [2020-04-23T22:28:08.993Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: BUSY 
[debug] [2020-04-23T22:28:08.995Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: exited 
[debug] [2020-04-23T22:28:08.995Z] [worker-~diagnostic~-d9ab25e3-e733-43cb-bcae-44189fa43697]: FINISHED 
[debug] [2020-04-23T22:28:09.365Z] [runtime-status] [72561] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:09.366Z] [runtime-status] [72561] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:09.368Z] [runtime-status] [72561] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:09.369Z] [runtime-status] [72561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:09.371Z] [runtime-status] [72561] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:09.417Z] [runtime-status] [72561] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:09.417Z] [runtime-status] [72561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:09.418Z] [runtime-status] [72561] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:09.419Z] [runtime-status] [72561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:09.419Z] [runtime-status] [72561] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:09.423Z] [runtime-status] [72561] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:09.776Z] [runtime-status] [72561] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:09.823Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: IDLE 
[debug] [2020-04-23T22:28:13.228Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:28:13.229Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.230Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:28:13.230Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.230Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:28:13.230Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:13.230Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:28:14.230Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:28:14.230Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: FINISHING 
[debug] [2020-04-23T22:28:14.230Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:28:14.234Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:28:14.234Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:28:14.234Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:28:14.234Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72575.sock 
[debug] [2020-04-23T22:28:14.234Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: BUSY 
[debug] [2020-04-23T22:28:14.236Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: exited 
[debug] [2020-04-23T22:28:14.236Z] [worker-~diagnostic~-5b886470-8f0b-4a7e-bb60-17285f564599]: FINISHED 
[debug] [2020-04-23T22:28:14.441Z] [runtime-status] [72575] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:14.442Z] [runtime-status] [72575] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:14.444Z] [runtime-status] [72575] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:14.445Z] [runtime-status] [72575] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:14.446Z] [runtime-status] [72575] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:14.471Z] [runtime-status] [72575] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:14.471Z] [runtime-status] [72575] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:14.472Z] [runtime-status] [72575] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:14.472Z] [runtime-status] [72575] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:14.472Z] [runtime-status] [72575] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:14.474Z] [runtime-status] [72575] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:14.615Z] [runtime-status] [72575] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:14.644Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: IDLE 
[debug] [2020-04-23T22:28:20.599Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:28:20.600Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:28:20.600Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:28:20.600Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:28:20.603Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:28:20.604Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:28:20.604Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:28:20.604Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72576.sock 
[debug] [2020-04-23T22:28:20.604Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: BUSY 
[debug] [2020-04-23T22:28:20.810Z] [runtime-status] [72576] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:20.811Z] [runtime-status] [72576] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:20.813Z] [runtime-status] [72576] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:20.813Z] [runtime-status] [72576] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:20.815Z] [runtime-status] [72576] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:20.836Z] [runtime-status] [72576] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:20.836Z] [runtime-status] [72576] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:20.837Z] [runtime-status] [72576] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:20.837Z] [runtime-status] [72576] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:20.837Z] [runtime-status] [72576] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:20.838Z] [runtime-status] [72576] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:20.964Z] [runtime-status] [72576] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:20.986Z] [runtime-status] [72576] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:28:20.986Z] [runtime-status] [72576] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:28:20.986Z] [runtime-status] [72576] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:28:20.988Z] [runtime-status] [72576] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72576.sock 
[debug] [2020-04-23T22:28:20.991Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:28:20.995Z] [runtime-status] [72576] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:28:20.999Z] [runtime-status] [72576] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:28:21.000Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: IDLE 
[debug] [2020-04-23T22:28:21.000Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:28:21.000Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:28:21.000Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:28:21.000Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:28:21.001Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzgxNTUsImV4cCI6MTU4NzY4MTc1NSwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.ej_39nRHNTUbusORKHReZWa66Bk2ugjOrH3Cs2dYDHluOoNa_eaqDLlHGG3fZ8I9L_NGHUAH4cFa62XrKiuwJ5MxrKtlClU7Fm6Ry0jogn_VKDM3GUQ_CiNe52_lf2Aum0fmsegI--jdTltLHHCC14JpRw-5lJnm39cRWAlCZvI2wv3ma4vi1WLYIHx_fJvbOYCgxt6zTFqqw2Mvlnj0mdJx6dwdsvrDThI8KXB5AWV0oXBeDr0FMICUiba58JXK-004X5ruApBgp-ToRz-967IVcdlLDbhtcQs9Zzq1zyJyitl6paSn-4h1aR-_QwvMNSR7pRcFSKXUZFe9D0i0Xw
[debug] [2020-04-23T22:28:21.001Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:28:21.001Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72576.sock 
[debug] [2020-04-23T22:28:21.001Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: BUSY 
[debug] [2020-04-23T22:28:21.009Z] [runtime-status] [72576] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:28:21.010Z] [runtime-status] [72576] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:28:21.010Z] [runtime-status] [72576] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:28:21.010Z] [runtime-status] [72576] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72576.sock 
[debug] [2020-04-23T22:28:21.010Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:28:21.026Z] [runtime-status] [72576] Ephemeral server handling POST request 
[debug] [2020-04-23T22:28:21.027Z] [runtime-status] [72576] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587678155,\"exp\":1587681755,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:28:21.102Z] [runtime-status] [72576] Ephemeral server survived. 
[debug] [2020-04-23T22:28:21.124Z] Apr 24, 2020 1:28:21 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:28:21.153Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: IDLE 
[debug] [2020-04-23T22:28:21.153Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:28:28.287Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:28:29.290Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:28:29.290Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: FINISHING 
[debug] [2020-04-23T22:28:29.290Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:28:29.290Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: FINISHING 
[debug] [2020-04-23T22:28:29.293Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:28:29.294Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:28:29.294Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:28:29.294Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72599.sock 
[debug] [2020-04-23T22:28:29.294Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: BUSY 
[debug] [2020-04-23T22:28:29.296Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: exited 
[debug] [2020-04-23T22:28:29.296Z] [worker-~diagnostic~-e9a3c105-7c6f-485f-b479-ef2c73f702f1]: FINISHED 
[debug] [2020-04-23T22:28:29.296Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: exited 
[debug] [2020-04-23T22:28:29.296Z] [worker-stripeAttachSource-0606a269-dd55-4431-b728-3d385b51a2b3]: FINISHED 
[debug] [2020-04-23T22:28:29.528Z] [runtime-status] [72599] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:29.529Z] [runtime-status] [72599] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:29.531Z] [runtime-status] [72599] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:29.532Z] [runtime-status] [72599] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:29.533Z] [runtime-status] [72599] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:29.559Z] [runtime-status] [72599] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:29.560Z] [runtime-status] [72599] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:29.560Z] [runtime-status] [72599] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:29.561Z] [runtime-status] [72599] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:29.561Z] [runtime-status] [72599] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:29.562Z] [runtime-status] [72599] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:29.715Z] [runtime-status] [72599] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:29.743Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: IDLE 
[debug] [2020-04-23T22:28:33.584Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.585Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:28:33.585Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.585Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:28:33.585Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.585Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:28:33.591Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.592Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:28:33.592Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.592Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:28:33.592Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:28:33.592Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:28:34.593Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:28:34.593Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: FINISHING 
[debug] [2020-04-23T22:28:34.593Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:28:34.593Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:28:34.597Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:28:34.598Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:28:34.598Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:28:34.598Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72619.sock 
[debug] [2020-04-23T22:28:34.598Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: BUSY 
[debug] [2020-04-23T22:28:34.599Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: exited 
[debug] [2020-04-23T22:28:34.599Z] [worker-~diagnostic~-96c8113a-16f3-4c0e-b7af-6be7dde685f3]: FINISHED 
[debug] [2020-04-23T22:28:34.809Z] [runtime-status] [72619] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:34.810Z] [runtime-status] [72619] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:34.812Z] [runtime-status] [72619] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:34.813Z] [runtime-status] [72619] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:34.814Z] [runtime-status] [72619] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:34.838Z] [runtime-status] [72619] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:34.839Z] [runtime-status] [72619] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:34.840Z] [runtime-status] [72619] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:34.840Z] [runtime-status] [72619] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:34.840Z] [runtime-status] [72619] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:34.842Z] [runtime-status] [72619] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:35.003Z] [runtime-status] [72619] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:35.025Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: IDLE 
[debug] [2020-04-23T22:28:37.994Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:28:37.995Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:28:37.995Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:28:37.995Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:28:37.998Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:28:37.998Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:28:37.998Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:28:37.998Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72628.sock 
[debug] [2020-04-23T22:28:37.998Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: BUSY 
[debug] [2020-04-23T22:28:38.202Z] [runtime-status] [72628] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:28:38.203Z] [runtime-status] [72628] Disabled runtime features: undefined 
[debug] [2020-04-23T22:28:38.205Z] [runtime-status] [72628] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:38.206Z] [runtime-status] [72628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:38.207Z] [runtime-status] [72628] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:28:38.228Z] [runtime-status] [72628] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:28:38.229Z] [runtime-status] [72628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:38.229Z] [runtime-status] [72628] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:28:38.229Z] [runtime-status] [72628] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:28:38.230Z] [runtime-status] [72628] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:28:38.231Z] [runtime-status] [72628] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:28:38.358Z] [runtime-status] [72628] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:28:38.378Z] [runtime-status] [72628] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:28:38.378Z] [runtime-status] [72628] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:28:38.378Z] [runtime-status] [72628] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:28:38.380Z] [runtime-status] [72628] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72628.sock 
[debug] [2020-04-23T22:28:38.382Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:28:38.386Z] [runtime-status] [72628] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:28:38.389Z] [runtime-status] [72628] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:28:38.391Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: IDLE 
[debug] [2020-04-23T22:28:38.391Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:28:38.391Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:28:38.391Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:28:38.391Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:28:38.391Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2NzgxNTUsImV4cCI6MTU4NzY4MTc1NSwiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.ej_39nRHNTUbusORKHReZWa66Bk2ugjOrH3Cs2dYDHluOoNa_eaqDLlHGG3fZ8I9L_NGHUAH4cFa62XrKiuwJ5MxrKtlClU7Fm6Ry0jogn_VKDM3GUQ_CiNe52_lf2Aum0fmsegI--jdTltLHHCC14JpRw-5lJnm39cRWAlCZvI2wv3ma4vi1WLYIHx_fJvbOYCgxt6zTFqqw2Mvlnj0mdJx6dwdsvrDThI8KXB5AWV0oXBeDr0FMICUiba58JXK-004X5ruApBgp-ToRz-967IVcdlLDbhtcQs9Zzq1zyJyitl6paSn-4h1aR-_QwvMNSR7pRcFSKXUZFe9D0i0Xw
[debug] [2020-04-23T22:28:38.391Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:28:38.392Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72628.sock 
[debug] [2020-04-23T22:28:38.392Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: BUSY 
[debug] [2020-04-23T22:28:38.404Z] [runtime-status] [72628] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:28:38.404Z] [runtime-status] [72628] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:28:38.405Z] [runtime-status] [72628] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:28:38.405Z] [runtime-status] [72628] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_72628.sock 
[debug] [2020-04-23T22:28:38.406Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:28:38.417Z] [runtime-status] [72628] Ephemeral server handling POST request 
[debug] [2020-04-23T22:28:38.418Z] [runtime-status] [72628] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587678155,\"exp\":1587681755,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:28:38.494Z] [runtime-status] [72628] Ephemeral server survived. 
[debug] [2020-04-23T22:28:38.511Z] Apr 24, 2020 1:28:38 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:28:38.540Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: IDLE 
[debug] [2020-04-23T22:28:38.540Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:40:58.682Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:40:59.684Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:40:59.684Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: FINISHING 
[debug] [2020-04-23T22:40:59.684Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:40:59.684Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: FINISHING 
[debug] [2020-04-23T22:40:59.689Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:40:59.689Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:40:59.689Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:40:59.689Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73008.sock 
[debug] [2020-04-23T22:40:59.689Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: BUSY 
[debug] [2020-04-23T22:40:59.692Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: exited 
[debug] [2020-04-23T22:40:59.692Z] [worker-~diagnostic~-805decfe-a928-4eee-bc56-493f01ba277e]: FINISHED 
[debug] [2020-04-23T22:40:59.693Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: exited 
[debug] [2020-04-23T22:40:59.693Z] [worker-stripeAttachSource-533ac99d-205c-4667-b10e-bf0ba3120cfa]: FINISHED 
[debug] [2020-04-23T22:41:00.145Z] [runtime-status] [73008] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:41:00.147Z] [runtime-status] [73008] Disabled runtime features: undefined 
[debug] [2020-04-23T22:41:00.151Z] [runtime-status] [73008] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:41:00.152Z] [runtime-status] [73008] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:00.155Z] [runtime-status] [73008] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:41:00.209Z] [runtime-status] [73008] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:41:00.209Z] [runtime-status] [73008] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:00.210Z] [runtime-status] [73008] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:41:00.211Z] [runtime-status] [73008] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:00.211Z] [runtime-status] [73008] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:41:00.213Z] [runtime-status] [73008] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:41:00.585Z] [runtime-status] [73008] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:41:00.648Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: IDLE 
[debug] [2020-04-23T22:41:13.000Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:41:14.001Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:41:14.001Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: FINISHING 
[debug] [2020-04-23T22:41:14.001Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:41:14.001Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:41:14.004Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:41:14.004Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:41:14.004Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:41:14.005Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73051.sock 
[debug] [2020-04-23T22:41:14.005Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: BUSY 
[debug] [2020-04-23T22:41:14.007Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: exited 
[debug] [2020-04-23T22:41:14.007Z] [worker-~diagnostic~-5dd008c9-f88d-423f-aab1-c570c50c58f0]: FINISHED 
[debug] [2020-04-23T22:41:14.342Z] [runtime-status] [73051] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:41:14.343Z] [runtime-status] [73051] Disabled runtime features: undefined 
[debug] [2020-04-23T22:41:14.345Z] [runtime-status] [73051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:41:14.345Z] [runtime-status] [73051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:14.347Z] [runtime-status] [73051] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:41:14.369Z] [runtime-status] [73051] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:41:14.370Z] [runtime-status] [73051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:14.370Z] [runtime-status] [73051] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:41:14.370Z] [runtime-status] [73051] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:41:14.370Z] [runtime-status] [73051] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:41:14.372Z] [runtime-status] [73051] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:41:14.505Z] [runtime-status] [73051] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:41:14.528Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: IDLE 
[debug] [2020-04-23T22:42:06.650Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:42:07.654Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:42:07.654Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: FINISHING 
[debug] [2020-04-23T22:42:07.654Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:42:07.657Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:42:07.657Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:42:07.657Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:42:07.657Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73116.sock 
[debug] [2020-04-23T22:42:07.657Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: BUSY 
[debug] [2020-04-23T22:42:07.659Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: exited 
[debug] [2020-04-23T22:42:07.659Z] [worker-~diagnostic~-fc20fc12-5287-4d68-a8cb-5beeaacaf7a2]: FINISHED 
[debug] [2020-04-23T22:42:07.860Z] [runtime-status] [73116] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:42:07.861Z] [runtime-status] [73116] Disabled runtime features: undefined 
[debug] [2020-04-23T22:42:07.863Z] [runtime-status] [73116] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:42:07.863Z] [runtime-status] [73116] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:07.865Z] [runtime-status] [73116] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:42:07.886Z] [runtime-status] [73116] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:42:07.886Z] [runtime-status] [73116] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:07.887Z] [runtime-status] [73116] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:42:07.887Z] [runtime-status] [73116] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:07.888Z] [runtime-status] [73116] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:42:07.889Z] [runtime-status] [73116] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:42:08.026Z] [runtime-status] [73116] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:42:08.048Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: IDLE 
[debug] [2020-04-23T22:42:13.047Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:42:14.050Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:42:14.050Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: FINISHING 
[debug] [2020-04-23T22:42:14.050Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:42:14.053Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:42:14.053Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:42:14.053Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:42:14.053Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73146.sock 
[debug] [2020-04-23T22:42:14.053Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: BUSY 
[debug] [2020-04-23T22:42:14.055Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: exited 
[debug] [2020-04-23T22:42:14.057Z] [worker-~diagnostic~-b10218f7-a42d-4510-87c3-6947d34c7540]: FINISHED 
[debug] [2020-04-23T22:42:14.267Z] [runtime-status] [73146] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:42:14.269Z] [runtime-status] [73146] Disabled runtime features: undefined 
[debug] [2020-04-23T22:42:14.270Z] [runtime-status] [73146] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:42:14.271Z] [runtime-status] [73146] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:14.272Z] [runtime-status] [73146] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:42:14.294Z] [runtime-status] [73146] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:42:14.295Z] [runtime-status] [73146] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:14.295Z] [runtime-status] [73146] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:42:14.296Z] [runtime-status] [73146] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:42:14.296Z] [runtime-status] [73146] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:42:14.297Z] [runtime-status] [73146] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:42:14.424Z] [runtime-status] [73146] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:42:14.445Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: IDLE 
[debug] [2020-04-23T22:47:47.651Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:47:48.654Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:47:48.654Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: FINISHING 
[debug] [2020-04-23T22:47:48.654Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:47:48.659Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:47:48.659Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:47:48.659Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:47:48.660Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73316.sock 
[debug] [2020-04-23T22:47:48.660Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: BUSY 
[debug] [2020-04-23T22:47:48.661Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: exited 
[debug] [2020-04-23T22:47:48.661Z] [worker-~diagnostic~-eb5e19dc-803c-4a73-b316-1ee9dadd14a2]: FINISHED 
[debug] [2020-04-23T22:47:48.889Z] [runtime-status] [73316] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:47:48.891Z] [runtime-status] [73316] Disabled runtime features: undefined 
[debug] [2020-04-23T22:47:48.893Z] [runtime-status] [73316] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:47:48.893Z] [runtime-status] [73316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:47:48.895Z] [runtime-status] [73316] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:47:48.923Z] [runtime-status] [73316] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:47:48.924Z] [runtime-status] [73316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:47:48.924Z] [runtime-status] [73316] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:47:48.925Z] [runtime-status] [73316] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:47:48.925Z] [runtime-status] [73316] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:47:48.926Z] [runtime-status] [73316] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:47:49.079Z] [runtime-status] [73316] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:47:49.104Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: IDLE 
[debug] [2020-04-23T22:47:58.788Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.788Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:47:58.788Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.788Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:47:58.788Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:47:58.789Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:47:59.789Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:47:59.789Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: FINISHING 
[debug] [2020-04-23T22:47:59.789Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:47:59.793Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:47:59.793Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:47:59.793Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:47:59.793Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73335.sock 
[debug] [2020-04-23T22:47:59.793Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: BUSY 
[debug] [2020-04-23T22:47:59.794Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: exited 
[debug] [2020-04-23T22:47:59.795Z] [worker-~diagnostic~-10d73e25-893c-4bd8-850f-e973b73923ec]: FINISHED 
[debug] [2020-04-23T22:48:00.023Z] [runtime-status] [73335] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:48:00.024Z] [runtime-status] [73335] Disabled runtime features: undefined 
[debug] [2020-04-23T22:48:00.026Z] [runtime-status] [73335] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:48:00.026Z] [runtime-status] [73335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:00.028Z] [runtime-status] [73335] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:48:00.052Z] [runtime-status] [73335] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:48:00.053Z] [runtime-status] [73335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:00.053Z] [runtime-status] [73335] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:48:00.054Z] [runtime-status] [73335] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:00.054Z] [runtime-status] [73335] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:48:00.056Z] [runtime-status] [73335] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:48:00.190Z] [runtime-status] [73335] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:48:00.216Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: IDLE 
[debug] [2020-04-23T22:48:10.860Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:48:10.860Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:48:10.861Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:48:10.861Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:48:10.864Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:48:10.865Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:48:10.865Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:48:10.865Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73336.sock 
[debug] [2020-04-23T22:48:10.865Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: BUSY 
[debug] [2020-04-23T22:48:11.067Z] [runtime-status] [73336] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:48:11.068Z] [runtime-status] [73336] Disabled runtime features: undefined 
[debug] [2020-04-23T22:48:11.069Z] [runtime-status] [73336] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:48:11.070Z] [runtime-status] [73336] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:11.071Z] [runtime-status] [73336] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:48:11.091Z] [runtime-status] [73336] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:48:11.092Z] [runtime-status] [73336] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:11.092Z] [runtime-status] [73336] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:48:11.093Z] [runtime-status] [73336] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:48:11.093Z] [runtime-status] [73336] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:48:11.094Z] [runtime-status] [73336] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:48:11.219Z] [runtime-status] [73336] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:48:11.243Z] [runtime-status] [73336] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:48:11.243Z] [runtime-status] [73336] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:48:11.243Z] [runtime-status] [73336] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:48:11.246Z] [runtime-status] [73336] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73336.sock 
[debug] [2020-04-23T22:48:11.249Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:48:11.253Z] [runtime-status] [73336] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:48:11.257Z] [runtime-status] [73336] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:48:11.258Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: IDLE 
[debug] [2020-04-23T22:48:11.258Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:48:11.259Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:48:11.259Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:48:11.259Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:48:11.259Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:48:11.259Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:48:11.259Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73336.sock 
[debug] [2020-04-23T22:48:11.259Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: BUSY 
[debug] [2020-04-23T22:48:11.269Z] [runtime-status] [73336] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:48:11.272Z] [runtime-status] [73336] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:48:11.272Z] [runtime-status] [73336] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:48:11.273Z] [runtime-status] [73336] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73336.sock 
[debug] [2020-04-23T22:48:11.273Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:48:11.294Z] [runtime-status] [73336] Ephemeral server handling POST request 
[debug] [2020-04-23T22:48:11.295Z] [runtime-status] [73336] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:48:11.373Z] [runtime-status] [73336] Ephemeral server survived. 
[debug] [2020-04-23T22:48:11.388Z] Apr 24, 2020 1:48:11 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:48:11 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:48:11 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:48:11 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:48:11 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:48:11.859Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: IDLE 
[debug] [2020-04-23T22:48:11.859Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:49:57.621Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:49:58.623Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:49:58.623Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: FINISHING 
[debug] [2020-04-23T22:49:58.623Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:49:58.623Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: FINISHING 
[debug] [2020-04-23T22:49:58.634Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:49:58.635Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:49:58.635Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:49:58.639Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73394.sock 
[debug] [2020-04-23T22:49:58.639Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: BUSY 
[debug] [2020-04-23T22:49:58.640Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: exited 
[debug] [2020-04-23T22:49:58.640Z] [worker-~diagnostic~-27916015-91a4-4835-b01b-8e5063cbfe4c]: FINISHED 
[debug] [2020-04-23T22:49:58.640Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: exited 
[debug] [2020-04-23T22:49:58.640Z] [worker-stripeAttachSource-886cdac8-7430-444e-9f71-c2087d51e4a2]: FINISHED 
[debug] [2020-04-23T22:49:59.024Z] [runtime-status] [73394] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:49:59.025Z] [runtime-status] [73394] Disabled runtime features: undefined 
[debug] [2020-04-23T22:49:59.027Z] [runtime-status] [73394] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:49:59.028Z] [runtime-status] [73394] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:49:59.030Z] [runtime-status] [73394] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:49:59.070Z] [runtime-status] [73394] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:49:59.070Z] [runtime-status] [73394] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:49:59.071Z] [runtime-status] [73394] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:49:59.071Z] [runtime-status] [73394] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:49:59.072Z] [runtime-status] [73394] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:49:59.075Z] [runtime-status] [73394] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:49:59.351Z] [runtime-status] [73394] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:49:59.400Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: IDLE 
[debug] [2020-04-23T22:50:04.111Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.111Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:50:04.111Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:50:04.112Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:50:04.113Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:50:05.115Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:50:05.115Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: FINISHING 
[debug] [2020-04-23T22:50:05.116Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:50:05.116Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:50:05.120Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:50:05.120Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:50:05.120Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:50:05.120Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73414.sock 
[debug] [2020-04-23T22:50:05.120Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: BUSY 
[debug] [2020-04-23T22:50:05.122Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: exited 
[debug] [2020-04-23T22:50:05.122Z] [worker-~diagnostic~-3929934f-b5d3-481f-9972-7c678b6c67aa]: FINISHED 
[debug] [2020-04-23T22:50:05.335Z] [runtime-status] [73414] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:50:05.336Z] [runtime-status] [73414] Disabled runtime features: undefined 
[debug] [2020-04-23T22:50:05.337Z] [runtime-status] [73414] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:50:05.338Z] [runtime-status] [73414] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:50:05.339Z] [runtime-status] [73414] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:50:05.360Z] [runtime-status] [73414] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:50:05.360Z] [runtime-status] [73414] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:50:05.361Z] [runtime-status] [73414] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:50:05.361Z] [runtime-status] [73414] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:50:05.361Z] [runtime-status] [73414] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:50:05.362Z] [runtime-status] [73414] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:50:05.487Z] [runtime-status] [73414] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:50:05.533Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: IDLE 
[debug] [2020-04-23T22:51:40.690Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:51:40.690Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:51:40.690Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:51:40.690Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:51:40.693Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:51:40.694Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:51:40.694Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:51:40.695Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:40.695Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: BUSY 
[debug] [2020-04-23T22:51:40.905Z] [runtime-status] [73456] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:51:40.906Z] [runtime-status] [73456] Disabled runtime features: undefined 
[debug] [2020-04-23T22:51:40.908Z] [runtime-status] [73456] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:51:40.909Z] [runtime-status] [73456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:40.911Z] [runtime-status] [73456] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:51:40.937Z] [runtime-status] [73456] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:51:40.937Z] [runtime-status] [73456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:40.938Z] [runtime-status] [73456] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:51:40.938Z] [runtime-status] [73456] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:40.938Z] [runtime-status] [73456] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:51:40.940Z] [runtime-status] [73456] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:51:41.091Z] [runtime-status] [73456] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:51:41.111Z] [runtime-status] [73456] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:51:41.111Z] [runtime-status] [73456] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:51:41.111Z] [runtime-status] [73456] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:51:41.113Z] [runtime-status] [73456] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:41.117Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:51:41.122Z] [runtime-status] [73456] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:51:41.125Z] [runtime-status] [73456] Ephemeral server survived. 
[debug] [2020-04-23T22:51:41.126Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T22:51:41.126Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T22:51:41.126Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:51:41.126Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:51:41.129Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:51:41.129Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T22:51:41.129Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:51:41.129Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73457.sock 
[debug] [2020-04-23T22:51:41.129Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: BUSY 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:51:41.131Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: IDLE 
[debug] [2020-04-23T22:51:41.131Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:51:41.326Z] [runtime-status] [73457] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:51:41.327Z] [runtime-status] [73457] Disabled runtime features: undefined 
[debug] [2020-04-23T22:51:41.328Z] [runtime-status] [73457] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:51:41.329Z] [runtime-status] [73457] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:41.331Z] [runtime-status] [73457] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:51:41.352Z] [runtime-status] [73457] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:51:41.353Z] [runtime-status] [73457] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:41.353Z] [runtime-status] [73457] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:51:41.353Z] [runtime-status] [73457] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:51:41.353Z] [runtime-status] [73457] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:51:41.355Z] [runtime-status] [73457] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:51:41.482Z] [runtime-status] [73457] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:51:41.501Z] [runtime-status] [73457] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:51:41.501Z] [runtime-status] [73457] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:51:41.501Z] [runtime-status] [73457] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:51:41.503Z] [runtime-status] [73457] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73457.sock 
[debug] [2020-04-23T22:51:41.505Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:51:41.522Z] [runtime-status] [73457] Ephemeral server handling POST request 
[debug] [2020-04-23T22:51:41.524Z] [runtime-status] [73457] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:51:41.600Z] [runtime-status] [73457] Ephemeral server survived. 
[debug] [2020-04-23T22:51:41.618Z] Apr 24, 2020 1:51:41 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:51:42 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:51:42 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:51:42 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:51:42 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:51:42.379Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: IDLE 
[debug] [2020-04-23T22:51:42.379Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:51:50.811Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:51:50.811Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:51:50.811Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:51:50.811Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:51:50.811Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:50.811Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: BUSY 
[debug] [2020-04-23T22:51:50.811Z] [runtime-status] [73456] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:51:50.812Z] [runtime-status] [73456] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:51:50.812Z] [runtime-status] [73456] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:51:50.812Z] [runtime-status] [73456] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:50.813Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:51:50.815Z] [runtime-status] [73456] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:51:50.816Z] [runtime-status] [73456] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:51:50.816Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: IDLE 
[debug] [2020-04-23T22:51:50.816Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:51:50.818Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:51:50.819Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:51:50.819Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:51:50.819Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:51:50.819Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:51:50.819Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:50.819Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: BUSY 
[debug] [2020-04-23T22:51:50.827Z] [runtime-status] [73456] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:51:50.827Z] [runtime-status] [73456] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:51:50.827Z] [runtime-status] [73456] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:51:50.827Z] [runtime-status] [73456] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73456.sock 
[debug] [2020-04-23T22:51:50.828Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:51:50.838Z] [runtime-status] [73456] Ephemeral server handling POST request 
[debug] [2020-04-23T22:51:50.839Z] [runtime-status] [73456] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:51:50.923Z] [runtime-status] [73456] Ephemeral server survived. 
[debug] [2020-04-23T22:51:50.939Z] Apr 24, 2020 1:51:50 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:51:51 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:51:51 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:51:51 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:51:51 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:51:51.386Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: IDLE 
[debug] [2020-04-23T22:51:51.386Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:53:46.913Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:53:47.917Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:53:47.917Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: FINISHING 
[debug] [2020-04-23T22:53:47.917Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:53:47.917Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: FINISHING 
[debug] [2020-04-23T22:53:47.917Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:53:47.917Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: FINISHING 
[debug] [2020-04-23T22:53:47.921Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:53:47.921Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:53:47.921Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:53:47.922Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73517.sock 
[debug] [2020-04-23T22:53:47.922Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: BUSY 
[debug] [2020-04-23T22:53:47.925Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: exited 
[debug] [2020-04-23T22:53:47.926Z] [worker-~diagnostic~-cec91f8c-48e0-4bf6-8bf0-be30aa8c4b20]: FINISHED 
[debug] [2020-04-23T22:53:47.926Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: exited 
[debug] [2020-04-23T22:53:47.926Z] [worker-stripeAttachSource-acde353b-01db-4e7f-b64a-edff6d0828f7]: FINISHED 
[debug] [2020-04-23T22:53:47.926Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: exited 
[debug] [2020-04-23T22:53:47.926Z] [worker-stripeAttachSource-8027d14b-08de-4556-bd8d-59b067ceeac9]: FINISHED 
[debug] [2020-04-23T22:53:48.136Z] [runtime-status] [73517] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:53:48.137Z] [runtime-status] [73517] Disabled runtime features: undefined 
[debug] [2020-04-23T22:53:48.139Z] [runtime-status] [73517] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:48.139Z] [runtime-status] [73517] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:48.141Z] [runtime-status] [73517] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:53:48.161Z] [runtime-status] [73517] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:53:48.161Z] [runtime-status] [73517] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:48.164Z] [runtime-status] [73517] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:48.164Z] [runtime-status] [73517] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:48.164Z] [runtime-status] [73517] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:53:48.164Z] [runtime-status] [73517] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:53:48.289Z] [runtime-status] [73517] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:53:48.316Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: IDLE 
[debug] [2020-04-23T22:53:51.634Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.634Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:53:51.634Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:53:51.635Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.636Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:53:51.636Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:53:51.637Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:53:52.641Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:53:52.641Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: FINISHING 
[debug] [2020-04-23T22:53:52.641Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:53:52.642Z] [worker-pool] Cleaned up workers for stripeAttachSource: 2 --> 0 
[debug] [2020-04-23T22:53:52.646Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:53:52.646Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:53:52.646Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:53:52.647Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73531.sock 
[debug] [2020-04-23T22:53:52.648Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: BUSY 
[debug] [2020-04-23T22:53:52.648Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: exited 
[debug] [2020-04-23T22:53:52.648Z] [worker-~diagnostic~-5d770856-4731-47f2-bc3d-234a2c9c3ac3]: FINISHED 
[debug] [2020-04-23T22:53:52.850Z] [runtime-status] [73531] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:53:52.850Z] [runtime-status] [73531] Disabled runtime features: undefined 
[debug] [2020-04-23T22:53:52.850Z] [runtime-status] [73531] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:52.851Z] [runtime-status] [73531] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:52.852Z] [runtime-status] [73531] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:53:52.874Z] [runtime-status] [73531] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:53:52.874Z] [runtime-status] [73531] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:52.875Z] [runtime-status] [73531] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:52.875Z] [runtime-status] [73531] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:52.875Z] [runtime-status] [73531] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:53:52.877Z] [runtime-status] [73531] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:53:53.005Z] [runtime-status] [73531] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:53:53.033Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: IDLE 
[debug] [2020-04-23T22:53:58.996Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:53:58.996Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:53:58.996Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:53:58.996Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:53:58.999Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:53:58.999Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:53:58.999Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:53:59.000Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73541.sock 
[debug] [2020-04-23T22:53:59.000Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: BUSY 
[debug] [2020-04-23T22:53:59.203Z] [runtime-status] [73541] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:53:59.205Z] [runtime-status] [73541] Disabled runtime features: undefined 
[debug] [2020-04-23T22:53:59.206Z] [runtime-status] [73541] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:59.207Z] [runtime-status] [73541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:59.208Z] [runtime-status] [73541] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:53:59.230Z] [runtime-status] [73541] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:53:59.230Z] [runtime-status] [73541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:59.231Z] [runtime-status] [73541] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:53:59.231Z] [runtime-status] [73541] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:53:59.231Z] [runtime-status] [73541] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:53:59.232Z] [runtime-status] [73541] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:53:59.358Z] [runtime-status] [73541] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:53:59.376Z] [runtime-status] [73541] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:53:59.376Z] [runtime-status] [73541] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:53:59.376Z] [runtime-status] [73541] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:53:59.378Z] [runtime-status] [73541] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73541.sock 
[debug] [2020-04-23T22:53:59.381Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:53:59.386Z] [runtime-status] [73541] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:53:59.389Z] [runtime-status] [73541] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:53:59.390Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: IDLE 
[debug] [2020-04-23T22:53:59.390Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:53:59.391Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:53:59.391Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:53:59.391Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:53:59.391Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:53:59.391Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:53:59.391Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73541.sock 
[debug] [2020-04-23T22:53:59.391Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: BUSY 
[debug] [2020-04-23T22:53:59.401Z] [runtime-status] [73541] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:53:59.401Z] [runtime-status] [73541] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:53:59.401Z] [runtime-status] [73541] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:53:59.401Z] [runtime-status] [73541] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73541.sock 
[debug] [2020-04-23T22:53:59.402Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:53:59.410Z] [runtime-status] [73541] Ephemeral server handling POST request 
[debug] [2020-04-23T22:53:59.410Z] [runtime-status] [73541] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:53:59.478Z] [runtime-status] [73541] Ephemeral server survived. 
[debug] [2020-04-23T22:53:59.496Z] Apr 24, 2020 1:53:59 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:53:59 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:53:59 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:53:59 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:53:59 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:54:00.015Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: IDLE 
[debug] [2020-04-23T22:54:00.015Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:54:17.616Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:54:18.616Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:54:18.616Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: FINISHING 
[debug] [2020-04-23T22:54:18.616Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:54:18.616Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: FINISHING 
[debug] [2020-04-23T22:54:18.619Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:54:18.620Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:54:18.620Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:54:18.620Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73545.sock 
[debug] [2020-04-23T22:54:18.620Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: BUSY 
[debug] [2020-04-23T22:54:18.622Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: exited 
[debug] [2020-04-23T22:54:18.622Z] [worker-~diagnostic~-20abc411-09d9-4992-abf7-53bb6add3fa5]: FINISHED 
[debug] [2020-04-23T22:54:18.622Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: exited 
[debug] [2020-04-23T22:54:18.622Z] [worker-stripeAttachSource-4d5ea892-1e09-4555-90c3-71b562915e11]: FINISHED 
[debug] [2020-04-23T22:54:18.837Z] [runtime-status] [73545] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:54:18.838Z] [runtime-status] [73545] Disabled runtime features: undefined 
[debug] [2020-04-23T22:54:18.840Z] [runtime-status] [73545] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:18.841Z] [runtime-status] [73545] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:18.843Z] [runtime-status] [73545] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:54:18.868Z] [runtime-status] [73545] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:54:18.868Z] [runtime-status] [73545] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:18.869Z] [runtime-status] [73545] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:18.869Z] [runtime-status] [73545] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:18.869Z] [runtime-status] [73545] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:54:18.871Z] [runtime-status] [73545] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:54:19.021Z] [runtime-status] [73545] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:54:19.043Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: IDLE 
[debug] [2020-04-23T22:54:22.262Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.262Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:54:22.262Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.262Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:54:22.262Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:22.263Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:54:23.265Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:54:23.265Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: FINISHING 
[debug] [2020-04-23T22:54:23.265Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:54:23.265Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:54:23.270Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:54:23.270Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:54:23.270Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:54:23.270Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73565.sock 
[debug] [2020-04-23T22:54:23.270Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: BUSY 
[debug] [2020-04-23T22:54:23.271Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: exited 
[debug] [2020-04-23T22:54:23.271Z] [worker-~diagnostic~-48101402-f2e4-42e6-be4d-2db2bb105eff]: FINISHED 
[debug] [2020-04-23T22:54:23.479Z] [runtime-status] [73565] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:54:23.481Z] [runtime-status] [73565] Disabled runtime features: undefined 
[debug] [2020-04-23T22:54:23.482Z] [runtime-status] [73565] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:23.483Z] [runtime-status] [73565] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:23.485Z] [runtime-status] [73565] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:54:23.508Z] [runtime-status] [73565] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:54:23.509Z] [runtime-status] [73565] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:23.510Z] [runtime-status] [73565] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:23.510Z] [runtime-status] [73565] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:23.510Z] [runtime-status] [73565] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:54:23.512Z] [runtime-status] [73565] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:54:23.638Z] [runtime-status] [73565] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:54:23.656Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: IDLE 
[debug] [2020-04-23T22:54:43.149Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:54:44.149Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:54:44.149Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: FINISHING 
[debug] [2020-04-23T22:54:44.149Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:54:44.152Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:54:44.152Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:54:44.152Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:54:44.153Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73585.sock 
[debug] [2020-04-23T22:54:44.153Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: BUSY 
[debug] [2020-04-23T22:54:44.154Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: exited 
[debug] [2020-04-23T22:54:44.154Z] [worker-~diagnostic~-fb95de09-779a-434d-ab80-271475c38688]: FINISHED 
[debug] [2020-04-23T22:54:44.381Z] [runtime-status] [73585] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:54:44.382Z] [runtime-status] [73585] Disabled runtime features: undefined 
[debug] [2020-04-23T22:54:44.384Z] [runtime-status] [73585] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:44.384Z] [runtime-status] [73585] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:44.386Z] [runtime-status] [73585] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:54:44.410Z] [runtime-status] [73585] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:54:44.411Z] [runtime-status] [73585] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:44.411Z] [runtime-status] [73585] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:44.412Z] [runtime-status] [73585] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:44.412Z] [runtime-status] [73585] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:54:44.413Z] [runtime-status] [73585] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:54:44.559Z] [runtime-status] [73585] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:54:44.587Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: IDLE 
[debug] [2020-04-23T22:54:47.785Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.785Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:54:47.785Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.785Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:54:47.785Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:54:47.786Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:54:48.790Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:54:48.790Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: FINISHING 
[debug] [2020-04-23T22:54:48.791Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:54:48.795Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:54:48.795Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:54:48.795Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:54:48.795Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73605.sock 
[debug] [2020-04-23T22:54:48.795Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: BUSY 
[debug] [2020-04-23T22:54:48.798Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: exited 
[debug] [2020-04-23T22:54:48.798Z] [worker-~diagnostic~-b0b608bd-44c9-4704-a682-9548c9575ebf]: FINISHED 
[debug] [2020-04-23T22:54:49.003Z] [runtime-status] [73605] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:54:49.005Z] [runtime-status] [73605] Disabled runtime features: undefined 
[debug] [2020-04-23T22:54:49.006Z] [runtime-status] [73605] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:49.007Z] [runtime-status] [73605] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:49.008Z] [runtime-status] [73605] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:54:49.030Z] [runtime-status] [73605] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:54:49.030Z] [runtime-status] [73605] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:49.031Z] [runtime-status] [73605] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:49.031Z] [runtime-status] [73605] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:49.031Z] [runtime-status] [73605] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:54:49.032Z] [runtime-status] [73605] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:54:49.160Z] [runtime-status] [73605] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:54:49.179Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: IDLE 
[debug] [2020-04-23T22:54:57.192Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:54:58.196Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:54:58.196Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: FINISHING 
[debug] [2020-04-23T22:54:58.196Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:54:58.203Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:54:58.203Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:54:58.203Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:54:58.203Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73616.sock 
[debug] [2020-04-23T22:54:58.203Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: BUSY 
[debug] [2020-04-23T22:54:58.204Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: exited 
[debug] [2020-04-23T22:54:58.204Z] [worker-~diagnostic~-152ddccd-0d56-41d3-b1c7-0ffd7cccf872]: FINISHED 
[debug] [2020-04-23T22:54:58.461Z] [runtime-status] [73616] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:54:58.462Z] [runtime-status] [73616] Disabled runtime features: undefined 
[debug] [2020-04-23T22:54:58.464Z] [runtime-status] [73616] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:58.465Z] [runtime-status] [73616] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:58.467Z] [runtime-status] [73616] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:54:58.493Z] [runtime-status] [73616] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:54:58.493Z] [runtime-status] [73616] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:58.494Z] [runtime-status] [73616] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:54:58.494Z] [runtime-status] [73616] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:54:58.495Z] [runtime-status] [73616] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:54:58.496Z] [runtime-status] [73616] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:54:58.643Z] [runtime-status] [73616] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:54:58.663Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: IDLE 
[debug] [2020-04-23T22:55:02.172Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.172Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:55:02.172Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.175Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:55:02.176Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:55:02.176Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:55:03.177Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:55:03.178Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: FINISHING 
[debug] [2020-04-23T22:55:03.178Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:55:03.183Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:55:03.183Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:55:03.183Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:55:03.183Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73636.sock 
[debug] [2020-04-23T22:55:03.183Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: BUSY 
[debug] [2020-04-23T22:55:03.184Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: exited 
[debug] [2020-04-23T22:55:03.184Z] [worker-~diagnostic~-18e842e1-5cf0-41c9-bc07-9d4c1da98f78]: FINISHED 
[debug] [2020-04-23T22:55:03.383Z] [runtime-status] [73636] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:55:03.384Z] [runtime-status] [73636] Disabled runtime features: undefined 
[debug] [2020-04-23T22:55:03.385Z] [runtime-status] [73636] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:55:03.386Z] [runtime-status] [73636] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:03.387Z] [runtime-status] [73636] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:55:03.410Z] [runtime-status] [73636] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:55:03.411Z] [runtime-status] [73636] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:03.411Z] [runtime-status] [73636] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:55:03.412Z] [runtime-status] [73636] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:03.412Z] [runtime-status] [73636] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:55:03.413Z] [runtime-status] [73636] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:55:03.543Z] [runtime-status] [73636] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:55:03.569Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: IDLE 
[debug] [2020-04-23T22:55:10.484Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:55:10.484Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:55:10.484Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:55:10.484Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:55:10.487Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:55:10.487Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:55:10.487Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:55:10.487Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73648.sock 
[debug] [2020-04-23T22:55:10.487Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: BUSY 
[debug] [2020-04-23T22:55:10.691Z] [runtime-status] [73648] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:55:10.692Z] [runtime-status] [73648] Disabled runtime features: undefined 
[debug] [2020-04-23T22:55:10.694Z] [runtime-status] [73648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:55:10.695Z] [runtime-status] [73648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:10.696Z] [runtime-status] [73648] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:55:10.718Z] [runtime-status] [73648] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:55:10.718Z] [runtime-status] [73648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:10.718Z] [runtime-status] [73648] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:55:10.719Z] [runtime-status] [73648] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:55:10.719Z] [runtime-status] [73648] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:55:10.720Z] [runtime-status] [73648] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:55:10.846Z] [runtime-status] [73648] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:55:10.865Z] [runtime-status] [73648] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:55:10.866Z] [runtime-status] [73648] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:55:10.866Z] [runtime-status] [73648] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:55:10.868Z] [runtime-status] [73648] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73648.sock 
[debug] [2020-04-23T22:55:10.871Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:55:10.875Z] [runtime-status] [73648] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:55:10.879Z] [runtime-status] [73648] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:55:10.880Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: IDLE 
[debug] [2020-04-23T22:55:10.880Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:55:10.880Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:55:10.880Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:55:10.880Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:55:10.880Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:55:10.880Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:55:10.880Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73648.sock 
[debug] [2020-04-23T22:55:10.880Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: BUSY 
[debug] [2020-04-23T22:55:10.893Z] [runtime-status] [73648] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:55:10.893Z] [runtime-status] [73648] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:55:10.893Z] [runtime-status] [73648] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:55:10.894Z] [runtime-status] [73648] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73648.sock 
[debug] [2020-04-23T22:55:10.895Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:55:10.905Z] [runtime-status] [73648] Ephemeral server handling POST request 
[debug] [2020-04-23T22:55:10.906Z] [runtime-status] [73648] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:55:10.981Z] [runtime-status] [73648] Ephemeral server survived. 
[debug] [2020-04-23T22:55:10.998Z] Apr 24, 2020 1:55:10 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:55:11.033Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: IDLE 
[debug] [2020-04-23T22:55:11.033Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:57:07.683Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:08.687Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:08.687Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: FINISHING 
[debug] [2020-04-23T22:57:08.687Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:57:08.687Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: FINISHING 
[debug] [2020-04-23T22:57:08.690Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:08.691Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:08.691Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:08.692Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73744.sock 
[debug] [2020-04-23T22:57:08.692Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: BUSY 
[debug] [2020-04-23T22:57:08.693Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: exited 
[debug] [2020-04-23T22:57:08.694Z] [worker-~diagnostic~-b6ddca65-180f-4dd2-beaa-991554086764]: FINISHED 
[debug] [2020-04-23T22:57:08.694Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: exited 
[debug] [2020-04-23T22:57:08.694Z] [worker-stripeAttachSource-cf643b6f-4127-4785-bea1-ee3a2898333f]: FINISHED 
[debug] [2020-04-23T22:57:08.926Z] [runtime-status] [73744] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:08.928Z] [runtime-status] [73744] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:08.929Z] [runtime-status] [73744] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:08.930Z] [runtime-status] [73744] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:08.932Z] [runtime-status] [73744] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:08.957Z] [runtime-status] [73744] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:08.958Z] [runtime-status] [73744] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:08.958Z] [runtime-status] [73744] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:08.958Z] [runtime-status] [73744] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:08.959Z] [runtime-status] [73744] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:08.960Z] [runtime-status] [73744] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:09.094Z] [runtime-status] [73744] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:09.116Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: IDLE 
[debug] [2020-04-23T22:57:14.734Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:14.735Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:57:15.739Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:15.739Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: FINISHING 
[debug] [2020-04-23T22:57:15.739Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:15.739Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:57:15.742Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:15.742Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:15.742Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:15.743Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73758.sock 
[debug] [2020-04-23T22:57:15.743Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: BUSY 
[debug] [2020-04-23T22:57:15.745Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: exited 
[debug] [2020-04-23T22:57:15.745Z] [worker-~diagnostic~-93b91b02-e761-46bd-895d-cfa559af8bc6]: FINISHED 
[debug] [2020-04-23T22:57:15.985Z] [runtime-status] [73758] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:15.987Z] [runtime-status] [73758] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:15.989Z] [runtime-status] [73758] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:15.990Z] [runtime-status] [73758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:15.991Z] [runtime-status] [73758] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:16.016Z] [runtime-status] [73758] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:16.017Z] [runtime-status] [73758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:16.018Z] [runtime-status] [73758] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:16.018Z] [runtime-status] [73758] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:16.018Z] [runtime-status] [73758] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:16.020Z] [runtime-status] [73758] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:16.163Z] [runtime-status] [73758] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:16.184Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: IDLE 
[debug] [2020-04-23T22:57:17.638Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:18.642Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:18.642Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: FINISHING 
[debug] [2020-04-23T22:57:18.642Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:18.645Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:18.645Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:18.645Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:18.645Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73774.sock 
[debug] [2020-04-23T22:57:18.645Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: BUSY 
[debug] [2020-04-23T22:57:18.647Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: exited 
[debug] [2020-04-23T22:57:18.647Z] [worker-~diagnostic~-ee92c7d8-da5c-4158-9190-309637241d2d]: FINISHED 
[debug] [2020-04-23T22:57:18.847Z] [runtime-status] [73774] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:18.849Z] [runtime-status] [73774] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:18.850Z] [runtime-status] [73774] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:18.851Z] [runtime-status] [73774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:18.853Z] [runtime-status] [73774] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:18.874Z] [runtime-status] [73774] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:18.875Z] [runtime-status] [73774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:18.875Z] [runtime-status] [73774] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:18.875Z] [runtime-status] [73774] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:18.875Z] [runtime-status] [73774] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:18.877Z] [runtime-status] [73774] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:19.002Z] [runtime-status] [73774] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:19.020Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: IDLE 
[debug] [2020-04-23T22:57:22.152Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.152Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:22.153Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:57:23.158Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:23.158Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: FINISHING 
[debug] [2020-04-23T22:57:23.158Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:23.163Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:23.164Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:23.164Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:23.165Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73789.sock 
[debug] [2020-04-23T22:57:23.165Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: BUSY 
[debug] [2020-04-23T22:57:23.166Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: exited 
[debug] [2020-04-23T22:57:23.166Z] [worker-~diagnostic~-3c20a09f-5eb9-4da8-a572-564c6bf0db0f]: FINISHED 
[debug] [2020-04-23T22:57:23.364Z] [runtime-status] [73789] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:23.365Z] [runtime-status] [73789] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:23.366Z] [runtime-status] [73789] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:23.367Z] [runtime-status] [73789] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:23.369Z] [runtime-status] [73789] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:23.390Z] [runtime-status] [73789] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:23.390Z] [runtime-status] [73789] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:23.391Z] [runtime-status] [73789] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:23.391Z] [runtime-status] [73789] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:23.391Z] [runtime-status] [73789] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:23.392Z] [runtime-status] [73789] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:23.519Z] [runtime-status] [73789] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:23.538Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: IDLE 
[debug] [2020-04-23T22:57:38.981Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:39.986Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:39.986Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: FINISHING 
[debug] [2020-04-23T22:57:39.986Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:39.989Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:39.989Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:39.989Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:39.990Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73806.sock 
[debug] [2020-04-23T22:57:39.990Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: BUSY 
[debug] [2020-04-23T22:57:39.991Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: exited 
[debug] [2020-04-23T22:57:39.991Z] [worker-~diagnostic~-9db6429a-ff00-48f9-8229-ca7e8d55426b]: FINISHED 
[debug] [2020-04-23T22:57:40.231Z] [runtime-status] [73806] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:40.232Z] [runtime-status] [73806] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:40.233Z] [runtime-status] [73806] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:40.234Z] [runtime-status] [73806] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:40.235Z] [runtime-status] [73806] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:40.260Z] [runtime-status] [73806] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:40.260Z] [runtime-status] [73806] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:40.261Z] [runtime-status] [73806] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:40.261Z] [runtime-status] [73806] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:40.261Z] [runtime-status] [73806] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:40.263Z] [runtime-status] [73806] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:40.401Z] [runtime-status] [73806] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:40.427Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: IDLE 
[debug] [2020-04-23T22:57:44.029Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:57:44.030Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:57:45.031Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:45.031Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: FINISHING 
[debug] [2020-04-23T22:57:45.031Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:45.035Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:45.036Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:45.036Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:45.036Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73820.sock 
[debug] [2020-04-23T22:57:45.036Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: BUSY 
[debug] [2020-04-23T22:57:45.038Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: exited 
[debug] [2020-04-23T22:57:45.038Z] [worker-~diagnostic~-c03324a6-439e-4d8f-8b19-58560bee2b24]: FINISHED 
[debug] [2020-04-23T22:57:45.281Z] [runtime-status] [73820] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:45.282Z] [runtime-status] [73820] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:45.283Z] [runtime-status] [73820] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:45.284Z] [runtime-status] [73820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:45.286Z] [runtime-status] [73820] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:45.308Z] [runtime-status] [73820] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:45.308Z] [runtime-status] [73820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:45.309Z] [runtime-status] [73820] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:45.309Z] [runtime-status] [73820] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:45.309Z] [runtime-status] [73820] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:45.311Z] [runtime-status] [73820] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:45.445Z] [runtime-status] [73820] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:45.465Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: IDLE 
[debug] [2020-04-23T22:57:53.428Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:53.519Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:54.520Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:54.520Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: FINISHING 
[debug] [2020-04-23T22:57:54.521Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:54.524Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:54.524Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:54.524Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:54.524Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73838.sock 
[debug] [2020-04-23T22:57:54.524Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: BUSY 
[debug] [2020-04-23T22:57:54.526Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: exited 
[debug] [2020-04-23T22:57:54.526Z] [worker-~diagnostic~-cc24e819-5a72-4f88-9f59-448710a20380]: FINISHED 
[debug] [2020-04-23T22:57:54.755Z] [runtime-status] [73838] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:54.756Z] [runtime-status] [73838] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:54.758Z] [runtime-status] [73838] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:54.759Z] [runtime-status] [73838] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:54.760Z] [runtime-status] [73838] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:54.784Z] [runtime-status] [73838] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:54.785Z] [runtime-status] [73838] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:54.785Z] [runtime-status] [73838] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:54.785Z] [runtime-status] [73838] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:54.786Z] [runtime-status] [73838] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:54.787Z] [runtime-status] [73838] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:54.924Z] [runtime-status] [73838] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:54.948Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: IDLE 
[debug] [2020-04-23T22:57:55.935Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:56.035Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:57:57.036Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:57:57.037Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: FINISHING 
[debug] [2020-04-23T22:57:57.037Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:57:57.040Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:57:57.040Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:57:57.040Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:57:57.040Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73848.sock 
[debug] [2020-04-23T22:57:57.040Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: BUSY 
[debug] [2020-04-23T22:57:57.042Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: exited 
[debug] [2020-04-23T22:57:57.042Z] [worker-~diagnostic~-337eb801-07e6-4e9b-ae09-0753c6aa4820]: FINISHED 
[debug] [2020-04-23T22:57:57.267Z] [runtime-status] [73848] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:57:57.269Z] [runtime-status] [73848] Disabled runtime features: undefined 
[debug] [2020-04-23T22:57:57.270Z] [runtime-status] [73848] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:57.271Z] [runtime-status] [73848] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:57.272Z] [runtime-status] [73848] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:57:57.297Z] [runtime-status] [73848] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:57:57.297Z] [runtime-status] [73848] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:57.298Z] [runtime-status] [73848] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:57:57.298Z] [runtime-status] [73848] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:57:57.298Z] [runtime-status] [73848] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:57:57.300Z] [runtime-status] [73848] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:57:57.447Z] [runtime-status] [73848] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:57:57.476Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: IDLE 
[debug] [2020-04-23T22:58:00.826Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.826Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:58:00.826Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.826Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:58:00.927Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.927Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:00.928Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:58:01.931Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:58:01.931Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: FINISHING 
[debug] [2020-04-23T22:58:01.931Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:58:01.934Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:58:01.934Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:58:01.934Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:58:01.935Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73870.sock 
[debug] [2020-04-23T22:58:01.935Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: BUSY 
[debug] [2020-04-23T22:58:01.937Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: exited 
[debug] [2020-04-23T22:58:01.937Z] [worker-~diagnostic~-cd5c94f9-13f6-4676-96bd-b3c59bc81f19]: FINISHED 
[debug] [2020-04-23T22:58:02.167Z] [runtime-status] [73870] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:58:02.169Z] [runtime-status] [73870] Disabled runtime features: undefined 
[debug] [2020-04-23T22:58:02.171Z] [runtime-status] [73870] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:02.172Z] [runtime-status] [73870] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:02.174Z] [runtime-status] [73870] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:58:02.202Z] [runtime-status] [73870] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:58:02.202Z] [runtime-status] [73870] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:02.203Z] [runtime-status] [73870] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:02.204Z] [runtime-status] [73870] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:02.204Z] [runtime-status] [73870] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:58:02.206Z] [runtime-status] [73870] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:58:02.354Z] [runtime-status] [73870] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:58:02.376Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: IDLE 
[debug] [2020-04-23T22:58:03.669Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:58:03.669Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:58:03.669Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:58:03.669Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:58:03.672Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:58:03.674Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:58:03.674Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:58:03.674Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73873.sock 
[debug] [2020-04-23T22:58:03.674Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: BUSY 
[debug] [2020-04-23T22:58:03.870Z] [runtime-status] [73873] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:58:03.871Z] [runtime-status] [73873] Disabled runtime features: undefined 
[debug] [2020-04-23T22:58:03.873Z] [runtime-status] [73873] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:03.873Z] [runtime-status] [73873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:03.875Z] [runtime-status] [73873] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:58:03.897Z] [runtime-status] [73873] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:58:03.897Z] [runtime-status] [73873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:03.898Z] [runtime-status] [73873] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:03.898Z] [runtime-status] [73873] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:03.898Z] [runtime-status] [73873] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:58:03.900Z] [runtime-status] [73873] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:58:04.027Z] [runtime-status] [73873] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:58:04.045Z] [runtime-status] [73873] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:58:04.045Z] [runtime-status] [73873] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:58:04.045Z] [runtime-status] [73873] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:58:04.048Z] [runtime-status] [73873] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73873.sock 
[debug] [2020-04-23T22:58:04.050Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:58:04.054Z] [runtime-status] [73873] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:58:04.058Z] [runtime-status] [73873] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:58:04.059Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: IDLE 
[debug] [2020-04-23T22:58:04.059Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:58:04.061Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:58:04.061Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:58:04.061Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:58:04.061Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:58:04.061Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:58:04.061Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73873.sock 
[debug] [2020-04-23T22:58:04.061Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: BUSY 
[debug] [2020-04-23T22:58:04.070Z] [runtime-status] [73873] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:58:04.070Z] [runtime-status] [73873] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:58:04.071Z] [runtime-status] [73873] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:58:04.071Z] [runtime-status] [73873] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73873.sock 
[debug] [2020-04-23T22:58:04.071Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:58:04.084Z] [runtime-status] [73873] Ephemeral server handling POST request 
[debug] [2020-04-23T22:58:04.085Z] [runtime-status] [73873] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:58:04.159Z] [runtime-status] [73873] Ephemeral server survived. 
[debug] [2020-04-23T22:58:04.177Z] Apr 24, 2020 1:58:04 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:58:04.195Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: IDLE 
[debug] [2020-04-23T22:58:04.195Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:58:15.442Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:58:16.446Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:58:16.446Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: FINISHING 
[debug] [2020-04-23T22:58:16.446Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:58:16.446Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: FINISHING 
[debug] [2020-04-23T22:58:16.450Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:58:16.450Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:58:16.450Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:58:16.451Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73912.sock 
[debug] [2020-04-23T22:58:16.451Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: BUSY 
[debug] [2020-04-23T22:58:16.453Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: exited 
[debug] [2020-04-23T22:58:16.453Z] [worker-~diagnostic~-66f31387-cda7-4b8f-8c84-23dfbc43522b]: FINISHED 
[debug] [2020-04-23T22:58:16.453Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: exited 
[debug] [2020-04-23T22:58:16.453Z] [worker-stripeAttachSource-db432bf2-3f57-40f0-b8f8-8bb183504fab]: FINISHED 
[debug] [2020-04-23T22:58:16.681Z] [runtime-status] [73912] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:58:16.682Z] [runtime-status] [73912] Disabled runtime features: undefined 
[debug] [2020-04-23T22:58:16.683Z] [runtime-status] [73912] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:16.684Z] [runtime-status] [73912] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:16.686Z] [runtime-status] [73912] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:58:16.709Z] [runtime-status] [73912] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:58:16.710Z] [runtime-status] [73912] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:16.710Z] [runtime-status] [73912] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:16.711Z] [runtime-status] [73912] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:16.711Z] [runtime-status] [73912] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:58:16.713Z] [runtime-status] [73912] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:58:16.864Z] [runtime-status] [73912] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:58:16.887Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: IDLE 
[debug] [2020-04-23T22:58:20.671Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.671Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:58:20.671Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.671Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:58:20.672Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:58:21.676Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:58:21.676Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: FINISHING 
[debug] [2020-04-23T22:58:21.676Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:58:21.677Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:58:21.681Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:58:21.681Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:58:21.681Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:58:21.681Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73926.sock 
[debug] [2020-04-23T22:58:21.681Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: BUSY 
[debug] [2020-04-23T22:58:21.683Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: exited 
[debug] [2020-04-23T22:58:21.683Z] [worker-~diagnostic~-fcc8112d-b3c3-4d3d-b791-108d612c0c69]: FINISHED 
[debug] [2020-04-23T22:58:21.900Z] [runtime-status] [73926] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:58:21.901Z] [runtime-status] [73926] Disabled runtime features: undefined 
[debug] [2020-04-23T22:58:21.903Z] [runtime-status] [73926] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:21.903Z] [runtime-status] [73926] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:21.905Z] [runtime-status] [73926] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:58:21.927Z] [runtime-status] [73926] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:58:21.927Z] [runtime-status] [73926] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:21.928Z] [runtime-status] [73926] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:21.928Z] [runtime-status] [73926] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:21.928Z] [runtime-status] [73926] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:58:21.930Z] [runtime-status] [73926] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:58:22.090Z] [runtime-status] [73926] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:58:22.111Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: IDLE 
[debug] [2020-04-23T22:58:24.649Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:58:24.650Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:58:24.650Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:58:24.650Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:58:24.653Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:58:24.653Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:58:24.653Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:58:24.654Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73940.sock 
[debug] [2020-04-23T22:58:24.654Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: BUSY 
[debug] [2020-04-23T22:58:24.859Z] [runtime-status] [73940] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:58:24.860Z] [runtime-status] [73940] Disabled runtime features: undefined 
[debug] [2020-04-23T22:58:24.862Z] [runtime-status] [73940] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:24.862Z] [runtime-status] [73940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:24.864Z] [runtime-status] [73940] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:58:24.886Z] [runtime-status] [73940] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:58:24.886Z] [runtime-status] [73940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:24.887Z] [runtime-status] [73940] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:58:24.887Z] [runtime-status] [73940] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:58:24.887Z] [runtime-status] [73940] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:58:24.888Z] [runtime-status] [73940] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:58:25.013Z] [runtime-status] [73940] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:58:25.036Z] [runtime-status] [73940] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:58:25.039Z] [runtime-status] [73940] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:58:25.039Z] [runtime-status] [73940] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:58:25.040Z] [runtime-status] [73940] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73940.sock 
[debug] [2020-04-23T22:58:25.040Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:58:25.045Z] [runtime-status] [73940] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:58:25.049Z] [runtime-status] [73940] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:58:25.050Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: IDLE 
[debug] [2020-04-23T22:58:25.050Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:58:25.051Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:58:25.051Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:58:25.051Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:58:25.051Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:58:25.051Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:58:25.051Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73940.sock 
[debug] [2020-04-23T22:58:25.052Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: BUSY 
[debug] [2020-04-23T22:58:25.063Z] [runtime-status] [73940] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:58:25.063Z] [runtime-status] [73940] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:58:25.063Z] [runtime-status] [73940] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:58:25.063Z] [runtime-status] [73940] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73940.sock 
[debug] [2020-04-23T22:58:25.064Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:58:25.076Z] [runtime-status] [73940] Ephemeral server handling POST request 
[debug] [2020-04-23T22:58:25.077Z] [runtime-status] [73940] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:58:25.146Z] [runtime-status] [73940] Ephemeral server survived. 
[debug] [2020-04-23T22:58:25.162Z] Apr 24, 2020 1:58:25 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:58:25 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:58:25 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:58:25 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:58:25 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:58:25.670Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: IDLE 
[debug] [2020-04-23T22:58:25.670Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T22:59:17.934Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:59:18.935Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:59:18.936Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: FINISHING 
[debug] [2020-04-23T22:59:18.936Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T22:59:18.936Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: FINISHING 
[debug] [2020-04-23T22:59:18.943Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:59:18.943Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:59:18.943Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:59:18.943Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73985.sock 
[debug] [2020-04-23T22:59:18.943Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: BUSY 
[debug] [2020-04-23T22:59:18.944Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: exited 
[debug] [2020-04-23T22:59:18.944Z] [worker-~diagnostic~-4a3be073-6e3d-4cc0-a436-4917a088b89e]: FINISHED 
[debug] [2020-04-23T22:59:18.944Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: exited 
[debug] [2020-04-23T22:59:18.944Z] [worker-stripeAttachSource-38c66193-af89-4de5-a984-5a89ea0c9cec]: FINISHED 
[debug] [2020-04-23T22:59:19.161Z] [runtime-status] [73985] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:59:19.162Z] [runtime-status] [73985] Disabled runtime features: undefined 
[debug] [2020-04-23T22:59:19.164Z] [runtime-status] [73985] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:19.165Z] [runtime-status] [73985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:19.166Z] [runtime-status] [73985] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:59:19.192Z] [runtime-status] [73985] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:59:19.193Z] [runtime-status] [73985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:19.194Z] [runtime-status] [73985] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:19.194Z] [runtime-status] [73985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:19.194Z] [runtime-status] [73985] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:59:19.196Z] [runtime-status] [73985] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:59:19.347Z] [runtime-status] [73985] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:59:19.370Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: IDLE 
[debug] [2020-04-23T22:59:23.370Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T22:59:24.373Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:59:24.373Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: FINISHING 
[debug] [2020-04-23T22:59:24.373Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:59:24.373Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T22:59:24.377Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:59:24.377Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:59:24.377Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:59:24.377Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_73996.sock 
[debug] [2020-04-23T22:59:24.377Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: BUSY 
[debug] [2020-04-23T22:59:24.379Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: exited 
[debug] [2020-04-23T22:59:24.379Z] [worker-~diagnostic~-7227efae-7faf-47a5-bad1-f299436b5ec2]: FINISHED 
[debug] [2020-04-23T22:59:24.614Z] [runtime-status] [73996] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:59:24.616Z] [runtime-status] [73996] Disabled runtime features: undefined 
[debug] [2020-04-23T22:59:24.618Z] [runtime-status] [73996] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:24.619Z] [runtime-status] [73996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:24.621Z] [runtime-status] [73996] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:59:24.649Z] [runtime-status] [73996] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:59:24.649Z] [runtime-status] [73996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:24.650Z] [runtime-status] [73996] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:24.650Z] [runtime-status] [73996] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:24.650Z] [runtime-status] [73996] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:59:24.652Z] [runtime-status] [73996] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:59:24.801Z] [runtime-status] [73996] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:59:24.824Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: IDLE 
[debug] [2020-04-23T22:59:29.280Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.280Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T22:59:29.280Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.281Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T22:59:29.281Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.281Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T22:59:29.281Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.281Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T22:59:29.282Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.283Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T22:59:29.283Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T22:59:29.283Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T22:59:30.285Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T22:59:30.285Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: FINISHING 
[debug] [2020-04-23T22:59:30.285Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:59:30.290Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T22:59:30.290Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T22:59:30.290Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T22:59:30.290Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74035.sock 
[debug] [2020-04-23T22:59:30.290Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: BUSY 
[debug] [2020-04-23T22:59:30.292Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: exited 
[debug] [2020-04-23T22:59:30.292Z] [worker-~diagnostic~-687af205-a188-47d1-9274-11755e9c3a89]: FINISHED 
[debug] [2020-04-23T22:59:30.498Z] [runtime-status] [74035] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:59:30.500Z] [runtime-status] [74035] Disabled runtime features: undefined 
[debug] [2020-04-23T22:59:30.501Z] [runtime-status] [74035] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:30.502Z] [runtime-status] [74035] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:30.503Z] [runtime-status] [74035] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:59:30.527Z] [runtime-status] [74035] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:59:30.527Z] [runtime-status] [74035] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:30.528Z] [runtime-status] [74035] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:30.528Z] [runtime-status] [74035] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:30.528Z] [runtime-status] [74035] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:59:30.529Z] [runtime-status] [74035] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:59:30.654Z] [runtime-status] [74035] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:59:30.681Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: IDLE 
[debug] [2020-04-23T22:59:43.714Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T22:59:43.714Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:59:43.714Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:59:43.714Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T22:59:43.717Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:59:43.717Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T22:59:43.717Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:59:43.717Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74045.sock 
[debug] [2020-04-23T22:59:43.717Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: BUSY 
[debug] [2020-04-23T22:59:43.923Z] [runtime-status] [74045] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:59:43.924Z] [runtime-status] [74045] Disabled runtime features: undefined 
[debug] [2020-04-23T22:59:43.926Z] [runtime-status] [74045] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:43.926Z] [runtime-status] [74045] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:43.928Z] [runtime-status] [74045] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:59:43.949Z] [runtime-status] [74045] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:59:43.950Z] [runtime-status] [74045] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:43.950Z] [runtime-status] [74045] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:43.950Z] [runtime-status] [74045] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:43.950Z] [runtime-status] [74045] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:59:43.952Z] [runtime-status] [74045] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:59:44.075Z] [runtime-status] [74045] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:59:44.099Z] [runtime-status] [74045] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:59:44.100Z] [runtime-status] [74045] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:59:44.100Z] [runtime-status] [74045] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:59:44.102Z] [runtime-status] [74045] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74045.sock 
[debug] [2020-04-23T22:59:44.104Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:59:44.109Z] [runtime-status] [74045] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T22:59:44.112Z] [runtime-status] [74045] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:59:44.114Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T22:59:44.114Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T22:59:44.114Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T22:59:44.114Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T22:59:44.117Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T22:59:44.117Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T22:59:44.117Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T22:59:44.117Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74046.sock 
[debug] [2020-04-23T22:59:44.117Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: BUSY 
[debug] [2020-04-23T22:59:44.118Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: IDLE 
[debug] [2020-04-23T22:59:44.118Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T22:59:44.309Z] [runtime-status] [74046] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T22:59:44.310Z] [runtime-status] [74046] Disabled runtime features: undefined 
[debug] [2020-04-23T22:59:44.312Z] [runtime-status] [74046] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:44.312Z] [runtime-status] [74046] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:44.313Z] [runtime-status] [74046] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T22:59:44.334Z] [runtime-status] [74046] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T22:59:44.335Z] [runtime-status] [74046] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:44.335Z] [runtime-status] [74046] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T22:59:44.336Z] [runtime-status] [74046] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T22:59:44.336Z] [runtime-status] [74046] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T22:59:44.337Z] [runtime-status] [74046] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T22:59:44.461Z] [runtime-status] [74046] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T22:59:44.485Z] [runtime-status] [74046] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T22:59:44.485Z] [runtime-status] [74046] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T22:59:44.485Z] [runtime-status] [74046] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T22:59:44.487Z] [runtime-status] [74046] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74046.sock 
[debug] [2020-04-23T22:59:44.489Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T22:59:44.502Z] [runtime-status] [74046] Ephemeral server handling POST request 
[debug] [2020-04-23T22:59:44.504Z] [runtime-status] [74046] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T22:59:44.569Z] [runtime-status] [74046] Ephemeral server survived. 
[debug] [2020-04-23T22:59:44.585Z] Apr 24, 2020 1:59:44 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 22:59:45 GMT', {"user":"      date: 'Thu, 23 Apr 2020 22:59:45 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 22:59:45 GMT', {"user":"    date: 'Thu, 23 Apr 2020 22:59:45 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T22:59:45.070Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: IDLE 
[debug] [2020-04-23T22:59:45.070Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:02:39.740Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:02:39.840Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:02:40.842Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:02:40.842Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: FINISHING 
[debug] [2020-04-23T23:02:40.842Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:02:40.842Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: FINISHING 
[debug] [2020-04-23T23:02:40.842Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:02:40.842Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: FINISHING 
[debug] [2020-04-23T23:02:40.847Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:02:40.847Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:02:40.847Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:02:40.848Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74128.sock 
[debug] [2020-04-23T23:02:40.848Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: BUSY 
[debug] [2020-04-23T23:02:40.850Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: exited 
[debug] [2020-04-23T23:02:40.850Z] [worker-stripeAttachSource-a446bb6e-31bc-4af2-83a3-86d4239a61f6]: FINISHED 
[debug] [2020-04-23T23:02:40.851Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: exited 
[debug] [2020-04-23T23:02:40.851Z] [worker-~diagnostic~-2a1ca604-c5b4-4c93-b360-c65af04250b5]: FINISHED 
[debug] [2020-04-23T23:02:40.851Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: exited 
[debug] [2020-04-23T23:02:40.851Z] [worker-stripeAttachSource-b8f3c378-6c5e-42c4-8278-6ef29f489c41]: FINISHED 
[debug] [2020-04-23T23:02:41.063Z] [runtime-status] [74128] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:02:41.064Z] [runtime-status] [74128] Disabled runtime features: undefined 
[debug] [2020-04-23T23:02:41.065Z] [runtime-status] [74128] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:41.066Z] [runtime-status] [74128] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:41.067Z] [runtime-status] [74128] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:02:41.088Z] [runtime-status] [74128] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:02:41.089Z] [runtime-status] [74128] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:41.089Z] [runtime-status] [74128] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:41.090Z] [runtime-status] [74128] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:41.090Z] [runtime-status] [74128] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:02:41.091Z] [runtime-status] [74128] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:02:41.225Z] [runtime-status] [74128] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:02:41.251Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: IDLE 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.021Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:02:45.025Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.025Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:02:45.025Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:02:45.025Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:02:46.026Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:02:46.026Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: FINISHING 
[debug] [2020-04-23T23:02:46.026Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:02:46.027Z] [worker-pool] Cleaned up workers for stripeAttachSource: 2 --> 0 
[debug] [2020-04-23T23:02:46.031Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:02:46.031Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:02:46.031Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:02:46.031Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74142.sock 
[debug] [2020-04-23T23:02:46.031Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: BUSY 
[debug] [2020-04-23T23:02:46.034Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: exited 
[debug] [2020-04-23T23:02:46.034Z] [worker-~diagnostic~-c0741682-6c68-46fe-8da0-b7d8325a7b38]: FINISHED 
[debug] [2020-04-23T23:02:46.249Z] [runtime-status] [74142] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:02:46.250Z] [runtime-status] [74142] Disabled runtime features: undefined 
[debug] [2020-04-23T23:02:46.252Z] [runtime-status] [74142] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:46.252Z] [runtime-status] [74142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:46.254Z] [runtime-status] [74142] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:02:46.277Z] [runtime-status] [74142] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:02:46.277Z] [runtime-status] [74142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:46.278Z] [runtime-status] [74142] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:46.278Z] [runtime-status] [74142] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:46.278Z] [runtime-status] [74142] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:02:46.280Z] [runtime-status] [74142] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:02:46.403Z] [runtime-status] [74142] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:02:46.430Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: IDLE 
[debug] [2020-04-23T23:02:49.092Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:02:49.092Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:02:49.092Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:02:49.092Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:02:49.095Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:02:49.095Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T23:02:49.095Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:02:49.096Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74151.sock 
[debug] [2020-04-23T23:02:49.096Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: BUSY 
[debug] [2020-04-23T23:02:49.304Z] [runtime-status] [74151] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:02:49.306Z] [runtime-status] [74151] Disabled runtime features: undefined 
[debug] [2020-04-23T23:02:49.307Z] [runtime-status] [74151] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:49.308Z] [runtime-status] [74151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:49.309Z] [runtime-status] [74151] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:02:49.331Z] [runtime-status] [74151] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:02:49.331Z] [runtime-status] [74151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:49.332Z] [runtime-status] [74151] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:49.332Z] [runtime-status] [74151] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:49.332Z] [runtime-status] [74151] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:02:49.333Z] [runtime-status] [74151] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:02:49.458Z] [runtime-status] [74151] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:02:49.478Z] [runtime-status] [74151] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:02:49.478Z] [runtime-status] [74151] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:02:49.478Z] [runtime-status] [74151] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:02:49.480Z] [runtime-status] [74151] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74151.sock 
[debug] [2020-04-23T23:02:49.485Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:02:49.490Z] [runtime-status] [74151] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T23:02:49.493Z] [runtime-status] [74151] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:02:49.494Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: IDLE 
[debug] [2020-04-23T23:02:49.494Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:02:49.495Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:02:49.495Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:02:49.495Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:02:49.495Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T23:02:49.495Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:02:49.495Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74151.sock 
[debug] [2020-04-23T23:02:49.495Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: BUSY 
[debug] [2020-04-23T23:02:49.507Z] [runtime-status] [74151] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:02:49.507Z] [runtime-status] [74151] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:02:49.507Z] [runtime-status] [74151] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:02:49.507Z] [runtime-status] [74151] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74151.sock 
[debug] [2020-04-23T23:02:49.508Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:02:49.517Z] [runtime-status] [74151] Ephemeral server handling POST request 
[debug] [2020-04-23T23:02:49.518Z] [runtime-status] [74151] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T23:02:49.587Z] [runtime-status] [74151] Ephemeral server survived. 
[debug] [2020-04-23T23:02:49.602Z] Apr 24, 2020 2:02:49 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 23:02:49 GMT', {"user":"      date: 'Thu, 23 Apr 2020 23:02:49 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 23:02:49 GMT', {"user":"    date: 'Thu, 23 Apr 2020 23:02:49 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:02:50.033Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: IDLE 
[debug] [2020-04-23T23:02:50.033Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:02:58.717Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:02:59.720Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:02:59.720Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: FINISHING 
[debug] [2020-04-23T23:02:59.720Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:02:59.720Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: FINISHING 
[debug] [2020-04-23T23:02:59.723Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:02:59.724Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:02:59.724Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:02:59.724Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74171.sock 
[debug] [2020-04-23T23:02:59.724Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: BUSY 
[debug] [2020-04-23T23:02:59.726Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: exited 
[debug] [2020-04-23T23:02:59.726Z] [worker-~diagnostic~-e54c0fc8-36af-4cf1-9c4f-5e2eba616d4a]: FINISHED 
[debug] [2020-04-23T23:02:59.726Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: exited 
[debug] [2020-04-23T23:02:59.727Z] [worker-stripeAttachSource-a7c0855f-1e11-41ad-af51-1e28bd447aa3]: FINISHED 
[debug] [2020-04-23T23:02:59.937Z] [runtime-status] [74171] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:02:59.938Z] [runtime-status] [74171] Disabled runtime features: undefined 
[debug] [2020-04-23T23:02:59.939Z] [runtime-status] [74171] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:59.940Z] [runtime-status] [74171] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:59.941Z] [runtime-status] [74171] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:02:59.962Z] [runtime-status] [74171] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:02:59.963Z] [runtime-status] [74171] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:59.963Z] [runtime-status] [74171] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:02:59.963Z] [runtime-status] [74171] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:02:59.964Z] [runtime-status] [74171] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:02:59.965Z] [runtime-status] [74171] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:03:00.100Z] [runtime-status] [74171] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:03:00.127Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: IDLE 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.844Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:03:02.944Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:03:03.948Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:03:03.948Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: FINISHING 
[debug] [2020-04-23T23:03:03.948Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:03:03.948Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T23:03:03.953Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:03:03.953Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:03:03.953Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:03:03.953Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74185.sock 
[debug] [2020-04-23T23:03:03.953Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: BUSY 
[debug] [2020-04-23T23:03:03.955Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: exited 
[debug] [2020-04-23T23:03:03.955Z] [worker-~diagnostic~-14bfde4c-91b6-41d3-b8b6-fcbb1bc18d4f]: FINISHED 
[debug] [2020-04-23T23:03:04.160Z] [runtime-status] [74185] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:03:04.161Z] [runtime-status] [74185] Disabled runtime features: undefined 
[debug] [2020-04-23T23:03:04.162Z] [runtime-status] [74185] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:03:04.163Z] [runtime-status] [74185] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:04.165Z] [runtime-status] [74185] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:03:04.186Z] [runtime-status] [74185] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:03:04.187Z] [runtime-status] [74185] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:04.187Z] [runtime-status] [74185] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:03:04.188Z] [runtime-status] [74185] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:04.188Z] [runtime-status] [74185] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:03:04.189Z] [runtime-status] [74185] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:03:04.332Z] [runtime-status] [74185] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:03:04.355Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: IDLE 
[debug] [2020-04-23T23:03:08.716Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:03:08.716Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:03:08.716Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:03:08.716Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:03:08.719Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:03:08.719Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T23:03:08.719Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:03:08.719Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74189.sock 
[debug] [2020-04-23T23:03:08.719Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: BUSY 
[debug] [2020-04-23T23:03:08.923Z] [runtime-status] [74189] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:03:08.924Z] [runtime-status] [74189] Disabled runtime features: undefined 
[debug] [2020-04-23T23:03:08.926Z] [runtime-status] [74189] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:03:08.926Z] [runtime-status] [74189] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:08.928Z] [runtime-status] [74189] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:03:08.949Z] [runtime-status] [74189] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:03:08.950Z] [runtime-status] [74189] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:08.950Z] [runtime-status] [74189] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:03:08.950Z] [runtime-status] [74189] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:03:08.950Z] [runtime-status] [74189] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:03:08.952Z] [runtime-status] [74189] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:03:09.076Z] [runtime-status] [74189] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:03:09.094Z] [runtime-status] [74189] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:03:09.094Z] [runtime-status] [74189] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:03:09.094Z] [runtime-status] [74189] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:03:09.097Z] [runtime-status] [74189] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74189.sock 
[debug] [2020-04-23T23:03:09.098Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:03:09.104Z] [runtime-status] [74189] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T23:03:09.107Z] [runtime-status] [74189] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:03:09.108Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: IDLE 
[debug] [2020-04-23T23:03:09.108Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:03:09.110Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:03:09.110Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:03:09.110Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:03:09.111Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T23:03:09.111Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:03:09.111Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74189.sock 
[debug] [2020-04-23T23:03:09.111Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: BUSY 
[debug] [2020-04-23T23:03:09.120Z] [runtime-status] [74189] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:03:09.120Z] [runtime-status] [74189] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:03:09.120Z] [runtime-status] [74189] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:03:09.120Z] [runtime-status] [74189] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74189.sock 
[debug] [2020-04-23T23:03:09.121Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:03:09.133Z] [runtime-status] [74189] Ephemeral server handling POST request 
[debug] [2020-04-23T23:03:09.133Z] [runtime-status] [74189] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T23:03:09.207Z] [runtime-status] [74189] Ephemeral server survived. 
[debug] [2020-04-23T23:03:09.223Z] Apr 24, 2020 2:03:09 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:03:09.257Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: IDLE 
[debug] [2020-04-23T23:03:09.257Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:08:09.003Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:08:10.004Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:08:10.004Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: FINISHING 
[debug] [2020-04-23T23:08:10.004Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:08:10.004Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: FINISHING 
[debug] [2020-04-23T23:08:10.008Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:08:10.009Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:08:10.009Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:08:10.009Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74307.sock 
[debug] [2020-04-23T23:08:10.010Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: BUSY 
[debug] [2020-04-23T23:08:10.011Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: exited 
[debug] [2020-04-23T23:08:10.011Z] [worker-stripeAttachSource-329bddd4-09ac-4484-a670-bc6f9f84dbfa]: FINISHED 
[debug] [2020-04-23T23:08:10.011Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: exited 
[debug] [2020-04-23T23:08:10.011Z] [worker-~diagnostic~-3606c03c-74e7-4a9b-9e28-36a3969faf96]: FINISHED 
[debug] [2020-04-23T23:08:10.510Z] [runtime-status] [74307] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:10.512Z] [runtime-status] [74307] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:10.514Z] [runtime-status] [74307] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:10.515Z] [runtime-status] [74307] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:10.517Z] [runtime-status] [74307] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:10.585Z] [runtime-status] [74307] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:10.586Z] [runtime-status] [74307] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:10.587Z] [runtime-status] [74307] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:10.587Z] [runtime-status] [74307] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:10.587Z] [runtime-status] [74307] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:10.591Z] [runtime-status] [74307] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:10.984Z] [runtime-status] [74307] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:11.048Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: IDLE 
[debug] [2020-04-23T23:08:14.494Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.494Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:08:14.494Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.494Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:14.595Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:08:15.598Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:08:15.598Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: FINISHING 
[debug] [2020-04-23T23:08:15.598Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:08:15.599Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T23:08:15.603Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:08:15.603Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:08:15.603Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:08:15.604Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74321.sock 
[debug] [2020-04-23T23:08:15.604Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: BUSY 
[debug] [2020-04-23T23:08:15.606Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: exited 
[debug] [2020-04-23T23:08:15.606Z] [worker-~diagnostic~-8970dc98-2845-4448-8049-b3edc4240026]: FINISHED 
[debug] [2020-04-23T23:08:15.834Z] [runtime-status] [74321] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:15.836Z] [runtime-status] [74321] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:15.839Z] [runtime-status] [74321] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:15.841Z] [runtime-status] [74321] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:15.843Z] [runtime-status] [74321] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:15.871Z] [runtime-status] [74321] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:15.872Z] [runtime-status] [74321] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:15.873Z] [runtime-status] [74321] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:15.873Z] [runtime-status] [74321] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:15.873Z] [runtime-status] [74321] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:15.875Z] [runtime-status] [74321] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:16.033Z] [runtime-status] [74321] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:16.055Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: IDLE 
[debug] [2020-04-23T23:08:17.557Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:08:17.557Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:08:17.557Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:08:17.557Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:08:17.560Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:08:17.560Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T23:08:17.560Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:08:17.561Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74330.sock 
[debug] [2020-04-23T23:08:17.561Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: BUSY 
[debug] [2020-04-23T23:08:17.765Z] [runtime-status] [74330] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:17.766Z] [runtime-status] [74330] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:17.768Z] [runtime-status] [74330] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:17.769Z] [runtime-status] [74330] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:17.770Z] [runtime-status] [74330] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:17.792Z] [runtime-status] [74330] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:17.792Z] [runtime-status] [74330] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:17.793Z] [runtime-status] [74330] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:17.793Z] [runtime-status] [74330] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:17.793Z] [runtime-status] [74330] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:17.794Z] [runtime-status] [74330] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:17.926Z] [runtime-status] [74330] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:17.945Z] [runtime-status] [74330] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:08:17.945Z] [runtime-status] [74330] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:08:17.945Z] [runtime-status] [74330] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:08:17.947Z] [runtime-status] [74330] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74330.sock 
[debug] [2020-04-23T23:08:17.950Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:08:17.956Z] [runtime-status] [74330] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T23:08:17.959Z] [runtime-status] [74330] Ephemeral server survived. 
[debug] [2020-04-23T23:08:17.960Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T23:08:17.961Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T23:08:17.961Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:08:17.961Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T23:08:17.964Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:08:17.964Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T23:08:17.964Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:08:17.964Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74331.sock 
[debug] [2020-04-23T23:08:17.964Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: BUSY 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:08:17.964Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: IDLE 
[debug] [2020-04-23T23:08:17.964Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:08:18.156Z] [runtime-status] [74331] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:18.157Z] [runtime-status] [74331] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:18.159Z] [runtime-status] [74331] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:18.160Z] [runtime-status] [74331] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:18.161Z] [runtime-status] [74331] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:18.183Z] [runtime-status] [74331] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:18.183Z] [runtime-status] [74331] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:18.183Z] [runtime-status] [74331] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:18.184Z] [runtime-status] [74331] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:18.184Z] [runtime-status] [74331] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:18.185Z] [runtime-status] [74331] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:18.308Z] [runtime-status] [74331] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:18.332Z] [runtime-status] [74331] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:08:18.333Z] [runtime-status] [74331] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:08:18.333Z] [runtime-status] [74331] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:08:18.335Z] [runtime-status] [74331] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74331.sock 
[debug] [2020-04-23T23:08:18.337Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:08:18.358Z] [runtime-status] [74331] Ephemeral server handling POST request 
[debug] [2020-04-23T23:08:18.360Z] [runtime-status] [74331] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T23:08:18.430Z] [runtime-status] [74331] Ephemeral server survived. 
[debug] [2020-04-23T23:08:18.445Z] Apr 24, 2020 2:08:18 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/. {"user":"Unhandled error StripeAuthenticationError: You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/."}
[info] >      at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21) {"user":"    at IncomingMessage.<anonymous> (/Users/yoved/Repos/joie/functions/node_modules/stripe/lib/StripeResource.js:169:21)"}
[info] >      at Object.onceWrapper (events.js:417:28) {"user":"    at Object.onceWrapper (events.js:417:28)"}
[info] >      at IncomingMessage.emit (events.js:323:22) {"user":"    at IncomingMessage.emit (events.js:323:22)"}
[info] >      at endReadableNT (_stream_readable.js:1204:12) {"user":"    at endReadableNT (_stream_readable.js:1204:12)"}
[info] >      at processTicksAndRejections (internal/process/task_queues.js:84:21) { {"user":"    at processTicksAndRejections (internal/process/task_queues.js:84:21) {"}
[info] >    type: 'StripeAuthenticationError', {"user":"  type: 'StripeAuthenticationError',"}
[info] >    raw: { {"user":"  raw: {"}
[info] >      message: "You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.", {"user":"    message: \"You did not provide an API key. You need to provide your API key in the Authorization header, using Bearer auth (e.g. 'Authorization: Bearer YOUR_SECRET_KEY'). See https://stripe.com/docs/api#authentication for details, or we can help at https://support.stripe.com/.\","}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',"}
[info] >      headers: { {"user":"    headers: {"}
[info] >        server: 'nginx', {"user":"      server: 'nginx',"}
[info] >        date: 'Thu, 23 Apr 2020 23:08:18 GMT', {"user":"      date: 'Thu, 23 Apr 2020 23:08:18 GMT',"}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',"}
[info] >        'content-length': '343', {"user":"      'content-length': '343',"}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',"}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',"}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',"}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',"}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',"}
[info] >        'www-authenticate': 'Basic realm="Stripe"', {"user":"      'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >      }, {"user":"    },"}
[info] >      statusCode: 401, {"user":"    statusCode: 401,"}
[info] >      requestId: undefined {"user":"    requestId: undefined"}
[info] >    }, {"user":"  },"}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',"}
[info] >    code: undefined, {"user":"  code: undefined,"}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,"}
[info] >    param: undefined, {"user":"  param: undefined,"}
[info] >    detail: undefined, {"user":"  detail: undefined,"}
[info] >    headers: { {"user":"  headers: {"}
[info] >      server: 'nginx', {"user":"    server: 'nginx',"}
[info] >      date: 'Thu, 23 Apr 2020 23:08:18 GMT', {"user":"    date: 'Thu, 23 Apr 2020 23:08:18 GMT',"}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',"}
[info] >      'content-length': '343', {"user":"    'content-length': '343',"}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',"}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',"}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',"}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',"}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',"}
[info] >      'www-authenticate': 'Basic realm="Stripe"', {"user":"    'www-authenticate': 'Basic realm=\"Stripe\"',"}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}
[info] >    }, {"user":"  },"}
[info] >    requestId: undefined, {"user":"  requestId: undefined,"}
[info] >    statusCode: 401, {"user":"  statusCode: 401,"}
[info] >    charge: undefined, {"user":"  charge: undefined,"}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,"}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,"}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,"}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,"}
[info] >    source: undefined {"user":"  source: undefined"}
[info] >  } {"user":"}"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:08:18.929Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: IDLE 
[debug] [2020-04-23T23:08:18.930Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:08:36.807Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:08:37.808Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:08:37.808Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: FINISHING 
[debug] [2020-04-23T23:08:37.808Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:08:37.808Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: FINISHING 
[debug] [2020-04-23T23:08:37.808Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:08:37.808Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: FINISHING 
[debug] [2020-04-23T23:08:37.812Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:08:37.812Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:08:37.812Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:08:37.812Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74354.sock 
[debug] [2020-04-23T23:08:37.813Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: BUSY 
[debug] [2020-04-23T23:08:37.816Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: exited 
[debug] [2020-04-23T23:08:37.816Z] [worker-~diagnostic~-9d55cf25-de64-4b35-ae8c-4645392fb1cb]: FINISHED 
[debug] [2020-04-23T23:08:37.816Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: exited 
[debug] [2020-04-23T23:08:37.816Z] [worker-stripeAttachSource-b9789bcd-6da4-4f4e-9537-2c19bfa79555]: FINISHED 
[debug] [2020-04-23T23:08:37.816Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: exited 
[debug] [2020-04-23T23:08:37.816Z] [worker-stripeAttachSource-735b4ed5-ca86-4b7a-a976-2e1ef4be5807]: FINISHED 
[debug] [2020-04-23T23:08:38.053Z] [runtime-status] [74354] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:38.055Z] [runtime-status] [74354] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:38.057Z] [runtime-status] [74354] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:38.058Z] [runtime-status] [74354] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:38.059Z] [runtime-status] [74354] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:38.086Z] [runtime-status] [74354] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:38.086Z] [runtime-status] [74354] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:38.087Z] [runtime-status] [74354] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:38.087Z] [runtime-status] [74354] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:38.088Z] [runtime-status] [74354] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:38.090Z] [runtime-status] [74354] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:38.262Z] [runtime-status] [74354] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:38.286Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: IDLE 
[debug] [2020-04-23T23:08:48.866Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:08:49.869Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:08:49.869Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: FINISHING 
[debug] [2020-04-23T23:08:49.869Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:08:49.869Z] [worker-pool] Cleaned up workers for stripeAttachSource: 2 --> 0 
[debug] [2020-04-23T23:08:49.872Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:08:49.873Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:08:49.873Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:08:49.873Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74390.sock 
[debug] [2020-04-23T23:08:49.873Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: BUSY 
[debug] [2020-04-23T23:08:49.874Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: exited 
[debug] [2020-04-23T23:08:49.874Z] [worker-~diagnostic~-56c432b0-3b89-4d41-9f37-baf47792cf62]: FINISHED 
[debug] [2020-04-23T23:08:50.107Z] [runtime-status] [74390] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:50.108Z] [runtime-status] [74390] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:50.109Z] [runtime-status] [74390] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:50.110Z] [runtime-status] [74390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:50.112Z] [runtime-status] [74390] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:50.138Z] [runtime-status] [74390] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:50.138Z] [runtime-status] [74390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:50.139Z] [runtime-status] [74390] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:50.139Z] [runtime-status] [74390] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:50.139Z] [runtime-status] [74390] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:50.141Z] [runtime-status] [74390] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:50.274Z] [runtime-status] [74390] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:50.301Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: IDLE 
[debug] [2020-04-23T23:08:54.131Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.131Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.131Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.131Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.131Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.132Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.231Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.231Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.231Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.231Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.232Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:08:54.232Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:08:54.232Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:08:55.237Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:08:55.238Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: FINISHING 
[debug] [2020-04-23T23:08:55.238Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:08:55.244Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:08:55.244Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:08:55.244Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:08:55.244Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74405.sock 
[debug] [2020-04-23T23:08:55.244Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: BUSY 
[debug] [2020-04-23T23:08:55.245Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: exited 
[debug] [2020-04-23T23:08:55.245Z] [worker-~diagnostic~-51e7d300-c748-4fc2-94b5-a47c39a64020]: FINISHED 
[debug] [2020-04-23T23:08:55.460Z] [runtime-status] [74405] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:08:55.461Z] [runtime-status] [74405] Disabled runtime features: undefined 
[debug] [2020-04-23T23:08:55.463Z] [runtime-status] [74405] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:55.464Z] [runtime-status] [74405] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:55.465Z] [runtime-status] [74405] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:08:55.490Z] [runtime-status] [74405] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:08:55.490Z] [runtime-status] [74405] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:55.491Z] [runtime-status] [74405] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:08:55.491Z] [runtime-status] [74405] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:08:55.491Z] [runtime-status] [74405] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:08:55.493Z] [runtime-status] [74405] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:08:55.646Z] [runtime-status] [74405] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:08:55.668Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: IDLE 
[debug] [2020-04-23T23:09:01.198Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:09:01.297Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:09:02.301Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:09:02.302Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: FINISHING 
[debug] [2020-04-23T23:09:02.302Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:09:02.316Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:09:02.316Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:09:02.316Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:09:02.316Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74420.sock 
[debug] [2020-04-23T23:09:02.316Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: BUSY 
[debug] [2020-04-23T23:09:02.317Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: exited 
[debug] [2020-04-23T23:09:02.317Z] [worker-~diagnostic~-92838753-a818-45c3-af47-28f3caacf443]: FINISHED 
[debug] [2020-04-23T23:09:02.577Z] [runtime-status] [74420] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:02.578Z] [runtime-status] [74420] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:02.580Z] [runtime-status] [74420] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:02.581Z] [runtime-status] [74420] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:02.583Z] [runtime-status] [74420] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:02.608Z] [runtime-status] [74420] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:02.609Z] [runtime-status] [74420] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:02.609Z] [runtime-status] [74420] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:02.610Z] [runtime-status] [74420] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:02.610Z] [runtime-status] [74420] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:02.611Z] [runtime-status] [74420] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:02.743Z] [runtime-status] [74420] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:02.762Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: IDLE 
[debug] [2020-04-23T23:09:06.027Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:06.028Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:09:07.032Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:09:07.032Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: FINISHING 
[debug] [2020-04-23T23:09:07.032Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:09:07.037Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:09:07.037Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:09:07.037Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:09:07.037Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74438.sock 
[debug] [2020-04-23T23:09:07.037Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: BUSY 
[debug] [2020-04-23T23:09:07.040Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: exited 
[debug] [2020-04-23T23:09:07.040Z] [worker-~diagnostic~-8f59232c-3534-4238-a88e-1398631eff12]: FINISHED 
[debug] [2020-04-23T23:09:07.246Z] [runtime-status] [74438] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:07.247Z] [runtime-status] [74438] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:07.249Z] [runtime-status] [74438] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:07.250Z] [runtime-status] [74438] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:07.251Z] [runtime-status] [74438] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:07.273Z] [runtime-status] [74438] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:07.273Z] [runtime-status] [74438] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:07.274Z] [runtime-status] [74438] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:07.274Z] [runtime-status] [74438] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:07.274Z] [runtime-status] [74438] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:07.275Z] [runtime-status] [74438] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:07.401Z] [runtime-status] [74438] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:07.419Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: IDLE 
[debug] [2020-04-23T23:09:14.287Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:09:14.288Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:09:14.288Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:09:14.288Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:09:14.291Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:09:14.291Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T23:09:14.292Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:09:14.292Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74447.sock 
[debug] [2020-04-23T23:09:14.292Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: BUSY 
[debug] [2020-04-23T23:09:14.492Z] [runtime-status] [74447] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:14.493Z] [runtime-status] [74447] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:14.495Z] [runtime-status] [74447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:14.495Z] [runtime-status] [74447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:14.497Z] [runtime-status] [74447] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:14.518Z] [runtime-status] [74447] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:14.519Z] [runtime-status] [74447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:14.519Z] [runtime-status] [74447] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:14.519Z] [runtime-status] [74447] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:14.519Z] [runtime-status] [74447] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:14.521Z] [runtime-status] [74447] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:14.647Z] [runtime-status] [74447] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:14.665Z] [runtime-status] [74447] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:09:14.665Z] [runtime-status] [74447] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:09:14.665Z] [runtime-status] [74447] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:09:14.668Z] [runtime-status] [74447] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74447.sock 
[debug] [2020-04-23T23:09:14.672Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:09:14.676Z] [runtime-status] [74447] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T23:09:14.680Z] [runtime-status] [74447] Ephemeral server survived. 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:09:14.681Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: IDLE 
[debug] [2020-04-23T23:09:14.681Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:09:14.682Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:09:14.682Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:09:14.682Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:09:14.682Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T23:09:14.682Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:09:14.682Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74447.sock 
[debug] [2020-04-23T23:09:14.682Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: BUSY 
[debug] [2020-04-23T23:09:14.694Z] [runtime-status] [74447] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:09:14.694Z] [runtime-status] [74447] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:09:14.695Z] [runtime-status] [74447] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:09:14.695Z] [runtime-status] [74447] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74447.sock 
[debug] [2020-04-23T23:09:14.697Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:09:14.706Z] [runtime-status] [74447] Ephemeral server handling POST request 
[debug] [2020-04-23T23:09:14.707Z] [runtime-status] [74447] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T23:09:14.778Z] [runtime-status] [74447] Ephemeral server survived. 
[debug] [2020-04-23T23:09:14.794Z] Apr 24, 2020 2:09:14 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error RangeError: Maximum call stack size exceeded {"user":"Unhandled error RangeError: Maximum call stack size exceeded"}
[info] >      at baseKeys (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:3484:16) {"user":"    at baseKeys (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:3484:16)"}
[info] >      at keys (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13307:60) {"user":"    at keys (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13307:60)"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4900:21 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4900:21"}
[info] >      at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24) {"user":"    at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24)"}
[info] >      at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7) {"user":"    at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7)"}
[info] >      at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18) {"user":"    at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18)"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15"}
[info] >      at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24) {"user":"    at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24)"}
[info] >      at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7) {"user":"    at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7)"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:09:14.831Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: IDLE 
[debug] [2020-04-23T23:09:14.831Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:09:30.641Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:09:31.643Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:09:31.643Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: FINISHING 
[debug] [2020-04-23T23:09:31.643Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:09:31.643Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: FINISHING 
[debug] [2020-04-23T23:09:31.646Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:09:31.646Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:09:31.646Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:09:31.646Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74463.sock 
[debug] [2020-04-23T23:09:31.646Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: BUSY 
[debug] [2020-04-23T23:09:31.649Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: exited 
[debug] [2020-04-23T23:09:31.649Z] [worker-~diagnostic~-9c2e8285-fa5b-4b28-919c-ec8eee2dee41]: FINISHED 
[debug] [2020-04-23T23:09:31.649Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: exited 
[debug] [2020-04-23T23:09:31.649Z] [worker-stripeAttachSource-e4cd3f68-f212-4d7c-82f3-0664fe35152d]: FINISHED 
[debug] [2020-04-23T23:09:32.027Z] [runtime-status] [74463] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:32.029Z] [runtime-status] [74463] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:32.031Z] [runtime-status] [74463] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:32.033Z] [runtime-status] [74463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:32.035Z] [runtime-status] [74463] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:32.092Z] [runtime-status] [74463] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:32.093Z] [runtime-status] [74463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:32.094Z] [runtime-status] [74463] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:32.094Z] [runtime-status] [74463] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:32.094Z] [runtime-status] [74463] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:32.097Z] [runtime-status] [74463] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:32.447Z] [runtime-status] [74463] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:32.492Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: IDLE 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/config.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/config.js changed, reloading triggers 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/helpers.js changed, reloading triggers 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/user.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.456Z] File /Users/yoved/Repos/joie/functions/lib/user.js changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/post.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/post.js changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/stripe.js changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/index.js.map changed, reloading triggers 
[debug] [2020-04-23T23:09:35.457Z] File /Users/yoved/Repos/joie/functions/lib/index.js changed, reloading triggers 
[debug] [2020-04-23T23:09:36.459Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:09:36.459Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: FINISHING 
[debug] [2020-04-23T23:09:36.459Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:09:36.459Z] [worker-pool] Cleaned up workers for stripeAttachSource: 1 --> 0 
[debug] [2020-04-23T23:09:36.465Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:09:36.466Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:09:36.466Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:09:36.466Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74477.sock 
[debug] [2020-04-23T23:09:36.466Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: BUSY 
[debug] [2020-04-23T23:09:36.467Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: exited 
[debug] [2020-04-23T23:09:36.467Z] [worker-~diagnostic~-d63676ad-33cd-43b6-bb72-a36b744adef5]: FINISHED 
[debug] [2020-04-23T23:09:36.685Z] [runtime-status] [74477] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:36.687Z] [runtime-status] [74477] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:36.688Z] [runtime-status] [74477] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:36.689Z] [runtime-status] [74477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:36.691Z] [runtime-status] [74477] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:36.714Z] [runtime-status] [74477] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:36.715Z] [runtime-status] [74477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:36.715Z] [runtime-status] [74477] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:36.716Z] [runtime-status] [74477] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:36.716Z] [runtime-status] [74477] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:36.717Z] [runtime-status] [74477] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:36.885Z] [runtime-status] [74477] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:36.907Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: IDLE 
[debug] [2020-04-23T23:09:38.504Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2020-04-23T23:09:38.505Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:09:38.505Z] Accepted request OPTIONS /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:09:38.505Z] [worker-pool] Cleaned up workers for ~diagnostic~: 2 --> 1 
[debug] [2020-04-23T23:09:38.509Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:09:38.509Z] [worker-pool] Adding worker with key stripeAttachSource, total=1 
[debug] [2020-04-23T23:09:38.509Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:09:38.509Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74478.sock 
[debug] [2020-04-23T23:09:38.509Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: BUSY 
[debug] [2020-04-23T23:09:38.712Z] [runtime-status] [74478] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:38.713Z] [runtime-status] [74478] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:38.715Z] [runtime-status] [74478] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:38.716Z] [runtime-status] [74478] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:38.717Z] [runtime-status] [74478] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:38.739Z] [runtime-status] [74478] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:38.739Z] [runtime-status] [74478] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:38.740Z] [runtime-status] [74478] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:38.740Z] [runtime-status] [74478] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:38.740Z] [runtime-status] [74478] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:38.742Z] [runtime-status] [74478] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:38.870Z] [runtime-status] [74478] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:38.891Z] [runtime-status] [74478] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:09:38.891Z] [runtime-status] [74478] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:09:38.891Z] [runtime-status] [74478] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:09:38.894Z] [runtime-status] [74478] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74478.sock 
[debug] [2020-04-23T23:09:38.897Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:09:38.903Z] [runtime-status] [74478] Ephemeral server handling OPTIONS request 
[debug] [2020-04-23T23:09:38.906Z] [runtime-status] [74478] Ephemeral server survived. 
[debug] [2020-04-23T23:09:38.907Z] [work-queue] {"queueLength":1,"workRunningCount":1}
[debug] [2020-04-23T23:09:38.907Z] [work-queue] {"queueLength":0,"workRunningCount":2}
[debug] [2020-04-23T23:09:38.907Z] Accepted request POST /joie-app/us-central1/stripeAttachSource --> stripeAttachSource
[debug] [2020-04-23T23:09:38.907Z] ID Token: eyJhbGciOiJSUzI1NiIsImtpZCI6IjVlOWVlOTdjODQwZjk3ZTAyNTM2ODhhM2I3ZTk0NDczZTUyOGE3YjUiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiWWlub24gT3ZlZCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS0vQU9oMTRHanVfTVZBejlIeUpuaWxOZDhaMUh3NHdvWDZERnBUdTI5UEZCM29NQSIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9qb2llLWFwcCIsImF1ZCI6ImpvaWUtYXBwIiwiYXV0aF90aW1lIjoxNTg3Njc0Nzc4LCJ1c2VyX2lkIjoiR0dLdVdaSENJWVVXb1RSczJ5ekQzZFlleFJyMSIsInN1YiI6IkdHS3VXWkhDSVlVV29UUnMyeXpEM2RZZXhScjEiLCJpYXQiOjE1ODc2ODE3MzMsImV4cCI6MTU4NzY4NTMzMywiZW1haWwiOiJ5aW5vbm92ZWRAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZ29vZ2xlLmNvbSI6WyIxMTYyNTQ1NDkwODcyNzcwMTA4NDQiXSwiZW1haWwiOlsieWlub25vdmVkQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6Imdvb2dsZS5jb20ifX0.kYZDT1gIcAACrTCUB9GH7w6k-iR0Aww7SwUnvYG1QVHEeUQEOc6SbP7OaottM9NEaukv1i1jMBvCw416SBCPr060oFlFutOdbfLHdj17VQou8QmzzB1k2_vwNUvTWxrMur2CHellvwZD394eLEoGtEQS5XqG77FWVQNFbO6B41iXmpt9FPFTAW4MbFDPUI0DpCCpFN111yZn3XNTzv3CCDWK26ZRZ3fFyl-M7FF2OGrmlu4TOYFCiQVf2VFHsPNJUrm8V7xSDdALR-gE1derduXMFmn3uEx6bii32hTLeAnlgenmu8v86cY-MDorRlXpEXdW3PFziwiWqDm5Pk-kvw
[debug] [2020-04-23T23:09:38.910Z] [worker-pool] addWorker(stripeAttachSource) 
[debug] [2020-04-23T23:09:38.910Z] [worker-pool] Adding worker with key stripeAttachSource, total=2 
[debug] [2020-04-23T23:09:38.910Z] [worker-pool] submitWork(triggerId=stripeAttachSource) 
[debug] [2020-04-23T23:09:38.910Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74479.sock 
[debug] [2020-04-23T23:09:38.910Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: BUSY 
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:09:38.911Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: IDLE 
[debug] [2020-04-23T23:09:38.911Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2020-04-23T23:09:39.103Z] [runtime-status] [74479] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:09:39.104Z] [runtime-status] [74479] Disabled runtime features: undefined 
[debug] [2020-04-23T23:09:39.105Z] [runtime-status] [74479] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:39.106Z] [runtime-status] [74479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:39.107Z] [runtime-status] [74479] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:09:39.129Z] [runtime-status] [74479] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:09:39.130Z] [runtime-status] [74479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:39.130Z] [runtime-status] [74479] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:09:39.131Z] [runtime-status] [74479] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:09:39.131Z] [runtime-status] [74479] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:09:39.132Z] [runtime-status] [74479] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:09:39.257Z] [runtime-status] [74479] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:09:39.280Z] [runtime-status] [74479] Trigger "stripeAttachSource" has been found, beginning invocation! 
[info] i  functions: Beginning execution of "stripeAttachSource"
[debug] [2020-04-23T23:09:39.280Z] [runtime-status] [74479] triggerDefinition {"httpsTrigger":{},"labels":{"deployment-callable":"true"},"name":"stripeAttachSource","entryPoint":"stripeAttachSource"} 
[debug] [2020-04-23T23:09:39.280Z] [runtime-status] [74479] Running stripeAttachSource in mode HTTPS 
[debug] [2020-04-23T23:09:39.282Z] [runtime-status] [74479] Attempting to listen to socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74479.sock 
[debug] [2020-04-23T23:09:39.286Z] [functions] Runtime ready! Sending request! 
[debug] [2020-04-23T23:09:39.305Z] [runtime-status] [74479] Ephemeral server handling POST request 
[debug] [2020-04-23T23:09:39.307Z] [runtime-status] [74479] Callable functions auth override {"key":"x-callable-context-auth","value":"{\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"token\":{\"name\":\"Yinon Oved\",\"picture\":\"https://lh3.googleusercontent.com/a-/AOh14Gju_MVAz9HyJnilNd8Z1Hw4woX6DFpTu29PFB3oMA\",\"iss\":\"https://securetoken.google.com/joie-app\",\"aud\":\"joie-app\",\"auth_time\":1587674778,\"user_id\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"sub\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\",\"iat\":1587681733,\"exp\":1587685333,\"email\":\"yinonoved@gmail.com\",\"email_verified\":true,\"firebase\":{\"identities\":{\"google.com\":[\"116254549087277010844\"],\"email\":[\"yinonoved@gmail.com\"]},\"sign_in_provider\":\"google.com\"},\"uid\":\"GGKuWZHCIYUWoTRs2yzD3dYexRr1\"}}"} 
[debug] [2020-04-23T23:09:39.381Z] [runtime-status] [74479] Ephemeral server survived. 
[debug] [2020-04-23T23:09:39.397Z] Apr 24, 2020 2:09:39 AM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.

[info] >  Unhandled error RangeError: Maximum call stack size exceeded {"user":"Unhandled error RangeError: Maximum call stack size exceeded"}
[info] >      at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18) {"user":"    at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18)"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15"}
[info] >      at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24) {"user":"    at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24)"}
[info] >      at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7) {"user":"    at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7)"}
[info] >      at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18) {"user":"    at encode (/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/providers/https.js:179:18)"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13401:38"}
[info] >      at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15 {"user":"    at /Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:4905:15"}
[info] >      at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24) {"user":"    at baseForOwn (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:2990:24)"}
[info] >      at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7) {"user":"    at Function.mapValues (/Users/yoved/Repos/joie/functions/node_modules/lodash/lodash.js:13400:7)"}
[info] i  functions: Finished "stripeAttachSource" in ~1s
[debug] [2020-04-23T23:09:39.432Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: IDLE 
[debug] [2020-04-23T23:09:39.432Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2020-04-23T23:11:19.420Z] File /Users/yoved/Repos/joie/functions/src/stripe.ts changed, reloading triggers 
[debug] [2020-04-23T23:11:20.420Z] [worker-pool] Shutting down IDLE worker (~diagnostic~) 
[debug] [2020-04-23T23:11:20.421Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: FINISHING 
[debug] [2020-04-23T23:11:20.421Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:11:20.421Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: FINISHING 
[debug] [2020-04-23T23:11:20.421Z] [worker-pool] Shutting down IDLE worker (stripeAttachSource) 
[debug] [2020-04-23T23:11:20.421Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: FINISHING 
[debug] [2020-04-23T23:11:20.426Z] [worker-pool] addWorker(~diagnostic~) 
[debug] [2020-04-23T23:11:20.426Z] [worker-pool] Adding worker with key ~diagnostic~, total=2 
[debug] [2020-04-23T23:11:20.426Z] [worker-pool] submitWork(triggerId=) 
[debug] [2020-04-23T23:11:20.427Z] [worker-~diagnostic~-43d576cd-d102-4320-8b61-90d420cfe311]: Assigning socketPath: /var/folders/4r/7fk7hhxn6xjc01htp5v53cjdl5jgzl/T/fire_emu_74527.sock 
[debug] [2020-04-23T23:11:20.427Z] [worker-~diagnostic~-43d576cd-d102-4320-8b61-90d420cfe311]: BUSY 
[debug] [2020-04-23T23:11:20.431Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: exited 
[debug] [2020-04-23T23:11:20.431Z] [worker-~diagnostic~-30944bde-2946-4c0d-a1b8-130a5c916939]: FINISHED 
[debug] [2020-04-23T23:11:20.431Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: exited 
[debug] [2020-04-23T23:11:20.431Z] [worker-stripeAttachSource-5a4766e9-40ca-4669-af3d-93f6b981078d]: FINISHED 
[debug] [2020-04-23T23:11:20.431Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: exited 
[debug] [2020-04-23T23:11:20.431Z] [worker-stripeAttachSource-d830721f-23e3-45a1-9526-1b061cf4a908]: FINISHED 
[debug] [2020-04-23T23:11:20.804Z] [runtime-status] [74527] Functions runtime initialized. {"cwd":"/Users/yoved/Repos/joie/functions","node_version":"12.16.1"} 
[debug] [2020-04-23T23:11:20.805Z] [runtime-status] [74527] Disabled runtime features: undefined 
[debug] [2020-04-23T23:11:20.807Z] [runtime-status] [74527] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:11:20.808Z] [runtime-status] [74527] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:11:20.809Z] [runtime-status] [74527] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] 
[debug] [2020-04-23T23:11:20.844Z] [runtime-status] [74527] Checked functions.config() {"config":{}} 
[debug] [2020-04-23T23:11:20.844Z] [runtime-status] [74527] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:11:20.845Z] [runtime-status] [74527] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"} 
[debug] [2020-04-23T23:11:20.845Z] [runtime-status] [74527] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.6.0","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-functions/lib/index.js"} 
[debug] [2020-04-23T23:11:20.845Z] [runtime-status] [74527] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"8.9.2","resolution":"/Users/yoved/Repos/joie/functions/node_modules/firebase-admin/lib/index.js"}} 
[debug] [2020-04-23T23:11:20.848Z] [runtime-status] [74527] initializeApp(DEFAULT) {"databaseURL":"https://joie-app.firebaseio.com","storageBucket":"joie-app.appspot.com","projectId":"joie-app"} 
[debug] [2020-04-23T23:11:21.156Z] [runtime-status] [74527] config() parent accessed! {"parentKey":"stripe","parentConfig":{}} 
[warn] ⚠  Non-existent functions.config() value requested!
   - Path: "stripe.token"
   - Learn more at https://firebase.google.com/docs/functions/local-emulator
[debug] [2020-04-23T23:11:21.210Z] [worker-~diagnostic~-43d576cd-d102-4320-8b61-90d420cfe311]: IDLE 
