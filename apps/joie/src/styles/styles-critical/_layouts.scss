@use 'sass:map';

$headings: 'h1, h2, h3, h4, h5, h6';

$layout-breakpoint-xs: 700px;
$layout-breakpoint-sm: 960px;
$layout-breakpoint-lg: 1365px;

:root {
  --layout-breakpoint-xs: #{$layout-breakpoint-xs};
  --layout-breakpoint-sm: #{$layout-breakpoint-sm};
  --layout-breakpoint-lg: #{$layout-breakpoint-lg};
}

body {
  padding: env(safe-area-inset-top, 20px) env(safe-area-inset-right, 20px)
    env(safe-area-inset-bottom, 20px) env(safe-area-inset-left, 20px);
}

#{$headings} {
  &:last-child {
    margin-bottom: 0;
  }
}

.container {
  // --max-inline-size: #{$max-inline-size};
  --container-inline-size: 100%;
  --max-inline-size: calc(var(--container-inline-size) - var(--joie-gutter) * 2);

  width: 100%;
  inline-size: 100%;
  max-width: var(--max-inline-size);
  max-inline-size: var(--max-inline-size);
  margin: 0 auto;

  @media (min-width: $layout-breakpoint-lg) {
    &:not(&-fluid) {
      --container-inline-size: calc(#{$layout-breakpoint-lg});
    }
    &#{&}-condense {
      --container-inline-size: #{$layout-breakpoint-sm};
    }
    &#{&}-ultra-condense {
      --container-inline-size: #{$layout-breakpoint-xs};
    }
  }
}

[class*='layout-columns'] {
  $column-items-min-inline-size-variable-name: --column-items-min-inline-size;
  $items-min-inline-sizes: (
    'sm': 150px,
    'md': 250px,
    'lg': 350px,
  );
  @each $key, $value in $items-min-inline-sizes {
    @at-root [class~='layout-columns-#{$key}'i] {
      #{$column-items-min-inline-size-variable-name}: #{map.get($items-min-inline-sizes, #{$key})};
    }
  }
  width: 100%;
  inline-size: 100%;
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(
      var(#{$column-items-min-inline-size-variable-name}, #{map.get($items-min-inline-sizes, lg)}),
      1fr
    )
  );
  grid-column-gap: var(--joie-gutter);
}

[class*='layout-rows'] {
  $row-spacing-size-variable-name: --row-spacing-size;
  $spacing-sizes: (
    'sm': calc(var(--joie-gutter) * 2),
    'md': calc(var(--joie-gutter) * 3),
    'lg': calc(var(--joie-gutter) * 4),
  );
  @each $key, $value in $spacing-sizes {
    @at-root [class~='layout-rows-#{$key}'i] {
      #{$row-spacing-size-variable-name}: #{map.get($spacing-sizes, #{$key})};
    }
  }
  display: grid;
  grid-row-gap: var(#{$row-spacing-size-variable-name}, #{map.get($spacing-sizes, md)});
  > {
    #{$headings} {
      margin: 0;
    }
  }
}

.layout-center {
  place-content: center;
  place-items: center;
}

// $space-row-variable-name: --gutter-row;
// $space-column-variable-name: --gutter-column;
// $size: (
//   'sm': 10px,
//   'md': 20px,
//   'lg': 30px,
// );
// .layout {
//   &-spacing-block {
//     &-sm {
//       #{$space-row-variable-name}: #{map.get($size, sm)};
//     }
//     &-md {
//       #{$space-row-variable-name}: #{map.get($size, md)};
//     }
//     &-lg {
//       #{$space-row-variable-name}: #{map.get($size, lg)};
//     }
//   }
//   &-spacing-inline {
//     &-sm {
//       #{$space-column-variable-name}: #{map.get($size, sm)};
//     }
//     &-md {
//       #{$space-column-variable-name}: #{map.get($size, md)};
//     }
//     &-lg {
//       #{$space-column-variable-name}: #{map.get($size, lg)};
//     }
//   }

//   &-flex {
//     display: flex;
//     place-items: center;
//     > * + * {
//       margin-left: var(#{$space-column-variable-name});
//       margin-inline-start: var(#{$space-column-variable-name});
//       margin-bottom: var(#{$space-row-variable-name});
//       margin-block-end: var(#{$space-row-variable-name});
//     }
//   }

//   &-grid {
//     display: grid;
//     grid-gap: var(#{$space-row-variable-name}, 0) var(#{$space-column-variable-name}, 0);
//     &#{&}-inline-features {
//       width: 100%;
//       // place-items: center;
//       // display: grid;
//       grid-template-columns: repeat(auto-fit, minmax(150px, auto));
//       // grid-gap: 20px;
//       // display: flex;
//       // flex-wrap: wrap;
//       // justify-content: center;
//       // > * {
//       //   flex: 0 1 auto;
//       //   margin: 5px;
//       // }
//     }
//   }
// }

main {
  > section {
    content-visibility: auto;
    contain-intrinsic-size: 500px;
    --section-block-gutter: 60px;
    padding: var(--section-block-gutter) 0;
    &.section-block-start-offset {
      padding-top: 0;
      margin-top: calc(-1 * var(--section-block-gutter));
    }

    // .section-context {
    //   place-items: center;
    //   display: grid;
    //   grid-row-gap: 35px;
    // }
  }
}

.dialog-as-drawer {
  align-self: stretch;
  .mat-dialog-content {
    flex-grow: 1;
    max-height: initial;
  }
}
