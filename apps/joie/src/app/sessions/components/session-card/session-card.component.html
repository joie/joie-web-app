<ng-container *ngIf="showThumbnail; else card">
  <mat-card>
    <!-- <div class="banner">Hurry up! Only 2 spots left</div> -->

    <div fxLayout="row" fxLayoutAlign="center center">
      <img [fireStorageRef]="session.thumbRef" loading="lazy" alt="Thumbnail image of a session {{ session.title }}" mat-card-image>
    </div>
    <mat-card-content>
      <button mat-raised-button color="accent" style="width: 100%;"><h3>Enroll In Session</h3></button>
      <div fxLayout="row" fxLayoutAlign="space-between">
        <div fxLayout="column">
          <div>{{ session?.title }}</div>
          <div>{{ session?.owner?.displayName }}</div>
        </div>
        <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
          <mat-icon>favorite_border</mat-icon>
          <div>{{ session?.recommendationPercentage }} %</div>
        </div>
      </div>
      <div fxLayout="row" fxLayoutAlign="space-between center">
        <div>{{ session?.price?.display | currency: session?.price?.currency }}</div>

        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_horiz</mat-icon>
        </button>
      </div>
    </mat-card-content>
  </mat-card>
</ng-container>

<ng-template #card>
  <mat-card>
    <div class="banner">Hurry up! Only 2 spots left</div>
    <div class="text-center">
      <mat-card-subtitle>{{ session?.pillar }}</mat-card-subtitle>
      <mat-card-title>{{ session?.title }}</mat-card-title>
    </div>
    <mat-card-content>
      <img mat-card-avatar src="{{ session?.owner?.photoURL }}" alt="">
      <h3>{{ session?.owner?.displayName }}</h3>
      <h3>{{ session?.createdAt }}</h3>
      <h3>
        {{ session?.duration?.amount + session?.duration?.unit }} -
        {{ session?.type }}
      </h3>
      <h3>
        <!-- TODO implement price pipe based on the logged in user-->
        Price: {{ session?.price?.display | currency: session?.price?.currency }}
      </h3>
      <button mat-raised-button color="accent" style="width: 100%;"><h3>Enroll In Session</h3></button>
      <div fxLayout="row" fxLayoutAlign="center center" fxLayoutGap="10px">
        <mat-icon>favorite_border</mat-icon>
        <div>{{ session?.recommendationPercentage }} % people recommended this</div>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button>
        <mat-icon>card_giftcard</mat-icon>
        Give as a gift
      </button>
      <button mat-button>
        <mat-icon>favorite_border</mat-icon>
        Save to my journey
      </button>
    </mat-card-actions>
  </mat-card>
</ng-template>

<mat-menu #menu="matMenu">
  <button mat-menu-item>Menu 1</button>
  <button mat-menu-item>Menu 2</button>
</mat-menu>
