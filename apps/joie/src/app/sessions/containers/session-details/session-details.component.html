<div class="container" *ngIf="session$ | async as session">
  <div class="main-index-columns">
    <main>
      <header class="no-inset-gutters" style="content-visibility: revert; position: relative">
        <div class="layout-rows-xs text-center">
          <button (click)="getKalturaSession()">Hi Kaltura</button>
          <button (click)="joinSession()">joinSession</button>

          <iframe
            style="background: black; border-radius: 6px; border: 0 none"
            src="{{
              endpointUrl
            }}/virtualEvent/launch?ks=djJ8Mjk3Njc1MXxgTFMXMSJuQSQtLKd2yFXo3xhj2TL9ugCfO-wVD0J0gvyVXahXQEczVpDRMm1voZZwXS_JXDPlb6kytb3nsIm7ZeFir5iLT5bTNljIas-Xv9vT2BpcO75ErTv_mVWxvRbmUHhL3oD2cwwPco0_0TAOP1Oz85PV1EZCuxGgjVkDmUbRCz2bdMAc8F-HJ9v5oSvRWuvrOKDO6a4KlVg-a8Rs"
            wmode="transparent"
            allow="microphone *; camera *; speakers *; usermedia *; autoplay *; fullscreen *;"
            width="100%"
            height="700px"
          ></iframe>

          <app-session-owner-links class="owner-links" *ngIf="isOwner$ | async"></app-session-owner-links>
          <div class="figure-pairing">
            <app-icon class="size-md" [name]="pillarIcons.get(pillar[session?.pillar])"></app-icon>
            <h4>
              <dfn [innerHTML]="session?.pillar | joiePrefix: false"></dfn>
            </h4>
          </div>
          <h1>{{ session?.title }}</h1>
          <address class="figure-pairing">
            <img src="{{ (owner$ | async)?.photoURL }}" class="author-image" width="28px" height="28px" />
            <h3>{{ (owner$ | async)?.displayName }}</h3>
          </address>
          <ul class="attributes">
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="calendar"></app-icon>
                <span>
                  {{ session?.duration?.amount + session?.duration?.unit }}
                </span>
              </app-paper-item>
            </li>
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="clock"></app-icon>
                <span>{{ session?.duration?.amount + session?.duration?.unit }}</span>
              </app-paper-item>
            </li>
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="monitor"></app-icon>
                <span>{{ session?.type }}</span>
              </app-paper-item>
            </li>
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="bar-chart"></app-icon>
                <span>{{ session?.level }}</span>
              </app-paper-item>
            </li>
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="tag"></app-icon>
                <span>{{ session?.price?.display | currency: session?.price?.currency }}</span>
              </app-paper-item>
            </li>
            <li>
              <app-paper-item>
                <app-icon class="size-sm" name="send"></app-icon>
                <span>Share</span>
              </app-paper-item>
            </li>
          </ul>
        </div>
      </header>
      <section class="no-inset-gutters">
        <figure>
          <app-video-intro
            [isLiveSession]="isLiveSession"
            [displayName]="(owner$ | async)?.displayName"
            [eventId]="eventId$ | async"
            [sessionType]="sessionType"
            [role]="role"
            [userContextualRole]="userContextualRole"
            [entryId]="entryId"
          ></app-video-intro>
        </figure>
      </section>
      <section class="no-inset-gutters">
        <mat-tab-group mat-stretch-tabs>
          <mat-tab label="What you will learn">
            <app-what-learn [session]="session"></app-what-learn>
          </mat-tab>
          <mat-tab label="Meet your teacher">
            <app-meet-teacher [session]="session"></app-meet-teacher>
          </mat-tab>
          <mat-tab label="What our community say">
            <app-community-say [session]="session"></app-community-say>
          </mat-tab>
        </mat-tab-group>
      </section>
    </main>
    <aside class="enrol-col">
      <section style="content-visibility: revert">
        <app-session-card [session]="session" [sessionId]="sessionId$ | async"></app-session-card>
      </section>
    </aside>
  </div>
</div>
