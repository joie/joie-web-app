{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/auth-state/+state/auth/actions/auth.actions.ts","webpack:///src/app/auth-state/+state/auth/effects/auth.effects.ts","webpack:///src/app/auth-state/+state/auth/facades/auth.facade.ts","webpack:///src/app/auth-state/+state/auth/reducers/auth.reducer.ts","webpack:///src/app/auth-state/+state/auth/selectors/auth.selectors.ts","webpack:///src/app/auth-state/auth-state.module.ts","webpack:///src/app/auth-state/services/auth/auth.service.ts","webpack:///src/app/common/auth-guards-pipes.ts","webpack:///src/app/core/core.module.ts","webpack:///src/app/core/page-not-found/page-not-found.component.ts","webpack:///src/app/core/page-not-found/page-not-found.component.html","webpack:///src/app/core/user-control/user-control.component.ts","webpack:///src/app/core/user-control/user-control.component.html","webpack:///src/app/services/db.service.ts","webpack:///src/app/shared/components/payment-source/payment-source.component.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/environments/environment.ts","webpack:///src/environments/firebase.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","loadChildren","m","PostsModule","AuthorModule","data","preload","AccountModule","redirectTo","pathMatch","component","AppRoutingModule","forRoot","preloadingStrategy","imports","AppComponent","selector","templateUrl","styleUrls","AppModule","initializeApp","firebase","enablePersistence","register","enabled","production","declarations","bootstrap","authStateChange","authStateAuthenticated","authStateNotAuthenticated","AuthEffects","actions$","authService","authStateChange$","pipe","uid","getUser$","user","observeAuthState","AuthFacade","store","user$","loaded$","error$","action","dispatch","payload","AUTH_FEATURE_KEY","initialState","undefined","loaded","authReducer","state","reducer","getAuthState","getAuthUser","getAuthLoaded","getAuthError","error","AuthStateModule","forFeature","providers","AuthService","afAuth","db","authFacade","get$","state$","subscribe","dispatchStateChange","authState","adminOnly","authorOnly","redirectUnauthorizedToLogin","redirectLoggedInToItems","belongsToAccount","next","params","CoreModule","runtimeChecks","strictStateImmutability","strictActionImmutability","instrument","PageNotFoundComponent","UserControlComponent","signInWithPopup","GoogleAuthProvider","signOut","DbService","afs","isCollection","doc","collection","valueChanges","set","add","isOdd","providedIn","PaymentSourceComponent","cfr","injector","PaymentMethodFormComponent","paymentSourceFormFactory","resolveComponentFactory","paymentSourceFormContainer","createComponent","instance","loadPaymentSourceForm","template","read","SharedModule","environment","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","err","console"],"mappings":"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","file":"main-es5.867b866ca9af03f53ddb.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { QuicklinkStrategy } from 'ngx-quicklink';\nimport { canActivate, AngularFireAuthGuard } from '@angular/fire/auth-guard';\nimport {\n  authorOnly,\n  redirectUnauthorizedToLogin,\n} from './common/auth-guards-pipes';\n\nimport { PageNotFoundComponent } from './core/page-not-found/page-not-found.component';\n\nconst routes: Routes = [\n  {\n    path: 'posts',\n    loadChildren: () =>\n      import('./posts/posts.module').then((m) => m.PostsModule),\n  },\n  {\n    path: 'author',\n    loadChildren: () =>\n      import('./author/author.module').then((m) => m.AuthorModule),\n    data: { preload: false },\n    ...canActivate(redirectUnauthorizedToLogin),\n    ...canActivate(authorOnly),\n  },\n  {\n    path: 'account',\n    loadChildren: () =>\n      import('./account/account.module').then((m) => m.AccountModule),\n    // TODO uncomment this when angularfire fixes their zone issue\n    // https://github.com/angular/angularfire/issues/2367\n    // ...canActivate(redirectUnauthorizedToLogin),\n  },\n\n  { path: '', redirectTo: 'posts', pathMatch: 'full' },\n  { path: '**', component: PageNotFoundComponent },\n];\n\n@NgModule({\n  imports: [\n    RouterModule.forRoot(routes, {\n      preloadingStrategy: QuicklinkStrategy,\n    }),\n  ],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class AppComponent {}\n","<app-user-control></app-user-control>\n<hr />\n<a routerLink=\"posts\">posts</a>\n<br />\n<a routerLink=\"author\">author</a>\n<br />\n<a routerLink=\"account\">account</a>\n\n<router-outlet></router-outlet>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AngularFireModule } from '@angular/fire';\nimport { AngularFireAuthModule } from '@angular/fire/auth';\nimport { AngularFirestoreModule, SETTINGS } from '@angular/fire/firestore';\nimport { AngularFireFunctionsModule, ORIGIN } from '@angular/fire/functions';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { ServiceWorkerModule } from '@angular/service-worker';\nimport { environment } from '../environments/environment';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { CoreModule } from './core/core.module';\nimport { SharedModule } from './shared/shared.module';\n\n@NgModule({\n  declarations: [AppComponent],\n  imports: [\n    BrowserModule,\n    CoreModule,\n    SharedModule,\n    AngularFireModule.initializeApp(environment.firebase),\n    AngularFireAuthModule,\n    AngularFirestoreModule.enablePersistence(),\n    AngularFireFunctionsModule,\n    AppRoutingModule,\n    ServiceWorkerModule.register('ngsw-worker.js', {\n      enabled: environment.production,\n    }),\n    BrowserAnimationsModule,\n  ],\n  // providers: [\n  //   {\n  //     provide: SETTINGS,\n  //     useValue: environment.production\n  //       ? undefined\n  //       : {\n  //           host: 'localhost:8081',\n  //           ssl: false,\n  //         },\n  //   },\n  //   {\n  //     provide: ORIGIN,\n  //     useValue: environment.production ? undefined : 'http://localhost:5001',\n  //   },\n  // ],\n  bootstrap: [AppComponent],\n})\nexport class AppModule {}\n","import { createAction, props } from '@ngrx/store';\nimport * as fromReducer from '../reducers/auth.reducer';\nimport { User } from '../models/auth.models';\n\n// export const loadAuth = createAction('[Auth] Load Auth');\n\n// export const loadAuthSuccess = createAction(\n//   '[Auth] Load Auth Success',\n//   props<Pick<fromReducer.State, 'user'>>()\n// );\n\n// export const loadAuthFailure = createAction(\n//   '[Auth] Load Auth Failure',\n//   props<Pick<fromReducer.State, 'error'>>()\n// );\n\nexport const authStateChange = createAction(\n  '[Auth] State Change',\n  props<{ uid: User['uid'] } | null>()\n);\n\nexport const authStateAuthenticated = createAction(\n  '[Auth] State Authenticated',\n  props<{ user: User }>()\n);\n\nexport const authStateNotAuthenticated = createAction(\n  '[Auth] State Not Authenticated'\n);\n\n// export const signOut = createAction('[Auth] Sign Out');\n","import { Injectable } from '@angular/core';\nimport { Action } from '@ngrx/store';\nimport { createEffect, Actions, ofType } from '@ngrx/effects';\n\nimport {\n  map,\n  switchMap,\n  withLatestFrom,\n  tap,\n  switchMapTo,\n  pluck,\n  catchError,\n  mergeMap\n} from 'rxjs/operators';\n\nimport * as AuthActions from '../actions/auth.actions';\nimport { AuthService } from '../../../services/auth/auth.service';\nimport { User } from '../models/auth.models';\nimport { interval, Observable, of, EMPTY } from 'rxjs';\n\n@Injectable()\nexport class AuthEffects {\n  authStateChange$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(AuthActions.authStateChange),\n      pluck('uid'),\n      switchMap(\n        (uid: User['uid']) =>\n          uid\n            ? this.authService.getUser$(uid).pipe(\n                map(\n                  user =>\n                    AuthActions.authStateAuthenticated({\n                      user\n                    })\n                  // catchError(() => AuthActions.authStateNotAuthenticated())\n                )\n              )\n            : of(AuthActions.authStateNotAuthenticated())\n\n        // this.authService.getUser$(uid).pipe(\n        //   switchMap<typeof AuthActions.authStateNotAuthenticated>((user: User) => AuthActions.authStateNotAuthenticated())\n        // )\n      )\n      // map(uid => {\n      //   console.log(1, uid);\n      //   AuthActions.authStateAuthenticated({} as User);\n      // }),\n      // map((uid: User['uid']) =>\n      //   uid\n      //     ? this.authService\n      //         .getUser$(uid)\n      //         .pipe(\n      //           switchMap((user: User) =>\n      //             AuthActions.authStateAuthenticated(user)\n      //           )\n      //         )\n      //     : AuthActions.authStateNotAuthenticated()\n      // ),\n      // map((fbUser: User) =>\n      //   fbUser\n      //     ? this.authService\n      //         .getUser$(fbUser.uid)\n      //         .pipe(switchMap(user => AuthActions.authStateAuthenticated(user)))\n      //     : AuthActions.authStateNotAuthenticated()\n      // ),\n      // tap(console.log)\n    )\n  );\n\n  constructor(private actions$: Actions, private authService: AuthService) {\n    authService.observeAuthState();\n  }\n}\n","import { Injectable } from '@angular/core';\n\nimport { select, Store, Action } from '@ngrx/store';\n\nimport * as fromActions from '../actions/auth.actions';\nimport * as fromAuth from '../reducers/auth.reducer';\nimport * as AuthSelectors from '../selectors/auth.selectors';\nimport { User } from '../models/auth.models';\n\n@Injectable()\nexport class AuthFacade {\n  user$ = this.store.pipe(select(AuthSelectors.getAuthUser));\n  loaded$ = this.store.pipe(select(AuthSelectors.getAuthLoaded));\n  error$ = this.store.pipe(select(AuthSelectors.getAuthError));\n\n  constructor(private store: Store<fromAuth.State>) {}\n\n  private dispatch(action: Action) {\n    this.store.dispatch(action);\n  }\n\n  dispatchStateChange(payload: { uid: User['uid'] } | null) {\n    this.dispatch(fromActions.authStateChange(payload));\n  }\n}\n","import { Action, createReducer, on } from '@ngrx/store';\nimport * as AuthActions from '../actions/auth.actions';\nimport { User } from '../models/auth.models';\n\nexport const AUTH_FEATURE_KEY = 'auth';\n\nexport interface State {\n  user: User;\n  loaded: boolean;\n  error?: any;\n}\n\nexport const initialState: State = {\n  user: undefined,\n  loaded: false\n};\n\nconst authReducer = createReducer(\n  initialState,\n\n  // on(AuthActions.loadAuth, (state): State => ({ ...state, loaded: false })),\n  // on(\n  //   AuthActions.loadAuthSuccess,\n  //   (state, { user }): State => ({ ...state, user, loaded: true })\n  // ),\n  // on(\n  //   AuthActions.loadAuthFailure,\n  //   (state, { error }): State => ({ ...state, error, loaded: true })\n  //   ),\n  on(AuthActions.authStateChange, () => initialState),\n  on(\n    AuthActions.authStateAuthenticated,\n    (state, { user }): State => ({ ...state, user, loaded: true })\n  ),\n  on(\n    AuthActions.authStateNotAuthenticated,\n    (state): State => ({ ...state, user: null, loaded: true })\n  )\n);\n\nexport function reducer(state: State | undefined, action: Action) {\n  return authReducer(state, action);\n}\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { AUTH_FEATURE_KEY, State } from '../reducers/auth.reducer';\n\n// Lookup the 'Auth' feature state managed by NgRx\nexport const getAuthState = createFeatureSelector<State>(AUTH_FEATURE_KEY);\n\nexport const getAuthUser = createSelector(\n  getAuthState,\n  (state: State) => state.user\n);\n\nexport const getAuthLoaded = createSelector(\n  getAuthState,\n  (state: State) => state.loaded\n);\n\nexport const getAuthError = createSelector(\n  getAuthState,\n  (state: State) => state.error\n);\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport * as fromAuth from './+state/auth/reducers/auth.reducer';\nimport { AuthEffects } from './+state/auth/effects/auth.effects';\nimport { AuthFacade } from './+state/auth/facades/auth.facade';\nimport { AuthService } from './services/auth/auth.service';\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    StoreModule.forFeature(fromAuth.AUTH_FEATURE_KEY, fromAuth.reducer),\n    EffectsModule.forFeature([AuthEffects])\n  ],\n  providers: [AuthFacade, AuthService]\n})\nexport class AuthStateModule {}\n","import { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { Observable, of } from 'rxjs';\nimport { User } from '../../+state/auth/models/auth.models';\nimport { DbService } from 'src/app/services/db.service';\nimport { AuthFacade } from '../../+state/auth/facades/auth.facade';\n\n@Injectable()\nexport class AuthService {\n  get state$() {\n    // this.afAuth.authState.subscribe(console.log);\n    return this.afAuth.authState;\n  }\n\n  getUser$(uid: User['uid']): Observable<User> {\n    return this.db.get$<User>(`users/${uid}`) as Observable<User>;\n  }\n\n  constructor(\n    private afAuth: AngularFireAuth,\n    private db: DbService,\n    private authFacade: AuthFacade\n  ) {}\n\n  observeAuthState() {\n    this.state$.subscribe((user: User) => {\n      const payload = user ? { uid: user.uid } : null;\n      this.authFacade.dispatchStateChange(payload);\n    });\n  }\n}\n","import {\n  hasCustomClaim,\n  redirectUnauthorizedTo,\n  redirectLoggedInTo,\n} from '@angular/fire/auth-guard';\n\n// import { customClaims } from '@angular/fire/auth-guard';\n// import { pipe } from 'rxjs';\n// import { map, tap, pluck } from 'rxjs/operators';\n\n// type Claim = 'admin' | 'author'; // etc'...\n\n// export const claimCheck = (claim: Claim, alternatePath = ['']) => () =>\n//   pipe(\n//     customClaims,\n//     pluck(claim),\n//     tap((hasClaim: boolean) => {\n//       !hasClaim && console.warn(`user must be ${claim}`);\n//     }),\n//     map((hasClaim) => hasClaim || alternatePath)\n//   );\n\nexport const adminOnly = () => hasCustomClaim('admin');\nexport const authorOnly = () => hasCustomClaim('author');\nexport const redirectUnauthorizedToLogin = () =>\n  redirectUnauthorizedTo(['login']);\nexport const redirectLoggedInToItems = () => redirectLoggedInTo(['items']);\nexport const belongsToAccount = (next) =>\n  hasCustomClaim(`account-${next.params.id}`);\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { environment } from '../../environments/environment';\n\nimport { StoreModule } from '@ngrx/store';\nimport { StoreDevtoolsModule } from '@ngrx/store-devtools';\nimport { EffectsModule } from '@ngrx/effects';\nimport { AuthStateModule } from '../auth-state/auth-state.module';\nimport { UserControlComponent } from './user-control/user-control.component';\nimport { PageNotFoundComponent } from './page-not-found/page-not-found.component';\n\n@NgModule({\n  declarations: [UserControlComponent, PageNotFoundComponent],\n  imports: [\n    CommonModule,\n    StoreModule.forRoot(\n      {},\n      {\n        runtimeChecks: {\n          strictStateImmutability: true,\n          strictActionImmutability: true,\n        },\n      }\n    ),\n    EffectsModule.forRoot([]),\n    !environment.production ? StoreDevtoolsModule.instrument() : [],\n    AuthStateModule,\n  ],\n  exports: [UserControlComponent, PageNotFoundComponent],\n})\nexport class CoreModule {}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.scss']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<h1>page-not-found 404</h1>\n","import { Component } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport { auth } from 'firebase/app';\nimport { AuthFacade } from '../../auth-state/+state/auth/facades/auth.facade';\n\n@Component({\n  selector: 'app-user-control',\n  templateUrl: './user-control.component.html',\n  styleUrls: ['./user-control.component.scss']\n})\nexport class UserControlComponent {\n  constructor(private afAuth: AngularFireAuth, public authFacade: AuthFacade) {}\n  login() {\n    this.afAuth.signInWithPopup(new auth.GoogleAuthProvider());\n  }\n  logout() {\n    this.afAuth.signOut();\n  }\n}\n","<ng-container *ngIf=\"authFacade.loaded$ | async\">\n  <div *ngIf=\"authFacade.user$ | async as user; else showLogin\">\n    <h1>Hello {{ user.displayName }}!</h1>\n    <button (click)=\"logout()\">Logout</button>\n  </div>\n</ng-container>\n\n<ng-template #showLogin>\n  <p>Please login.</p>\n  <button (click)=\"login()\">Login with Google</button>\n</ng-template>\n","import { Injectable } from '@angular/core';\nimport 'firebase/firestore';\nimport {\n  AngularFirestore,\n  AngularFirestoreDocument,\n  AngularFirestoreCollection\n} from '@angular/fire/firestore';\nimport { Observable, of, from } from 'rxjs';\nimport { __, split, modulo, pipe, length, equals } from 'ramda';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DbService {\n  // private itemDoc: AngularFirestoreDocument<Item>;\n  // item: Observable<Item>;\n  constructor(private afs: AngularFirestore) {\n    // this.itemDoc = afs.doc<Item>('items/1');\n    // this.item = this.itemDoc.valueChanges();\n  }\n  // update(item: Item) {\n  //   this.itemDoc.update(item);\n  // }\n  get isCollection(): (path: string) => boolean {\n    // ! throw error if empty string\n    const isOdd = modulo(__, 2);\n    return pipe(split('/'), length, isOdd, equals(0));\n  }\n\n  get$<T>(path: string): Observable<T> | Observable<T[]> {\n    return (this.isCollection(path)\n      ? this.afs.doc<T>(path)\n      : this.afs.collection<T>(path)\n    ).valueChanges();\n    // return this.afs.doc<T>(path).valueChanges();\n    // return this.afs.collection<T>(path).valueChanges();\n  }\n\n  set$<T>(path: string, data: T) {\n    return from(\n      this.isCollection(path)\n        ? this.afs.doc<T>(path).set(data)\n        : this.afs.collection<T>(path).add(data)\n    );\n  }\n}\n","import {\n  Component,\n  ViewContainerRef,\n  ComponentFactoryResolver,\n  ViewChild,\n  Injector,\n} from '@angular/core';\n\n@Component({\n  selector: 'app-payment-source',\n  template: `\n    <button (click)=\"loadPaymentSourceForm()\">\n      open payment source form\n    </button>\n    <ng-container #paymentSourceFormContainer></ng-container>\n  `,\n})\nexport class PaymentSourceComponent {\n  @ViewChild('paymentSourceFormContainer', { read: ViewContainerRef })\n  private paymentSourceFormContainer: ViewContainerRef;\n\n  constructor(\n    private cfr: ComponentFactoryResolver,\n    private injector: Injector\n  ) {}\n\n  // TODO move to a dedicated service\n  async loadPaymentSourceForm() {\n    const { PaymentMethodFormComponent: component } = await import(\n      '../payment-method-form/payment-method-form.component'\n    );\n    const paymentSourceFormFactory = this.cfr.resolveComponentFactory(\n      component\n    );\n    const { instance } = this.paymentSourceFormContainer.createComponent(\n      paymentSourceFormFactory,\n      null,\n      this.injector\n    );\n    // instance.ngOnInit();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { QuicklinkModule } from 'ngx-quicklink';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { PaymentSourceComponent } from './components/payment-source/payment-source.component';\n\n@NgModule({\n  declarations: [PaymentSourceComponent],\n  imports: [CommonModule, QuicklinkModule, ReactiveFormsModule],\n  exports: [\n    CommonModule,\n    QuicklinkModule,\n    ReactiveFormsModule,\n    PaymentSourceComponent,\n  ],\n})\nexport class SharedModule {}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\nimport { firebase } from './firebase';\n\nexport const environment = {\n  production: false,\n  firebase\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","export const firebase = {\n  apiKey: 'AIzaSyDDdA9HiFEBsGGxcG1xfbJHKEr7LkziaQM',\n  authDomain: 'joie-app.firebaseapp.com',\n  databaseURL: 'https://joie-app.firebaseio.com',\n  projectId: 'joie-app',\n  storageBucket: 'joie-app.appspot.com',\n  messagingSenderId: '999974863094',\n  appId: '1:999974863094:web:37ae6deb807f3a8d206cd7',\n  measurementId: 'G-4L534VZ3CD',\n};\n// Stripe.setPublishableKey('pk_test_2iuUrsVhJB1IVAhu1KnRYSFA00elnKh57f');\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch((err) => console.error(err));\n"]}